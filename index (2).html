<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>诺亚的备考契约 V45.0 - 归零与重生</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;700&display=swap');
        :root {
            --primary-bg: #1a1a1a; --primary-text: #EAD0D8; --accent-color: #F2B3C4;
            --correct-color: #89D9A2; --incorrect-color: #D98989; --container-bg: #2b2b2b; --input-bg: #333;
            --knockturn-color: #7E57C2; --mood-color: #64B5F6; --focus-color: #FFD54F;
            --choice-btn-bg: rgba(255, 255, 255, 0.1);
            --choice-btn-hover-bg: rgba(242, 179, 196, 0.8);
            --fireplace-color: #FF8A65;
            --review-color: #a3b8f2;
            --pomo-ring-bg: rgba(242, 179, 196, 0.1);
            --pomo-ring-fill: #F2B3C4;
            /* Calendar Colors */
            --cal-bg: #222; --cal-header: #333; --cal-day-hover: #444;
            --cal-level-0: #2a2a2a; --cal-level-1: rgba(242, 179, 196, 0.2);
            --cal-level-2: rgba(242, 179, 196, 0.5); --cal-level-3: rgba(242, 179, 196, 0.8);
            --cal-level-4: #F2B3C4;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { height: 100%; }
        body { 
            font-family: 'Noto Sans SC', sans-serif; background-color: var(--primary-bg); color: var(--primary-text); 
            display: flex; justify-content: center; align-items: center; padding: 10px; 
            min-height: 100%;
            background-size: cover; background-position: center; background-attachment: fixed;
            transition: background-image 1s ease-in-out;
        }
        body.scene-library { background-image: url('https://picui.cn/free-pic/2024/05/982f0729352e0c0fe057416e78832a81.jpg'); }
        body.scene-common-room { background-image: url('https://picui.cn/free-pic/2024/05/73ed2494957f123d6a2a0d164cf38fc6.jpg'); }
        body.scene-dormitory { background-image: url('https://picui.cn/free-pic/2024/05/98a72b0c3609fc6fce224a1b02b542c9.jpg'); }
        body.scene-astronomy-tower { background-image: url('https://picui.cn/free-pic/2024/05/4ed0761e05a2f58e4589d97036d65451.jpg'); }

        .main-container { 
            display: flex; flex-wrap: wrap; gap: 20px; width: 100%; max-width: 1400px; 
            justify-content: center; align-items: stretch; 
            background: rgba(43, 43, 43, 0.85);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(242, 179, 196, 0.2);
            border-radius: 15px;
            padding: 25px;
        }
        .game-container, .character-container { background-color: transparent; border: none; padding: 10px; box-shadow: none; flex: 1; min-width: 350px; display: flex; flex-direction: column; }
        
        .game-container { 
            max-width: 650px; 
            position: relative; 
            min-height: 480px; 
            display: flex;
            flex-direction: column;
        } 
        .character-container { max-width: 550px; }
        
        h1, h2 { text-align: center; color: var(--accent-color); margin-bottom: 5px; font-weight: 700; }
        h1.review-mode-title { color: var(--review-color); }
        
     #character-image { 
    width: 100%; 
    height: 320px; 
    border-radius: 10px; 
    margin-bottom: 5px; 
    /* 核心代码：cover表示"填满但裁剪"，contain表示"完整显示但留黑边" */
    object-fit: cover; 
    /* 核心代码：center 20% 表示焦点在水平居中，垂直靠上20%的位置（通常是脸的位置） */
    object-position: center 20%; 
    cursor: pointer; 
    transition: transform 0.2s, box-shadow 0.2s; 
    border: 1px solid rgba(255,255,255,0.1); 
}


        #character-image:hover { transform: scale(1.02); box-shadow: 0 0 15px var(--accent-color); }
        
       .environment-status { text-align: center; font-size: 0.9em; color: #ccc; margin-bottom: 5px; padding: 2px 5px; background: rgba(0,0,0,0.2); border-radius: 5px; position: relative;}

        #current-scene, #current-weather { font-weight: bold; color: var(--primary-text); }
        .holiday-icon { position: absolute; top: 2px; right: 5px; font-size: 1.3em; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        
        #relationship-status { text-align: center; margin-bottom: 12px; font-size: 1.1rem; }
        #relationship-level { font-weight: bold; color: var(--accent-color); }
        .progress-bar { width: 100%; height: 8px; background-color: #444; border-radius: 4px; overflow: hidden; margin-top: 4px; }
        .progress-bar-inner { height: 100%; width: 0%; transition: width 0.3s ease; }
        #relationship-progress { background-color: var(--accent-color); }
        #mood-progress { background-color: var(--mood-color); }
        #focus-progress { background-color: var(--focus-color); }
        .stat-bar-label { font-size: 0.8em; color: #ccc; margin-top: 8px; }

        #word-learning-interface {
            display: flex;
            flex-direction: column;
            height: 100%;
            justify-content: space-between;
            padding-bottom: 20px;
        }
        .word-display { 
            text-align: center; 
            margin: 10px 0;
            flex-grow: 1; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
        }
        #word { font-size: 2.8rem; font-weight: bold; color: #fff; word-break: break-all; text-shadow: 0 0 10px rgba(255,255,255,0.3); margin-bottom: 20px; }
        #phonetic, #meaning-prompt, #noah-thought { font-size: 1.3rem; color: var(--primary-text); margin-top: 10px; }
        #noah-thought { color: #ccc; font-style: italic; font-size: 1.1rem; min-height: 1.5em; margin-bottom: 15px;}
        .noah-whisper { color: #888; font-style: italic; opacity: 0; animation: fadeInOut 4s ease-in-out; }
        @keyframes fadeInOut { 0% { opacity: 0; } 25% { opacity: 1; } 75% { opacity: 1; } 100% { opacity: 0; } }
        
        .game-area { min-height: 300px; display: flex; flex-direction: column; justify-content: flex-end; flex-grow: 0; padding-top: 30px; border-top: 1px solid rgba(255,255,255,0.05);}
        .options-container, .feedback-container { display: flex; flex-direction: column; align-items: center; gap: 18px; width: 100%; }
        .option-btn, .feedback-btn { background-color: rgba(255,255,255,0.05); border: 2px solid var(--primary-text); color: var(--primary-text); padding: 18px; border-radius: 12px; font-size: 1.2rem; cursor: pointer; transition: all 0.2s ease; width: 100%; text-align: center; font-weight: 500; }
        .option-btn:hover:not(:disabled) { background-color: var(--accent-color); color: var(--primary-bg); border-color: var(--accent-color); }
        #take-break-btn { border-color: var(--focus-color); color: var(--focus-color); }
        #take-break-btn:hover { background-color: var(--focus-color); color: var(--primary-bg); }
        
        .spelling-container { display: flex; flex-direction: column; align-items: center; gap: 15px; width: 100%; position: relative; }
        #usable-item-btn { position: absolute; top: -50px; right: 0; background-color: var(--knockturn-color); color: white; border: none; border-radius: 5px; padding: 8px 15px; font-size: 0.9em; cursor: pointer; }
        #spelling-input { background-color: var(--input-bg); border: 2px solid var(--primary-text); color: #fff; padding: 18px; border-radius: 10px; font-size: 1.6rem; text-align: center; width: 100%; max-width: 450px; }
        #spelling-input:focus { outline: none; border-color: var(--accent-color); }
        .spelling-container button:not(#usable-item-btn) { background-color: var(--accent-color); border: none; color: var(--primary-bg); padding: 15px 35px; border-radius: 8px; font-size: 1.2rem; cursor: pointer; font-weight: bold; }

        .hidden { display: none !important; }
        .correct { background-color: var(--correct-color) !important; border-color: var(--correct-color) !important; color: var(--primary-bg) !important; font-weight: bold; }
        .incorrect { background-color: var(--incorrect-color) !important; border-color: var(--incorrect-color) !important; color: var(--primary-bg) !important; }

      /* --- 修改 2：对话框紧凑化 (大幅减少内边距) --- */
/* ✅ 修改后的样子 */
.dialogue-box { 
    background-color: rgba(0,0,0,0.2); 
    border-radius: 10px; 
    padding: 15px 12px; /* 稍微增加一点内边距让文字不贴边 */
    
    /* 核心修改开始 */
    height: 130px;      /* 强制高度固定为 130像素 */
    min-height: 130px;  /* 最小也是 130像素，双重保险 */
    overflow-y: auto;   /* 如果诺亚话太多，允许框内滚动，而不是撑大框 */
    /* 核心修改结束 */

    /* flex-grow: 1;  <-- 建议删掉或注释掉这行，因为它会让框试图自动变大 */
    display: flex; 
    flex-direction: column; 
    justify-content: center; 
    text-align: center; 
    border: 1px solid rgba(255,255,255,0.05); 
    gap: 2px; 
    margin-bottom: 5px;
}




        #dialogue-text { font-size: 1.15rem; line-height: 1.7; color: #fff; font-style: italic; transition: opacity 0.5s, color 0.5s; }
        #streak-counter { font-size: 0.9rem; color: var(--accent-color); margin-top: 12px; height: 1.2em; font-weight: bold; }
        
             /* --- 修改开始：让日期时间一行显示且紧凑 --- */
        #time-display-container { 
            display: flex;             /* 【关键】开启弹性布局，让子元素自动排成一行 */
            justify-content: center;   /* 让内容在中间居中 */
            gap: 15px;                 /* 日期和时间中间留出15像素的空隙，不挤 */
            align-items: center;       /* 垂直方向对齐 */
            margin-bottom: 5px;        /* 【关键】把底部的空隙从12px改成5px，更省空间 */
            color: #ccc;               /* 保持原来的灰色文字 */
            font-size: 0.9rem;         /* 稍微调整一下字体大小，看起来更精致 */
            padding-top: 0px;          
            line-height: 1.2;          /* 行高改小一点，防止撑开太高 */
        }
        #date-display { font-size: 1em; } /* 保持继承的大小 */
        #time-display { font-size: 1em; font-weight: bold; margin-top: 1px;} /* 稍微微调一下对齐 */
        /* --- 修改结束 --- */


        /* --- 修改开始：让底部数据更紧凑 --- */
        .stats { 
            margin-top: auto; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            gap: 4px; /* 【修改点】间距从10px改成4px，更紧凑 */
            font-size: 0.9rem; /* 【修改点】字体稍微改小一点点 */
            text-align: center; 
            color: #aaa; 
            padding-top: 8px; /* 【修改点】顶部留白减少 */
            border-top: 1px solid rgba(255,255,255,0.1); 
            width: 100%;
        }
        
        /* 【新增】让专注点和已掌握排在一行的专用样式 */
        .stats-info-row {
            display: flex;
            justify-content: center; /* 居中对齐 */
            gap: 20px; /* 两个数据之间的距离 */
            width: 100%;
        }
        
        /* 稍微调整一下 p 标签的边距，防止被原来的样式撑开 */
        .stats-info-row p { margin: 0; }
        /* --- 修改结束 --- */

/* --- 底部按钮美化修改开始 --- */
.action-buttons { 
    display: grid; /* 【关键】使用网格布局 */
    grid-template-columns: repeat(5, 1fr); /* 【关键】强制一行5个，总共10个按钮正好两行 */
    gap: 5px; /* 按钮之间的微小间距 */
    margin-top: 5px; 
    width: 100%; 
    padding: 0 2px;
}

.action-btn { 
    background-color: var(--accent-color); 
    border: none; 
    color: var(--primary-bg); 
    padding: 6px 2px; /* 【关键】上下6px，左右2px，防止文字换行 */
    border-radius: 4px; 
    cursor: pointer; 
    font-weight: bold; 
    font-size: 0.8rem; /* 字体改小以适应紧凑布局 */
    transition: transform 0.1s;
    width: 100%; /* 填满格子 */
    white-space: nowrap; /* 防止文字换行 */
    overflow: hidden;
    text-overflow: ellipsis; /* 文字太长显示省略号 */
    display: flex;
    justify-content: center;
    align-items: center;
}
/* --- 底部按钮美化修改结束 --- */


        .action-btn { background-color: var(--accent-color); border: none; color: var(--primary-bg); padding: 10px 18px; border-radius: 6px; cursor: pointer; font-weight: bold; transition: transform 0.1s;}
        .action-btn:active { transform: scale(0.95); }
        .action-btn:disabled { background-color: #555; color: #999; cursor: not-allowed; }
        #review-btn { background-color: var(--review-color); }
        #reset-btn { background-color: #ff4d4d; color: #fff; border: 1px solid #e60000; box-shadow: 0 0 10px rgba(255, 0, 0, 0.3); }
        #reset-btn:hover { background-color: #ff1a1a; box-shadow: 0 0 15px rgba(255, 0, 0, 0.5); }
        #fireplace-btn { background: none; border: none; font-size: 1.8rem; cursor: pointer; padding: 0 5px; opacity: 0.6; }
        #fireplace-btn.active { opacity: 1; text-shadow: 0 0 10px var(--fireplace-color); }
        
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.8); justify-content: center; align-items: center; padding: 20px; backdrop-filter: blur(5px); }
        .modal-content { background-color: var(--container-bg); padding: 30px; border-radius: 15px; border: 1px solid var(--accent-color); text-align: center; max-width: 600px; width: 100%; box-shadow: 0 0 30px rgba(242, 179, 196, 0.3); max-height: 85vh; display: flex; flex-direction: column; }
        .modal-body { overflow-y: auto; margin-bottom: 20px; padding-right: 10px; text-align: left;}
        #modal-choices { display: flex; flex-direction: column; gap: 10px; margin-top: 20px; }
        .choice-btn { background-color: var(--choice-btn-bg); border: 1px solid var(--accent-color); color: var(--primary-text); padding: 12px; border-radius: 8px; font-size: 1rem; cursor: pointer; transition: all 0.2s; }
        .choice-btn:hover { background-color: var(--choice-btn-hover-bg); color: var(--primary-bg); }
        #shop-intro, #achievement-intro, #log-intro, #setup-intro, #pomo-log-intro { font-style: italic; color: #ccc; margin-bottom: 20px; text-align: center; }
        .modal h2 { color: var(--accent-color); margin-bottom: 10px; flex-shrink: 0; text-align: center; }
        .modal p { color: var(--primary-text); font-size: 1.1rem; line-height: 1.7; }
        .modal button.close-btn { background-color: var(--accent-color); border: none; color: var(--primary-bg); padding: 12px 30px; border-radius: 8px; font-size: 1rem; cursor: pointer; font-weight: bold; margin-top: auto; flex-shrink: 0; }
        #exit-review-btn { background-color: var(--incorrect-color); margin-top: 15px; }

        #shop-items-container, #scene-selection-container, #setup-form { display: flex; flex-direction: column; gap: 15px; }
        .setup-field { display: flex; flex-direction: column; gap: 5px; align-items: flex-start; text-align: left; }
        .setup-field label { font-weight: bold; }
        .setup-field input, .setup-field select { width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #555; background-color: var(--input-bg); color: var(--primary-text); font-size: 1rem; }
        
        input[type="range"] { width: 100%; margin: 10px 0; -webkit-appearance: none; background: transparent; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; height: 20px; width: 20px; border-radius: 50%; background: var(--accent-color); cursor: pointer; margin-top: -8px; }
        input[type="range"]::-webkit-slider-runnable-track { width: 100%; height: 4px; cursor: pointer; background: #555; border-radius: 2px; }

        .shop-item, .scene-item, .achievement-item { background-color: #333; padding: 15px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; gap: 10px; transition: opacity 0.3s; }
        .shop-item.locked, .scene-item.locked, .achievement-item.locked { opacity: 0.5; filter: grayscale(80%); }
        .shop-item-info, .scene-item-info, .achievement-item-info { text-align: left; }
        .shop-item-info h3, .scene-item-info h3, .achievement-item-info h3 { color: var(--accent-color); margin: 0; font-size: 1rem; }
        .shop-item-info p, .scene-item-info p, .achievement-item-info p { font-size: 0.9rem; color: #ccc; margin: 5px 0 0 0; }
        .shop-item-buy-btn, .scene-select-btn { background-color: var(--primary-text); color: var(--primary-bg); padding: 8px 15px; border-radius: 5px; border: none; cursor: pointer; font-size: 0.9rem; flex-shrink: 0; min-width: 80px; text-align: center;}
        .shop-item-buy-btn:disabled, .scene-select-btn:disabled { background-color: #555; cursor: not-allowed; color: #999; }
        .shop-category { font-weight: bold; margin-top: 20px; margin-bottom: 5px; border-bottom: 1px solid #555; padding-bottom: 5px; color: var(--accent-color); }
        .shop-category.knockturn { color: var(--knockturn-color); }

        #event-log-container, #pomo-log-list { list-style: none; padding: 0; }
        .event-log-item, .pomo-log-item { background-color: #2a2a2a; border-left: 3px solid var(--review-color); padding: 12px; margin-bottom: 10px; border-radius: 0 4px 4px 0; }
        .event-log-item .log-date, .pomo-log-item .log-date { color: #888; font-size: 0.8em; display: block; margin-bottom: 8px; }
        .event-log-item .log-text, .pomo-log-item .log-text { font-size: 1rem; line-height: 1.6; font-style: italic; color: #ddd; }

        #mode-switch-btn { position: absolute; top: 15px; right: 15px; background: transparent; border: 1px solid var(--accent-color); color: var(--accent-color); border-radius: 4px; padding: 8px 12px; cursor: pointer; font-size: 0.9em; z-index: 10; transition: all 0.3s; font-family: 'Noto Sans SC', sans-serif; font-weight: bold; letter-spacing: 1px; }
        #mode-switch-btn:hover { background: rgba(242, 179, 196, 0.15); box-shadow: 0 0 15px rgba(242, 179, 196, 0.3); }
        
        #pomodoro-container { display: none; flex-direction: column; align-items: center; justify-content: center; height: 100%; padding: 20px; }
        .timer-circle-container { position: relative; width: 250px; height: 250px; margin: 20px 0; display: flex; justify-content: center; align-items: center; }
        .timer-svg { transform: rotate(-90deg); width: 100%; height: 100%; }
        .timer-circle-bg { fill: none; stroke: var(--pomo-ring-bg); stroke-width: 8; }
        .timer-circle-fg { fill: none; stroke: var(--pomo-ring-fill); stroke-width: 8; stroke-dasharray: 707; stroke-dashoffset: 0; transition: stroke-dashoffset 1s linear; stroke-linecap: round; filter: drop-shadow(0 0 5px var(--accent-color)); }
        #timer-display { position: absolute; font-size: 3.5rem; font-weight: bold; font-family: monospace; color: var(--accent-color); text-shadow: 0 0 10px rgba(242, 179, 196, 0.3); }
        
        .timer-controls { display: flex; gap: 15px; margin-top: 15px; }
        .timer-btn { padding: 10px 25px; border-radius: 30px; border: 2px solid var(--accent-color); background: transparent; color: var(--accent-color); font-weight: bold; cursor: pointer; font-size: 1rem; transition: all 0.2s; }
        .timer-btn:hover:not(:disabled) { background-color: var(--accent-color); color: var(--primary-bg); box-shadow: 0 0 15px var(--accent-color); }
        .timer-btn:disabled { border-color: #555; color: #555; cursor: not-allowed; }
        #timer-status { margin-top: 15px; font-style: italic; color: #aaa; min-height: 1.5em; text-align: center; }
        
        .pomo-settings { width: 100%; max-width: 350px; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; margin-bottom: 10px; border: 1px solid #444; }
        .pomo-setting-row { margin-bottom: 12px; text-align: left; }
        .pomo-setting-row label { display: block; color: var(--accent-color); margin-bottom: 5px; font-size: 0.9em; }
        .pomo-type-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        .pomo-type-btn { background: #333; border: 1px solid #555; color: #aaa; padding: 8px; border-radius: 5px; cursor: pointer; font-size: 0.85em; transition: all 0.2s; }
        .pomo-type-btn.active { border-color: var(--accent-color); background: rgba(242, 179, 196, 0.15); color: var(--accent-color); }
        #pomo-log-btn { margin-top: 15px; font-size: 0.9em; padding: 5px 15px; opacity: 0.8; }
        
        .calendar-container { margin-top: 10px; width: 100%; max-width: 500px; background: var(--cal-bg); border-radius: 10px; padding: 15px; border: 1px solid #444; display: flex; flex-direction: column; align-items: center; }
        .calendar-header { display: flex; justify-content: space-between; align-items: center; width: 100%; margin-bottom: 15px; font-weight: bold; color: var(--accent-color); }
        .cal-nav-btn { background: transparent; border: none; color: var(--primary-text); cursor: pointer; font-size: 1.2em; padding: 5px 10px; }
        .cal-nav-btn:hover { color: var(--accent-color); }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; width: 100%; }
        .cal-day-label { font-size: 0.8em; color: #888; text-align: center; margin-bottom: 5px; }
        .cal-day { aspect-ratio: 1; border-radius: 4px; font-size: 0.9em; display: flex; justify-content: center; align-items: center; cursor: pointer; color: #ccc; position: relative; transition: transform 0.1s; }
        .cal-day:hover { transform: scale(1.1); z-index: 2; border: 1px solid #fff; }
        .cal-day.empty { background: transparent; cursor: default; pointer-events: none; }
        .cal-day.level-0 { background: var(--cal-level-0); }
        .cal-day.level-1 { background: var(--cal-level-1); color: #fff; }
        .cal-day.level-2 { background: var(--cal-level-2); color: #fff; font-weight: bold; }
        .cal-day.level-3 { background: var(--cal-level-3); color: #000; font-weight: bold; }
        .cal-day.level-4 { background: var(--cal-level-4); color: #000; font-weight: bold; box-shadow: 0 0 5px var(--accent-color); }
        .cal-day.today { border: 2px solid var(--focus-color); }
        #cal-detail-view { margin-top: 20px; padding-top: 15px; border-top: 1px solid #444; width: 100%; text-align: left; min-height: 100px; }
        #cal-detail-date { color: var(--accent-color); font-weight: bold; margin-bottom: 5px; }
        #cal-detail-content { font-size: 0.9em; line-height: 1.5; color: #ddd; }
        
        @media (max-width: 900px) { .main-container { flex-direction: column; align-items: center; padding: 5px; } .game-container, .character-container { max-width: 100%; width: 100%; } }
   /* --- 诺亚的词书选择器样式 (Black & Pink) --- */
.book-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-top: 20px;
}
.book-card {
    background: #000;
    border: 2px solid #333;
    border-radius: 10px;
    padding: 15px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    text-align: left;
}
.book-card:hover {
    border-color: var(--accent-color);
    box-shadow: 0 0 15px var(--accent-color);
    transform: translateY(-3px);
}
.book-card.active {
    border-color:  #F2B3C4; /* Hot Pink */
    background: linear-gradient(145deg, #1a1a1a, #000);
    box-shadow: 0 0 20px rgba(255, 105, 180, 0.4);
}
.book-card.active::after {
    content: '当前使用';
    position: absolute;
    top: 5px;
    right: 5px;
    font-size: 0.7em;
    background: #F2B3C4;
    color: #000;
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: bold;
}
.book-title {
    color: #F2B3C4;
    font-size: 1.1em;
    font-weight: bold;
    margin-bottom: 8px;
    border-bottom: 1px solid rgba(255,105,180, 0.3);
    padding-bottom: 5px;
}
.book-desc {
    color: #ccc;
    font-size: 0.9em;
    line-height: 1.4;
}
.book-stats {
    font-size: 0.8em;
    color: #888;
    margin-top: 10px;
    font-style: italic;
}
/* --- 新增：视觉增强特效 --- */

/* 1. 错误震动动画 */
@keyframes shake-animation {
    0% { transform: translateX(0); }
    20% { transform: translateX(-10px); }
    40% { transform: translateX(10px); }
    60% { transform: translateX(-10px); }
    80% { transform: translateX(10px); }
    100% { transform: translateX(0); }
}

.shake-effect {
    animation: shake-animation 0.4s ease-in-out;
    border-color: var(--incorrect-color) !important;
    box-shadow: 0 0 15px var(--incorrect-color);
}

/* 2. 浮动数值动画 */
.floating-popup {
    position: fixed; /* 固定定位，防止被容器遮挡 */
    pointer-events: none; /* 鼠标穿透，不影响点击 */
    font-weight: bold;
    font-size: 1.5rem;
    z-index: 9999;
    text-shadow: 1px 1px 2px #000;
    animation: float-up-fade 1.5s forwards;
}

@keyframes float-up-fade {
    0% { opacity: 0; transform: translateY(0) scale(0.8); }
    20% { opacity: 1; transform: translateY(-20px) scale(1.2); }
    100% { opacity: 0; transform: translateY(-60px) scale(1); }
}
/* --- 新增：底部功能按钮美化 --- */
#book-btn, #export-btn, #import-btn {
    background-color: rgba(0, 0, 0, 0.4) !important; /* 统一用半透明黑色背景 */
    border: 1px solid #555 !important;
    color: #ccc !important;
    transition: all 0.3s ease;
}

/* 给每个按钮一点点不同的微光，区分功能，但不刺眼 */
#book-btn:hover {
    border-color: var(--accent-color) !important; /* 悬停变成粉色 */
    color: var(--accent-color) !important;
    box-shadow: 0 0 10px rgba(242, 179, 196, 0.2);
}

#export-btn:hover {
    border-color: #4682B4 !important; /* 悬停变成淡蓝色 */
    color: #4682B4 !important;
    box-shadow: 0 0 10px rgba(70, 130, 180, 0.3);
}

#import-btn:hover {
    border-color: #89D9A2 !important; /* 悬停变成淡绿色 */
    color: #89D9A2 !important;
    box-shadow: 0 0 10px rgba(137, 217, 162, 0.3);
}

 </style>
</head>
<body class="scene-library">
<script>
// --- DATA V45.0 - ZERO & REBIRTH ---
const SAVE_KEY = 'noah_memoir_v46';
const MINUTE = 60 * 1000;
const HOUR = 60 * MINUTE;
const DAY = 24 * HOUR;
// --- 新增：打字机全局变量 ---
let typingTimer = null; // 用来存储打字机的定时器
let isTyping = false;   // 标记当前是否正在打字
let fullTextToType = ""; // 存储当前要打的完整文本

// --- 诺亚的图书馆：词书数据 ---

// 四级词汇（乱序版）
// --- 把下面这段代码完整复制 ---

const cet4_words = [
    { "word": "punctual", "phonetic": "/ˈpʌŋktʃuəl/", "meaning": "adj. 准时的，守时的", "noahWhisper": "守时是基本的礼貌，希望你约会时也能做到。" },
    { "word": "lucky", "phonetic": "/ˈlʌki/", "meaning": "adj. 幸运的", "noahWhisper": "遇见我，是你最大的 lucky。" },
    { "word": "spit", "phonetic": "/spɪt/", "meaning": "v. 吐痰；喷出 n. 唾液", "noahWhisper": "很不优雅的行为。别让我看到你这样做。" },
    { "word": "heaven", "phonetic": "/ˈhevn/", "meaning": "n. 天堂；天空", "noahWhisper": "对我来说，图书馆就是 heaven……当然，前提是你在旁边安静点。" },
    { "word": "consume", "phonetic": "/kənˈsuːm/", "meaning": "vt. 消耗，消费", "noahWhisper": "你的眼神正在 consume 我的理智。" },
    { "word": "bark", "phonetic": "/bɑːrk/", "meaning": "n. 树皮；狗叫 v. 咆哮", "noahWhisper": "别像条小狗一样乱叫，安静看书。" },
    { "word": "lock", "phonetic": "/lɑːk/", "meaning": "n. 锁 v. 锁上", "noahWhisper": "我想把你 lock 在我的视线范围内。" },
    { "word": "shy", "phonetic": "/ʃaɪ/", "meaning": "adj. 害羞的；胆怯的", "noahWhisper": "脸红了？真是容易 shy 的小东西。" },
    { "word": "adjective", "phonetic": "/ˈædʒɪktɪv/", "meaning": "n. 形容词", "noahWhisper": "用三个 adjective 形容我。快点。" },
    { "word": "death", "phonetic": "/deθ/", "meaning": "n. 死；死亡", "noahWhisper": "即使是 death 也不能把我们将分开。" },
    { "word": "revenge", "phonetic": "/rɪˈvendʒ/", "meaning": "n. & v. 报复；复仇", "noahWhisper": "最好的 revenge 是变得比他们都优秀。" },
    { "word": "import", "phonetic": "/ˈɪmpɔːrt/", "meaning": "n. 进口；含义 v. 输入", "noahWhisper": "这一题的知识点很重要，import 进你的脑子里。" },
    { "word": "nucleus", "phonetic": "/ˈnuːkliəs/", "meaning": "n. 核，核心", "noahWhisper": "你是我的 nucleus，万物围你而绕。" },
    { "word": "cost", "phonetic": "/kɔːst/", "meaning": "n. 成本 v. 花费", "noahWhisper": "为了你，我不计 cost。" },
    { "word": "Christian", "phonetic": "/'krɪtʃən/", "meaning": "n. 基督徒 adj. 基督教的", "noahWhisper": "信仰是个人的事，但你的信仰只能是我。" },
    { "word": "their", "phonetic": "/ðer/", "meaning": "pron. 他们的", "noahWhisper": "别管 their 怎么想，看着我。" },
    { "word": "bucket", "phonetic": "/ˈbʌkɪt/", "meaning": "n. 桶；一桶的量", "noahWhisper": "我的耐心只有一 bucket 那么多，别挥霍它。" },
    { "word": "logical", "phonetic": "/ˈlɑːdʒɪkl/", "meaning": "adj. 合逻辑的", "noahWhisper": "你的这个推论完全不 logical。重来。" },
    { "word": "careful", "phonetic": "/ˈkerfl/", "meaning": "adj. 仔细的，小心的", "noahWhisper": "Be careful，别摔进别人怀里。" },
    { "word": "dispute", "phonetic": "/dɪ'spjuːt/", "meaning": "v. & n. 辩论；争吵", "noahWhisper": "我不屑于与愚蠢的人 dispute。" },
    { "word": "certainty", "phonetic": "/ˈsɜːrtnti/", "meaning": "n. 必然；确实", "noahWhisper": "这世上唯一的 certainty 就是我会陪着你。" },
    { "word": "shop", "phonetic": "/ʃɑːp/", "meaning": "n. 商店 v. 购物", "noahWhisper": "想去 shop？那先做对这道题。" },
    { "word": "lap", "phonetic": "/læp/", "meaning": "n. 一圈；大腿", "noahWhisper": "过来，坐我 lap 上……别乱动，我在看书。" },
    { "word": "respond", "phonetic": "/rɪˈspɑːnd/", "meaning": "v. 回答；作出反应", "noahWhisper": "我叫你的时候，要立刻 respond。" },
    { "word": "special", "phonetic": "/ˈspeʃl/", "meaning": "adj. 特别的", "noahWhisper": "你是 special 的。独一无二。" },
    { "word": "worth", "phonetic": "/wɜːrθ/", "meaning": "adj. 值得的 n. 价值", "noahWhisper": "你 worth 世间最好的一切。" },
    { "word": "bubble", "phonetic": "/ˈbʌbl/", "meaning": "n. 气泡，泡沫", "noahWhisper": "戳破幻想的 bubble，面对现实吧。" },
    { "word": "last", "phonetic": "/læst/", "meaning": "adj. 最后的 v. 持续", "noahWhisper": "希望这节课能 last 到地老天荒。" },
    { "word": "monkey", "phonetic": "/ˈmʌŋki/", "meaning": "n. 猴子；顽童", "noahWhisper": "别像只 monkey 一样上蹿下跳。" },
    { "word": "auxiliary", "phonetic": "/ɔːɡˈzɪliəri/", "meaning": "adj. 辅助的；备用的", "noahWhisper": "我会是你最强的 auxiliary。" },
    { "word": "airline", "phonetic": "/ˈerlaɪn/", "meaning": "n. 航空公司；航线", "noahWhisper": "想去旅行？挑一家 airline，我们走。" },
    { "word": "monitor", "phonetic": "/ˈmɑːnɪtər/", "meaning": "n. 班长；监视器 v. 监控", "noahWhisper": "我会时刻 monitor 你的学习进度。" },
    { "word": "crawl", "phonetic": "/krɔːl/", "meaning": "v. 爬行；缓慢行进", "noahWhisper": "哪怕是 crawl，也要爬到终点。" },
    { "word": "vital", "phonetic": "/ˈvaɪtl/", "meaning": "adj. 至关重要的", "noahWhisper": "你对我来说是 vital 的。" },
    { "word": "lantern", "phonetic": "/ˈlæntərn/", "meaning": "n. 灯笼；提灯", "noahWhisper": "我来做你黑暗中的 lantern。" },
    { "word": "view", "phonetic": "/vjuː/", "meaning": "n. 风景；观点 v. 观察", "noahWhisper": "这里的 view 不错，但不如你好看。" },
    { "word": "phone", "phonetic": "/foʊn/", "meaning": "n. 电话 v. 打电话", "noahWhisper": "Phone 给我。我不希望除了我以外的人打扰你。" },
    { "word": "radius", "phonetic": "/ˈreɪdiəs/", "meaning": "n. 半径", "noahWhisper": "方圆几里 radius 内，你是最笨的那个。" },
    { "word": "defeat", "phonetic": "/dɪˈfiːt/", "meaning": "v. & n. 击败；战胜", "noahWhisper": "被单词 defeat 了？真丢人。" },
    { "word": "govern", "phonetic": "/ˈɡʌvərn/", "meaning": "v. 统治；管理", "noahWhisper": "让我来 govern 你的生活。" },
    { "word": "burden", "phonetic": "/ˈbɜːrdn/", "meaning": "n. 负担 v. 使负担", "noahWhisper": "把你的 burden 分给我一半。" },
    { "word": "spaceship", "phonetic": "/ˈspeɪsʃɪp/", "meaning": "n. 宇宙飞船", "noahWhisper": "想坐 spaceship 去月球？我们可以试试。" },
    { "word": "burst", "phonetic": "/bɜːrst/", "meaning": "v. & n. 爆裂；爆发", "noahWhisper": "别让我的怒气 burst 出来。" },
    { "word": "expectation", "phonetic": "/ˌekspekˈteɪʃn/", "meaning": "n. 期待；预期", "noahWhisper": "别辜负我的 expectation。" },
    { "word": "zeal", "phonetic": "/ziːl/", "meaning": "n. 热情；热心", "noahWhisper": "把这种 zeal 用在学习上。" },
    { "word": "certificate", "phonetic": "/sərˈtɪfɪkət/", "meaning": "n. 证书；执照", "noahWhisper": "这张 certificate 是我们努力的证明。" },
    { "word": "erect", "phonetic": "/ɪˈrekt/", "meaning": "v. 竖立；建造 adj. 直立的", "noahWhisper": "站直了，be erect。" },
    { "word": "gradual", "phonetic": "/ˈɡrædʒuəl/", "meaning": "adj. 逐渐的", "noahWhisper": "感情是 gradual 的过程。" },
    { "word": "infect", "phonetic": "/ɪnˈfekt/", "meaning": "vt. 感染，传染", "noahWhisper": "你的愚蠢会 infect 我吗？或许吧。" },
    { "word": "whenever", "phonetic": "/wenˈevər/", "meaning": "conj. 无论何时", "noahWhisper": "Whenever 你需要，我都在。" },
    { "word": "textile", "phonetic": "/ˈtekstaɪl/", "meaning": "n. 纺织品", "noahWhisper": "这件 textile 的触感不错。" },
    { "word": "uncertain", "phonetic": "/ʌnˈsɜːrtn/", "meaning": "adj. 不确定的", "noahWhisper": "别露出那种 uncertain 的表情，自信点。" },
    { "word": "tale", "phonetic": "/teɪl/", "meaning": "n. 故事；传说", "noahWhisper": "别听信那些无聊的 tale。" },
    { "word": "drip", "phonetic": "/drɪp/", "meaning": "v. 滴下 n. 水滴", "noahWhisper": "时间正在 drip 溜走。" },
    { "word": "furniture", "phonetic": "/ˈfɜːrnɪtʃər/", "meaning": "n. 家具", "noahWhisper": "以后我们的家需要什么样的 furniture？" },
    { "word": "memorial", "phonetic": "/məˈmɔːriəl/", "meaning": "n. 纪念碑 adj. 纪念的", "noahWhisper": "这一刻值得 memorial。" },
    { "word": "Asian", "phonetic": "/ˈeɪʒn/", "meaning": "adj. 亚洲的 n. 亚洲人", "noahWhisper": "（常识题）" },
    { "word": "loosen", "phonetic": "/ˈluːsn/", "meaning": "v. 放松；松开", "noahWhisper": "Loosen your tie，休息一下。" },
    { "word": "wreath", "phonetic": "/riːθ/", "meaning": "n. 花冠；花圈", "noahWhisper": "我不喜欢 wreath，太悲伤了。" },
    { "word": "bird", "phonetic": "/bɜːrd/", "meaning": "n. 鸟", "noahWhisper": "早起的 bird 有虫吃，快起来背单词。" },
    { "word": "member", "phonetic": "/ˈmembər/", "meaning": "n. 成员；会员", "noahWhisper": "你是我们双人俱乐部的终身 member。" },
    { "word": "mechanic", "phonetic": "/məˈkænɪk/", "meaning": "n. 技工，机修工", "noahWhisper": "即使是 mechanic 也有值得学习的地方。" },
    { "word": "normal", "phonetic": "/ˈnɔːrml/", "meaning": "adj. 正常的；正规的", "noahWhisper": "我不喜欢 normal，我喜欢卓越。" },
    { "word": "economic", "phonetic": "/ˌiːkəˈnɒmɪk/", "meaning": "adj. 经济的", "noahWhisper": "考虑一下 economic 效益。" },
    { "word": "soft", "phonetic": "/sɔːft/", "meaning": "adj. 柔软的；温柔的", "noahWhisper": "你的手很 soft。" },
    { "word": "mad", "phonetic": "/mæd/", "meaning": "adj. 疯狂的；生气的", "noahWhisper": "You drive me mad." },
    { "word": "private", "phonetic": "/ˈpraɪvət/", "meaning": "adj. 私人的；私有的", "noahWhisper": "这是我们 private 的时间。" },
    { "word": "cry", "phonetic": "/kraɪ/", "meaning": "v. & n. 哭；叫喊", "noahWhisper": "别 cry，眼泪解决不了问题。" },
    { "word": "cubic", "phonetic": "/ˈkjuːbɪk/", "meaning": "adj. 立方体的", "noahWhisper": "计算一下这个 cubic 的体积。" },
    { "word": "center", "phonetic": "/ˈsentər/", "meaning": "n. 中心 v. 居中", "noahWhisper": "你是我的 center。" },
    { "word": "clarify", "phonetic": "/ˈklærəfaɪ/", "meaning": "v. 澄清；阐明", "noahWhisper": "需要我再 clarify 一遍吗？笨蛋。" },
    { "word": "sentence", "phonetic": "/ˈsentəns/", "meaning": "n. 句子；判决", "noahWhisper": "造个 sentence 给我听听。" },
    { "word": "physics", "phonetic": "/ˈfɪzɪks/", "meaning": "n. 物理学", "noahWhisper": "Physics 揭示了宇宙的真理。" },
    { "word": "disable", "phonetic": "/dɪsˈeɪbl/", "meaning": "vt. 使失去能力；使残废", "noahWhisper": "别让懒惰 disable 你的才华。" },
    { "word": "weaken", "phonetic": "/ˈwiːkən/", "meaning": "v. 变弱；削弱", "noahWhisper": "别 weaken 你的意志。" },
    { "word": "facility", "phonetic": "/fəˈsɪləti/", "meaning": "n. 设备；容易", "noahWhisper": "这里的 facility 很完善。" },
    { "word": "shortage", "phonetic": "/ˈʃɔːrtɪdʒ/", "meaning": "n. 缺乏，不足", "noahWhisper": "我这里 shortage of kisses。" },
    { "word": "hasty", "phonetic": "/ˈheɪsti/", "meaning": "adj. 轻率的；匆忙的", "noahWhisper": "别做 hasty 的决定。" },
    { "word": "office", "phonetic": "/ˈɑːfɪs/", "meaning": "n. 办公室", "noahWhisper": "下课后来我 office。" },
    { "word": "wide", "phonetic": "/waɪd/", "meaning": "adj. 宽的；广阔的", "noahWhisper": "World is wide, 但我只想要你。" },
    { "word": "heat", "phonetic": "/hiːt/", "meaning": "n. 热；高温 v. 加热", "noahWhisper": "这里有点 heat，脸红了吗？" },
    { "word": "grey", "phonetic": "/ɡreɪ/", "meaning": "adj. 灰色的", "noahWhisper": "世界不只是 grey 的。" },
    { "word": "rail", "phonetic": "/reɪl/", "meaning": "n. 铁轨；栏杆", "noahWhisper": "扶好 rail，小心摔倒。" },
    { "word": "intimate", "phonetic": "/ˈɪntɪmət/", "meaning": "adj. 亲密的", "noahWhisper": "我们之间的关系很 intimate。" },
    { "word": "soil", "phonetic": "/sɔɪl/", "meaning": "n. 土壤；土地", "noahWhisper": "你是培育我爱的 soil。" },
    { "word": "grocer", "phonetic": "/ˈɡroʊsər/", "meaning": "n. 杂货店；食品商", "noahWhisper": "去 grocer 买点吃的。" },
    { "word": "with", "phonetic": "/wɪð/", "meaning": "prep. 和...一起", "noahWhisper": "Stay with me." },
    { "word": "hasten", "phonetic": "/ˈheɪsn/", "meaning": "v. 加速；催促", "noahWhisper": "Hasten up, 我们没时间了。" },
    { "word": "hotel", "phonetic": "/hoʊˈtel/", "meaning": "n. 旅馆", "noahWhisper": "如果你再不专心，我就把你扔在 hotel 里。" },
    { "word": "astonish", "phonetic": "/əˈstɑːnɪʃ/", "meaning": "v. 使惊讶", "noahWhisper": "你的进步让我 astonish。" },
    { "word": "salary", "phonetic": "/ˈsæləri/", "meaning": "n. 薪水", "noahWhisper": "我的 salary 足够养你了。" },
    { "word": "strawberry", "phonetic": "/ˈstrɔːberi/", "meaning": "n. 草莓", "noahWhisper": "想吃 strawberry 吗？" },
    { "word": "attract", "phonetic": "/əˈtrækt/", "meaning": "vt. 吸引", "noahWhisper": "你总是能 attract 我的目光。" },
    { "word": "tube", "phonetic": "/tuːb/", "meaning": "n. 管；电子管；地铁", "noahWhisper": "这就是麻瓜的 tube？有趣。" },
    { "word": "whether", "phonetic": "/ˈweðər/", "meaning": "conj. 是否", "noahWhisper": "无论 whether 你去哪，我都跟着。" },
    { "word": "shower", "phonetic": "/ˈʃaʊər/", "meaning": "n. 淋浴；阵雨", "noahWhisper": "去洗个 shower，清醒一下。" },
    { "word": "generally", "phonetic": "/ˈdʒenrəli/", "meaning": "adv. 通常；一般地", "noahWhisper": "Generally speaking，你不算太笨。" },
    { "word": "bloom", "phonetic": "/bluːm/", "meaning": "n. 花 v. 开花", "noahWhisper": "你像花一样 bloom。" },
    { "word": "shortly", "phonetic": "/ˈʃɔːrtli/", "meaning": "adv. 立刻；不久", "noahWhisper": "我 shortly 就回来。" },
    { "word": "never", "phonetic": "/ˈnevər/", "meaning": "adv. 从不", "noahWhisper": "Never say never." },
    { "word": "off", "phonetic": "/ɔːf/", "meaning": "adv. 离开；关掉", "noahWhisper": "Hands off! 别碰不该碰的。" },
    { "word": "candy", "phonetic": "/ˈkændi/", "meaning": "n. 糖果", "noahWhisper": "想吃 candy？回答对了才有。" },
    { "word": "absolutely", "phonetic": "/ˈæbsəluːtli/", "meaning": "adv. 绝对地", "noahWhisper": "Do you love me? Absolutely." },
    { "word": "journalist", "phonetic": "/ˈdʒɜːrnəlɪst/", "meaning": "n. 记者", "noahWhisper": "小心那个 journalist，像苍蝇一样。" },
    { "word": "helmet", "phonetic": "/ˈhelmɪt/", "meaning": "n. 头盔", "noahWhisper": "戴上 helmet，我们要去飞一圈。" },
    { "word": "afraid", "phonetic": "/əˈfreɪd/", "meaning": "adj. 害怕的", "noahWhisper": "Don't be afraid，我在。" },
    { "word": "mature", "phonetic": "/məˈtʃʊr/", "meaning": "adj. 成熟的", "noahWhisper": "你需要更 mature 一点。" },
    { "word": "actual", "phonetic": "/ˈæktʃuəl/", "meaning": "adj. 实际的", "noahWhisper": "这就是 actual 情况。" },
    { "word": "summarize", "phonetic": "/ˈsʌməraɪz/", "meaning": "v. 总结", "noahWhisper": "Summarize 一下今天学的。" },
    { "word": "unlike", "phonetic": "/ˌʌnˈlaɪk/", "meaning": "prep. 不像 adj. 不同的", "noahWhisper": "Unlike others, 你是特别的。" },
    { "word": "heavily", "phonetic": "/ˈhevɪli/", "meaning": "adv. 沉重地；猛烈地", "noahWhisper": "外面雨下得很 heavily。" },
    { "word": "show", "phonetic": "/ʃoʊ/", "meaning": "v. & n. 显示；表演", "noahWhisper": "Show me what you got." },
    { "word": "labor", "phonetic": "/ˈleɪbər/", "meaning": "n. 劳动；工作", "noahWhisper": "学习也是一种 labor。" },
    { "word": "scar", "phonetic": "/skɑːr/", "meaning": "n. 伤痕 v. 结疤", "noahWhisper": "每个 scar 都有故事。" },
    { "word": "leap", "phonetic": "/liːp/", "meaning": "v. & n. 跳跃", "noahWhisper": "Leap of faith." },
    { "word": "apology", "phonetic": "/əˈpɑːlədʒi/", "meaning": "n. 道歉", "noahWhisper": "我接受你的 apology。" },
    { "word": "constant", "phonetic": "/ˈkɑːnstənt/", "meaning": "adj. 不变的；恒定的", "noahWhisper": "Constant vigilance! (时刻保持警惕)" },
    { "word": "upwards", "phonetic": "/ˈʌpwərdz/", "meaning": "adv. 向上", "noahWhisper": "Look upwards." },
    { "word": "throw", "phonetic": "/θroʊ/", "meaning": "v. 投；抛", "noahWhisper": "Don't throw it away." },
    { "word": "gum", "phonetic": "/ɡʌm/", "meaning": "n. 口香糖；牙龈", "noahWhisper": "吐掉 gum，像什么样子。" },
    { "word": "milk", "phonetic": "/mɪlk/", "meaning": "n. 牛奶", "noahWhisper": "喝点 milk，长身体。" },
    { "word": "decision", "phonetic": "/dɪˈsɪʒn/", "meaning": "n. 决定", "noahWhisper": "这是一个明智的 decision。" },
    { "word": "commit", "phonetic": "/kəˈmɪt/", "meaning": "v. 承诺；犯罪", "noahWhisper": "Commit to me." },
    { "word": "gun", "phonetic": "/ɡʌn/", "meaning": "n. 枪", "noahWhisper": "小心 gun。" },
    { "word": "wall", "phonetic": "/wɔːl/", "meaning": "n. 墙", "noahWhisper": "即使是 wall 也挡不住我。" },
    { "word": "combination", "phonetic": "/ˌkɑːmbɪˈneɪʃn/", "meaning": "n. 结合；组合", "noahWhisper": "完美的 combination。" },
    { "word": "fault", "phonetic": "/fɔːlt/", "meaning": "n. 错误；缺点", "noahWhisper": "这不是你的 fault。" },
    { "word": "refresh", "phonetic": "/rɪˈfreʃ/", "meaning": "v. 刷新；恢复精神", "noahWhisper": "Refresh your mind." },
    { "word": "mountain", "phonetic": "/ˈmaʊntn/", "meaning": "n. 山", "noahWhisper": "像 mountain 一样可靠。" },
    { "word": "consent", "phonetic": "/kənˈsent/", "meaning": "n. & v. 同意", "noahWhisper": "我还没给 consent 呢。" },
    { "word": "behavior", "phonetic": "/bɪˈheɪvjər/", "meaning": "n. 行为", "noahWhisper": "注意你的 behavior。" },
    { "word": "nobody", "phonetic": "/ˈnoʊbədi/", "meaning": "pron. 没有人", "noahWhisper": "Nobody loves you like I do." },
    { "word": "sure", "phonetic": "/ʃʊr/", "meaning": "adj. 确信的", "noahWhisper": "Are you sure?" },
    { "word": "radium", "phonetic": "/ˈreɪdiəm/", "meaning": "n. 镭", "noahWhisper": "具有放射性的 radium。" },
    { "word": "halt", "phonetic": "/hɔːlt/", "meaning": "v. & n. 停止", "noahWhisper": "Halt! 停下。" },
    { "word": "listener", "phonetic": "/ˈlɪsənər/", "meaning": "n. 听众", "noahWhisper": "做一个好的 listener。" },
    { "word": "coach", "phonetic": "/koʊtʃ/", "meaning": "n. 教练；马车", "noahWhisper": "我会是你的专属 coach。" },
    { "word": "rent", "phonetic": "/rent/", "meaning": "n. 租金 v. 出租", "noahWhisper": "交 rent 的时候到了。" },
    { "word": "ceiling", "phonetic": "/ˈsiːlɪŋ/", "meaning": "n. 天花板", "noahWhisper": "盯着 ceiling 发呆也没用。" },
    { "word": "increasingly", "phonetic": "/ɪnˈkriːsɪŋli/", "meaning": "adv. 越来越多地", "noahWhisper": "你变得 increasingly 迷人了。" },
    { "word": "consist", "phonetic": "/kənˈsɪst/", "meaning": "v. 由...组成", "noahWhisper": "世界由微粒 consist。" },
    { "word": "narrow", "phonetic": "/ˈnæroʊ/", "meaning": "adj. 狭窄的", "noahWhisper": "这条路很 narrow。" },
    { "word": "system", "phonetic": "/ˈsɪstəm/", "meaning": "n. 系统", "noahWhisper": "System 故障了？还是你脑子故障了？" },
    { "word": "trade", "phonetic": "/treɪd/", "meaning": "n. 贸易 v. 交易", "noahWhisper": "这是一笔公平的 trade。" },
    { "word": "cellar", "phonetic": "/ˈselər/", "meaning": "n. 地窖", "noahWhisper": "像是斯莱特林的 cellar。" },
    { "word": "scenery", "phonetic": "/ˈsiːnəri/", "meaning": "n. 风景", "noahWhisper": "看书，别看 scenery。" },
    { "word": "unlikely", "phonetic": "/ʌnˈlaɪkli/", "meaning": "adj. 不太可能的", "noahWhisper": "It's highly unlikely." },
    { "word": "able", "phonetic": "/ˈeɪbl/", "meaning": "adj. 有能力的", "noahWhisper": "我相信你是 able 的。" },
    { "word": "flexible", "phonetic": "/ˈfleksəbl/", "meaning": "adj. 灵活的", "noahWhisper": "思维要 flexible 一点。" },
    { "word": "greatly", "phonetic": "/ˈɡreɪtli/", "meaning": "adv. 非常；大大地", "noahWhisper": "我 greatly 欣赏你的勇气。" },
    { "word": "airplane", "phonetic": "/ˈerpleɪn/", "meaning": "n. 飞机", "noahWhisper": "麻瓜的 airplane。" },
    { "word": "crowd", "phonetic": "/kraʊd/", "meaning": "n. 人群 v. 拥挤", "noahWhisper": "远离喧嚣的 crowd。" },
    { "word": "nothing", "phonetic": "/ˈnʌθɪŋ/", "meaning": "n. 无；没什么", "noahWhisper": "Nothing is impossible." },
    { "word": "stone", "phonetic": "/stoʊn/", "meaning": "n. 石头", "noahWhisper": "像 stone 一样坚硬。" },
    { "word": "statesman", "phonetic": "/ˈsteɪtsmən/", "meaning": "n. 政治家", "noahWhisper": "无聊的 statesman。" },
    { "word": "shriek", "phonetic": "/ʃriːk/", "meaning": "v. & n. 尖叫", "noahWhisper": "别发出那种 shriek，像曼德拉草。" },
    { "word": "investment", "phonetic": "/ɪnˈvestmənt/", "meaning": "n. 投资", "noahWhisper": "你是我最好的 investment。" },
    { "word": "recover", "phonetic": "/rɪˈkʌvər/", "meaning": "v. 恢复；重新获得", "noahWhisper": "快点 recover，我等你。" },
    { "word": "stare", "phonetic": "/ster/", "meaning": "v. 凝视", "noahWhisper": "别这么 stare 着我。" },
    { "word": "hut", "phonetic": "/hʌt/", "meaning": "n. 小屋", "noahWhisper": "海格的 hut。" },
    { "word": "planet", "phonetic": "/ˈplænɪt/", "meaning": "n. 行星", "noahWhisper": "你是哪个 planet 来的？" },
    { "word": "purely", "phonetic": "/ˈpjʊrli/", "meaning": "adv. 纯粹地", "noahWhisper": "这 purely 是个意外。" },
    { "word": "marble", "phonetic": "/ˈmɑːrbl/", "meaning": "n. 大理石", "noahWhisper": "冷得像 marble。" },
    { "word": "obtain", "phonetic": "/əbˈteɪn/", "meaning": "vt. 获得", "noahWhisper": "通过努力 obtain 知识。" },
    { "word": "quart", "phonetic": "/kwɔːrt/", "meaning": "n. 夸脱(容量单位)", "noahWhisper": "一 quart 的南瓜汁。" },
    { "word": "concentrate", "phonetic": "/ˈkɑːnsntreɪt/", "meaning": "v. 集中；浓缩", "noahWhisper": "Concentrate! 专心点。" },
    { "word": "comprehensive", "phonetic": "/ˌkɑːmprɪˈhensɪv/", "meaning": "adj. 综合的；广泛的", "noahWhisper": "做一个 comprehensive 的复习。" },
    { "word": "save", "phonetic": "/seɪv/", "meaning": "v. 拯救；节省", "noahWhisper": "Save your tears." },
    { "word": "like", "phonetic": "/laɪk/", "meaning": "v. 喜欢 prep. 像", "noahWhisper": "I like you. (这是个例句，别多想)" },
    { "word": "market", "phonetic": "/ˈmɑːrkɪt/", "meaning": "n. 市场", "noahWhisper": "嘈杂的 market。" },
    { "word": "gratitude", "phonetic": "/ˈrætɪtuːd/", "meaning": "n. 感激", "noahWhisper": "我对你心存 gratitude。" },
    { "word": "adult", "phonetic": "/əˈdʌlt/", "meaning": "n. 成年人 adj. 成年的", "noahWhisper": "像个 adult 一样行事。" },
    { "word": "inevitable", "phonetic": "/ɪnˈevɪtəbl/", "meaning": "adj. 不可避免的", "noahWhisper": "我们的相遇是 inevitable 的。" },
    { "word": "bond", "phonetic": "/bɑːnd/", "meaning": "n. 纽带；结合 v. 结合", "noahWhisper": "我们之间有特殊的 bond。" },
    { "word": "plunge", "phonetic": "/plʌndʒ/", "meaning": "v. 纵身投入；骤降", "noahWhisper": "Plunge into the ocean of knowledge." },
    { "word": "physical", "phonetic": "/ˈfɪzɪkl/", "meaning": "adj. 身体的；物理的", "noahWhisper": "Physical 的接触？你想多了。" },
    { "word": "horror", "phonetic": "/ˈhɔːrər/", "meaning": "n. 恐惧；恐怖", "noahWhisper": "没什么好 horror 的。" },
    { "word": "Japan", "phonetic": "/dʒəˈpæn/", "meaning": "n. 日本", "noahWhisper": "Japan 的樱花不错。" },
    { "word": "proceed", "phonetic": "/proʊˈsiːd/", "meaning": "v. 继续进行", "noahWhisper": "Proceed, 继续你的表演。" },
    { "word": "girl", "phonetic": "/ɡɜːrl/", "meaning": "n. 女孩", "noahWhisper": "Silly girl." },
    { "word": "knot", "phonetic": "/nɑːt/", "meaning": "n. 结 v. 打结", "noahWhisper": "解开这个 knot。" },
    { "word": "cover", "phonetic": "/ˈkʌvər/", "meaning": "v. 覆盖 n. 封面", "noahWhisper": "Don't cover your eyes." },
    { "word": "amount", "phonetic": "/əˈmaʊnt/", "meaning": "n. 数量 v. 总计", "noahWhisper": "大量的 amount。" },
    { "word": "roller", "phonetic": "/ˈroʊlər/", "meaning": "n. 滚筒", "noahWhisper": "Roller coaster." },
    { "word": "meanwhile", "phonetic": "/ˈmiːnwaɪl/", "meaning": "adv. 同时", "noahWhisper": "Meanwhile, 我在想你。" },
    { "word": "engine", "phonetic": "/ˈendʒɪn/", "meaning": "n. 引擎", "noahWhisper": "启动你的 brain engine。" },
    { "word": "sophisticated", "phonetic": "/səˈfɪstɪkeɪtɪd/", "meaning": "adj. 复杂的；老练的", "noahWhisper": "你看起来一点也不 sophisticated。" },
    { "word": "commonly", "phonetic": "/ˈkɑːmənli/", "meaning": "adv. 通常地", "noahWhisper": "这是一个 commonly 的错误。" },
    { "word": "ought", "phonetic": "/ɔːt/", "meaning": "v. 应该", "noahWhisper": "You ought to know better." },
    { "word": "symbol", "phonetic": "/ˈsɪmbl/", "meaning": "n. 象征", "noahWhisper": "这是什么 symbol？" },
    { "word": "disposal", "phonetic": "/dɪˈspoʊzl/", "meaning": "n. 处理；支配", "noahWhisper": "I am at your disposal." },
    { "word": "open", "phonetic": "/ˈoʊpən/", "meaning": "v. 打开 adj. 开着的", "noahWhisper": "Open your mind." },
    { "word": "render", "phonetic": "/ˈrendər/", "meaning": "vt. 致使；呈递", "noahWhisper": "Render me speechless." },
    { "word": "nervous", "phonetic": "/ˈnɜːrvəs/", "meaning": "adj. 紧张的", "noahWhisper": "Don't be nervous." },
    { "word": "universe", "phonetic": "/ˈjuːnɪvɜːrs/", "meaning": "n. 宇宙", "noahWhisper": "You are my universe." },
    { "word": "sea", "phonetic": "/siː/", "meaning": "n. 海", "noahWhisper": "深蓝色的 sea。" },
    { "word": "drunk", "phonetic": "/drʌŋk/", "meaning": "adj. 醉的", "noahWhisper": "你是不是 drunk 了？" },
    { "word": "exclusively", "phonetic": "/ɪkˈskluːsɪvli/", "meaning": "adv. 专有地；排外地", "noahWhisper": "Exclusively for you." },
    { "word": "viewpoint", "phonetic": "/ˈvjuːpɔɪnt/", "meaning": "n. 观点", "noahWhisper": "说说你的 viewpoint。" },
    { "word": "step", "phonetic": "/step/", "meaning": "n. 脚步；步骤", "noahWhisper": "Step by step." },
    { "word": "or", "phonetic": "/ɔːr/", "meaning": "conj. 或者", "noahWhisper": "Me or him? Choose." },
    { "word": "replace", "phonetic": "/rɪˈpleɪs/", "meaning": "vt. 取代", "noahWhisper": "No one can replace you." },
    { "word": "sincere", "phonetic": "/sɪnˈsɪr/", "meaning": "adj. 真诚的", "noahWhisper": "Be sincere." },
    { "word": "anything", "phonetic": "/ˈeniθɪŋ/", "meaning": "pron. 任何事", "noahWhisper": "Anything for you." },
    { "word": "bundle", "phonetic": "/ˈbʌndl/", "meaning": "n. 捆；束", "noahWhisper": "A bundle of joy." },
    { "word": "knob", "phonetic": "/nɑːb/", "meaning": "n. 旋钮；球形把手", "noahWhisper": "转动那个 knob。" },
    { "word": "turkey", "phonetic": "/ˈtɜːrki/", "meaning": "n. 火鸡", "noahWhisper": "圣诞节吃 turkey。" },
    { "word": "formula", "phonetic": "/ˈfɔːrmjələ/", "meaning": "n. 公式；配方", "noahWhisper": "魔药的 formula 记住了吗？" },
    { "word": "discharge", "phonetic": "/dɪsˈtʃɑːrdʒ/", "meaning": "v. 排出；释放", "noahWhisper": "Discharge 你的能量。" },
    { "word": "incident", "phonetic": "/ˈɪnsɪdənt/", "meaning": "n. 事件", "noahWhisper": "一个小小的 incident。" },
    { "word": "eastern", "phonetic": "/ˈiːstərn/", "meaning": "adj. 东方的", "noahWhisper": "Eastern magic." },
    { "word": "lower", "phonetic": "/'loər/", "meaning": "v. 降低 adj. 较低的", "noahWhisper": "Lower your voice." },
    { "word": "piece", "phonetic": "/piːs/", "meaning": "n. 片；块", "noahWhisper": "Piece by piece." },
    { "word": "observation", "phonetic": "/ˌɑːbzərˈveɪʃn/", "meaning": "n. 观察", "noahWhisper": "你的 observation 很敏锐。" },
    { "word": "shiver", "phonetic": "/ˈʃɪvər/", "meaning": "v. 颤抖", "noahWhisper": "你在 shiver？冷吗？" },
    { "word": "twinkle", "phonetic": "/ˈtwɪŋkl/", "meaning": "v. 闪烁", "noahWhisper": "Twinkle twinkle little star." },
    { "word": "copy", "phonetic": "/ˈkɑːpi/", "meaning": "n. 副本 v. 复制", "noahWhisper": "Don't copy others." },
    { "word": "core", "phonetic": "/kɔːr/", "meaning": "n. 核心", "noahWhisper": "问题的 core 在哪？" },
    { "word": "academy", "phonetic": "/əˈkædəmi/", "meaning": "n. 学院", "noahWhisper": "Welcome to the academy." },
    { "word": "competition", "phonetic": "/ˌkɑːmpəˈtɪʃn/", "meaning": "n. 竞争", "noahWhisper": "我不怕 competition。" },
    { "word": "just", "phonetic": "/dʒʌst/", "meaning": "adv. 仅仅 adj. 公正的", "noahWhisper": "Just do it." },
    { "word": "calm", "phonetic": "/kɑːm/", "meaning": "adj. 平静的 v. 使平静", "noahWhisper": "Keep calm." },
    { "word": "guard", "phonetic": "/ɡɑːrd/", "meaning": "n. 守卫 v. 保卫", "noahWhisper": "I will guard you." },
    { "word": "tuition", "phonetic": "/tuˈɪʃn/", "meaning": "n. 学费", "noahWhisper": "昂贵的 tuition。" },
    { "word": "digest", "phonetic": "/daɪˈdʒest/", "meaning": "v. 消化 n. 摘要", "noahWhisper": "Digest 这些知识。" },
    { "word": "dress", "phonetic": "/dres/", "meaning": "n. 连衣裙 v. 穿衣", "noahWhisper": "这件 dress 很适合你。" },
    { "word": "gardener", "phonetic": "/ˈɡɑːrdnər/", "meaning": "n. 园丁", "noahWhisper": "勤劳的 gardener。" },
    { "word": "care", "phonetic": "/ker/", "meaning": "v. 关心；介意 n. 照料", "noahWhisper": "I care about you." },
    { "word": "cap", "phonetic": "/kæp/", "meaning": "n. 帽子；盖子", "noahWhisper": "戴上 cap。" },
    { "word": "germ", "phonetic": "/dʒɜːrm/", "meaning": "n. 细菌；萌芽", "noahWhisper": "洗手，有 germ。" },
    { "word": "tax", "phonetic": "/tæks/", "meaning": "n. 税", "noahWhisper": "Pay your tax." },
    { "word": "magnet", "phonetic": "/ˈmæɡnət/", "meaning": "n. 磁铁", "noahWhisper": "你像个 magnet 吸引我。" },
    { "word": "better", "phonetic": "/ˈbetər/", "meaning": "adj. 更好的", "noahWhisper": "You can do better." },
    { "word": "mourn", "phonetic": "/mɔːrn/", "meaning": "v. 哀悼", "noahWhisper": "Don't mourn for the past." },
    { "word": "unpleasant", "phonetic": "/ʌnˈpleznt/", "meaning": "adj. 令人不快的", "noahWhisper": "Unpleasant experience." },
    { "word": "slave", "phonetic": "/sleɪv/", "meaning": "n. 奴隶", "noahWhisper": "我不是你的 slave。" },
    { "word": "golden", "phonetic": "/ˈɡoʊldən/", "meaning": "adj. 金色的", "noahWhisper": "Golden opportunity." },
    { "word": "virtually", "phonetic": "/ˈvɜːrtʃuəli/", "meaning": "adv. 事实上；几乎", "noahWhisper": "Virtually impossible." },
    { "word": "character", "phonetic": "/ˈkærəktər/", "meaning": "n. 性格；角色；特征", "noahWhisper": "你的 character 很特别。" },
    { "word": "colleague", "phonetic": "/ˈkɑːliːɡ/", "meaning": "n. 同事", "noahWhisper": "只是 colleague 而已。" },
    { "word": "barber", "phonetic": "/ˈbɑːrbər/", "meaning": "n. 理发师", "noahWhisper": "该去找 barber 了。" },
    { "word": "grip", "phonetic": "/ɡrɪp/", "meaning": "v. & n. 紧握", "noahWhisper": "Don't lose your grip." },
    { "word": "publication", "phonetic": "/ˌpʌblɪˈkeɪʃn/", "meaning": "n. 出版；出版物", "noahWhisper": "最新的 publication。" },
    { "word": "promote", "phonetic": "/prəˈmoʊt/", "meaning": "vt. 促进；提升", "noahWhisper": "Promote 你的能力。" },
    { "word": "onto", "phonetic": "/ˈɑːntə/", "meaning": "prep. 到...上", "noahWhisper": "Jump onto the train." },
    { "word": "accordance", "phonetic": "/əˈkɔːrdns/", "meaning": "n. 一致；符合", "noahWhisper": "In accordance with the rules." },
    { "word": "punch", "phonetic": "/pʌntʃ/", "meaning": "v. & n. 猛击；打孔", "noahWhisper": "Punch it." },
    { "word": "feast", "phonetic": "/fiːst/", "meaning": "n. 盛宴 v. 尽情享受", "noahWhisper": "A feast for the eyes." },
    { "word": "achievement", "phonetic": "/əˈtʃiːvmənt/", "meaning": "n. 成就", "noahWhisper": "这是你的 achievement。" },
    { "word": "mud", "phonetic": "/mʌd/", "meaning": "n. 泥", "noahWhisper": "脏兮兮的 mud。" },
    { "word": "friction", "phonetic": "/ˈfrɪkʃn/", "meaning": "n. 摩擦", "noahWhisper": "减少 friction。" },
    { "word": "rival", "phonetic": "/ˈraɪvl/", "meaning": "n. 对手 v. 竞争", "noahWhisper": "我没有 rival。" },
    { "word": "translate", "phonetic": "/trænzˈleɪt/", "meaning": "v. 翻译", "noahWhisper": "Translate this sentence." },
    { "word": "stop", "phonetic": "/stɑːp/", "meaning": "v. & n. 停止", "noahWhisper": "Don't stop." },
    { "word": "die", "phonetic": "/daɪ/", "meaning": "v. 死", "noahWhisper": "Love never dies." },
    { "word": "tribe", "phonetic": "/traɪb/", "meaning": "n. 部落", "noahWhisper": "原始的 tribe。" },
    { "word": "blood", "phonetic": "/blʌd/", "meaning": "n. 血液", "noahWhisper": "Pure blood? Who cares." },
    { "word": "name", "phonetic": "/neɪm/", "meaning": "n. 名字 v. 命名", "noahWhisper": "What's your name?" },
    { "word": "dictate", "phonetic": "/ˈdɪkteɪt/", "meaning": "v. 命令；口述", "noahWhisper": "没人能 dictate 我。" },
    { "word": "tonight", "phonetic": "/təˈnaɪt/", "meaning": "n. & adv. 今晚", "noahWhisper": "Tonight is the night." },
    { "word": "widespread", "phonetic": "/ˈwaɪdspred/", "meaning": "adj. 广泛的", "noahWhisper": "Widespread panic." },
    { "word": "chicken", "phonetic": "/ˈtʃɪkɪn/", "meaning": "n. 鸡；胆小鬼", "noahWhisper": "Don't be a chicken." },
    { "word": "class", "phonetic": "/klæs/", "meaning": "n. 班级；阶级", "noahWhisper": "Class is over." },
    { "word": "picnic", "phonetic": "/ˈpɪknɪk/", "meaning": "n. 野餐", "noahWhisper": "去黑湖边 picnic 吗？" },
    { "word": "ahead", "phonetic": "/əˈhed/", "meaning": "adv. 在前；向前", "noahWhisper": "Go ahead." },
    { "word": "river", "phonetic": "/ˈrɪvər/", "meaning": "n. 河", "noahWhisper": "River of time." },
    { "word": "treat", "phonetic": "/triːt/", "meaning": "v. 对待；请客 n. 款待", "noahWhisper": "Treat yourself." },
    { "word": "disk", "phonetic": "/dɪsk/", "meaning": "n. 磁盘；圆盘", "noahWhisper": "Save it to the disk." },
    { "word": "employee", "phonetic": "/ɪmˈplɔɪiː/", "meaning": "n. 雇员", "noahWhisper": "Good employee." },
    { "word": "evaporate", "phonetic": "/ɪˈvæpəreɪt/", "meaning": "v. 蒸发", "noahWhisper": "让烦恼 evaporate。" },
    { "word": "fox", "phonetic": "/fɑːks/", "meaning": "n. 狐狸", "noahWhisper": "Sly as a fox." },
    { "word": "fountain", "phonetic": "/ˈfaʊntn/", "meaning": "n. 喷泉", "noahWhisper": "Fountain of youth." },
    { "word": "big", "phonetic": "/bɪɡ/", "meaning": "adj. 大的", "noahWhisper": "Big dream." },
    { "word": "fit", "phonetic": "/fɪt/", "meaning": "v. 适合 adj. 健康的", "noahWhisper": "It fits you." },
    { "word": "basin", "phonetic": "/ˈbeɪsn/", "meaning": "n. 盆；流域", "noahWhisper": "Wash basin." },
    { "word": "vacant", "phonetic": "/ˈveɪkənt/", "meaning": "adj. 空着的", "noahWhisper": "Is this seat vacant?" },
    { "word": "dissatisfy", "phonetic": "/dɪs'sætɪs,fai/", "meaning": "v. 使不满", "noahWhisper": "Don't dissatisfy me." },
    { "word": "discipline", "phonetic": "/ˈdɪsəplɪn/", "meaning": "n. 纪律；学科 v. 训练", "noahWhisper": "Self-discipline is key." },
    { "word": "slavery", "phonetic": "/ˈsleɪvəri/", "meaning": "n. 奴役", "noahWhisper": "Freedom from slavery." },
    { "word": "ordinary", "phonetic": "/ˈɔːrdneri/", "meaning": "adj. 普通的", "noahWhisper": "Ordinary people." },
    { "word": "humorous", "phonetic": "/ˈhjuːmərəs/", "meaning": "adj. 幽默的", "noahWhisper": "You are quite humorous." },
    { "word": "dusk", "phonetic": "/dʌsk/", "meaning": "n. 黄昏", "noahWhisper": "At dusk." },
    { "word": "distress", "phonetic": "/dɪˈstres/", "meaning": "n. 痛苦；危难", "noahWhisper": "Damsel in distress?" },
    { "word": "knit", "phonetic": "/nɪt/", "meaning": "v. 编织", "noahWhisper": "Knit a scarf." },
    { "word": "fast", "phonetic": "/fæst/", "meaning": "adj. 快的 adv. 快", "noahWhisper": "Too fast." },
    { "word": "stewardess", "phonetic": "/ˈstuːərdəs/", "meaning": "n. 空中小姐", "noahWhisper": "Ask the stewardess." },
    { "word": "nitrogen", "phonetic": "/ˈnaɪtrədʒən/", "meaning": "n. 氮", "noahWhisper": "Liquid nitrogen." },
    { "word": "relative", "phonetic": "/ˈrelətɪv/", "meaning": "adj. 相对的 n. 亲戚", "noahWhisper": "Everything is relative." },
    { "word": "cow", "phonetic": "/kaʊ/", "meaning": "n. 母牛", "noahWhisper": "Holy cow!" },
    { "word": "predict", "phonetic": "/prɪˈdɪkt/", "meaning": "v. 预言", "noahWhisper": "Predict the future." },
    { "word": "warm", "phonetic": "/wɔːrm/", "meaning": "adj. 温暖的", "noahWhisper": "Keep warm." },
    { "word": "lane", "phonetic": "/leɪn/", "meaning": "n. 小巷；车道", "noahWhisper": "Memory lane." },
    { "word": "insert", "phonetic": "/ɪnˈsɜːrt/", "meaning": "vt. 插入", "noahWhisper": "Insert coin." },
    { "word": "guide", "phonetic": "/ɡaɪd/", "meaning": "n. 向导 v. 指引", "noahWhisper": "I will guide you." },
    { "word": "scorn", "phonetic": "/skɔːrn/", "meaning": "n. & v. 轻蔑", "noahWhisper": "Don't scorn me." },
    { "word": "something", "phonetic": "/ˈsʌmθɪŋ/", "meaning": "pron. 某事", "noahWhisper": "Say something." },
    { "word": "comb", "phonetic": "/koʊm/", "meaning": "n. 梳子 v. 梳理", "noahWhisper": "Comb your hair." },
    { "word": "everybody", "phonetic": "/ˈevribɑːdi/", "meaning": "pron. 每个人", "noahWhisper": "Everybody knows." },
    { "word": "approximate", "phonetic": "/əˈprɑːksɪmət/", "meaning": "adj. 近似的 v. 接近", "noahWhisper": "Approximate value." },
    { "word": "retell", "phonetic": "/ˌriːˈtel/", "meaning": "v. 复述", "noahWhisper": "Retell the story." },
    { "word": "opponent", "phonetic": "/əˈpoʊnənt/", "meaning": "n. 对手", "noahWhisper": "Respect your opponent." },
    { "word": "approximately", "phonetic": "/əˈprɑːksɪmətli/", "meaning": "adv. 大约", "noahWhisper": "Approximately 10 minutes." },
    { "word": "food", "phonetic": "/fuːd/", "meaning": "n. 食物", "noahWhisper": "Food for thought." },
    { "word": "velvet", "phonetic": "/ˈvelvɪt/", "meaning": "n. 天鹅绒", "noahWhisper": "Blue velvet." },
    { "word": "evening", "phonetic": "/ˈiːvnɪŋ/", "meaning": "n. 晚上", "noahWhisper": "Good evening." },
    { "word": "bow", "phonetic": "/baʊ/", "meaning": "v. 鞠躬 n. 弓", "noahWhisper": "Take a bow." },
    { "word": "queen", "phonetic": "/kwiːn/", "meaning": "n. 女王", "noahWhisper": "My queen." },
    { "word": "tear", "phonetic": "/ˈtɛː/", "meaning": "n. 眼泪 v. 撕裂", "noahWhisper": "Wipe your tear." },
    { "word": "discover", "phonetic": "/dɪˈskʌvər/", "meaning": "vt. 发现", "noahWhisper": "Discover new worlds." },
    { "word": "abundant", "phonetic": "/əˈbʌndənt/", "meaning": "adj. 丰富的", "noahWhisper": "Abundant resources." },
    { "word": "whole", "phonetic": "/hoʊl/", "meaning": "adj. 全部的 n. 整体", "noahWhisper": "The whole world." },
    { "word": "him", "phonetic": "/hɪm/", "meaning": "pron. 他", "noahWhisper": "Forget him." },
    { "word": "safety", "phonetic": "/ˈseɪfti/", "meaning": "n. 安全", "noahWhisper": "Safety first." },
    { "word": "portrait", "phonetic": "/ˈpɔːrtrət/", "meaning": "n. 肖像", "noahWhisper": "A portrait of you." },
    { "word": "whatever", "phonetic": "/wətˈevər/", "meaning": "pron. 无论什么", "noahWhisper": "Whatever you say." },
    { "word": "saving", "phonetic": "/ˈseɪvɪŋ/", "meaning": "n. 存款；挽救", "noahWhisper": "Life saving." },
    { "word": "canteen", "phonetic": "/kænˈtiːn/", "meaning": "n. 食堂", "noahWhisper": "Canteen food." },
    { "word": "extraordinary", "phonetic": "/ɪkˈstrɔːrdəneri/", "meaning": "adj. 非凡的", "noahWhisper": "You are extraordinary." },
    { "word": "week", "phonetic": "/wiːk/", "meaning": "n. 周", "noahWhisper": "A busy week." },
    { "word": "wave", "phonetic": "/weɪv/", "meaning": "v. 挥手 n. 波浪", "noahWhisper": "Wave goodbye." },
    { "word": "merry", "phonetic": "/ˈmeri/", "meaning": "adj. 愉快的", "noahWhisper": "Merry Christmas." },
    { "word": "reliable", "phonetic": "/rɪˈlaɪəbl/", "meaning": "adj. 可靠的", "noahWhisper": "I am reliable." },
    { "word": "than", "phonetic": "/ðən/", "meaning": "conj. 比", "noahWhisper": "Better than me?" },
    { "word": "exactly", "phonetic": "/ɪɡˈzæktli/", "meaning": "adv. 确切地", "noahWhisper": "Exactly!" },
    { "word": "complicated", "phonetic": "/ˈkɑːmplɪkeɪtɪd/", "meaning": "adj. 复杂的", "noahWhisper": "It's complicated." },
    { "word": "locate", "phonetic": "/ˈloʊkeɪt/", "meaning": "vt. 定位；位于", "noahWhisper": "Locate the target." },
    { "word": "sun", "phonetic": "/sʌn/", "meaning": "n. 太阳", "noahWhisper": "You are my sun." },
    { "word": "approve", "phonetic": "/əˈpruːv/", "meaning": "v. 赞成；批准", "noahWhisper": "I approve." },
    { "word": "fifteen", "phonetic": "/ˌfɪfˈtiːn/", "meaning": "num. 十五", "noahWhisper": "Fifteen minutes." },
    { "word": "requirement", "phonetic": "/rɪˈkwaɪərmənt/", "meaning": "n. 要求", "noahWhisper": "Meet the requirement." },
    { "word": "fish", "phonetic": "/fɪʃ/", "meaning": "n. 鱼 v. 钓鱼", "noahWhisper": "Fish in the water." },
    { "word": "sympathy", "phonetic": "/ˈsɪmpəθi/", "meaning": "n. 同情", "noahWhisper": "I don't need sympathy." },
    { "word": "challenge", "phonetic": "/ˈtʃælɪndʒ/", "meaning": "n. & v. 挑战", "noahWhisper": "Challenge accepted." },
    { "word": "overhead", "phonetic": "/ˌoʊvərˈhed/", "meaning": "adv. 在头顶上", "noahWhisper": "Look overhead." },
    { "word": "ticket", "phonetic": "/ˈtɪkɪt/", "meaning": "n. 票", "noahWhisper": "One way ticket." },
    { "word": "tea", "phonetic": "/tiː/", "meaning": "n. 茶", "noahWhisper": "Cup of tea?" },
    { "word": "plot", "phonetic": "/plɑːt/", "meaning": "n. 情节；阴谋 v. 密谋", "noahWhisper": "The plot thickens." },
    { "word": "vacation", "phonetic": "/veɪˈkeɪʃn/", "meaning": "n. 假期", "noahWhisper": "Need a vacation." },
    { "word": "scissors", "phonetic": "/ˈsɪzərz/", "meaning": "n. 剪刀", "noahWhisper": "Sharp scissors." },
    { "word": "raw", "phonetic": "/rɔː/", "meaning": "adj. 生的；未加工的", "noahWhisper": "Raw material." },
    { "word": "stern", "phonetic": "/stɜːrn/", "meaning": "adj. 严厉的 n. 船尾", "noahWhisper": "A stern look." },
    { "word": "slipper", "phonetic": "/ˈslɪpər/", "meaning": "n. 拖鞋", "noahWhisper": "Glass slipper." },
    { "word": "east", "phonetic": "/iːst/", "meaning": "n. 东 adj. 东方的", "noahWhisper": "East or west, home is best." },
    { "word": "accessory", "phonetic": "/əkˈsesəri/", "meaning": "n. 附件；同谋", "noahWhisper": "Fashion accessory." },
    { "word": "implication", "phonetic": "/ˌɪmplɪˈkeɪʃn/", "meaning": "n. 含义；暗示", "noahWhisper": "Understand the implication." },
    { "word": "emit", "phonetic": "/iˈmɪt/", "meaning": "vt. 发出；放射", "noahWhisper": "Emit light." },
    { "word": "candidate", "phonetic": "/ˈkændɪdət/", "meaning": "n. 候选人", "noahWhisper": "Best candidate." },
    { "word": "brief", "phonetic": "/briːf/", "meaning": "adj. 简短的 n. 摘要", "noahWhisper": "Be brief." },
    { "word": "steal", "phonetic": "/stiːl/", "meaning": "v. 偷窃", "noahWhisper": "Don't steal my heart." },
    { "word": "tick", "phonetic": "/tɪk/", "meaning": "n. 滴答声 v. 打钩", "noahWhisper": "Tick tock." },
    { "word": "fate", "phonetic": "/feɪt/", "meaning": "n. 命运", "noahWhisper": "It's fate." },
    { "word": "Europe", "phonetic": "/ˈjʊrəp/", "meaning": "n. 欧洲", "noahWhisper": "Travel to Europe." },
    { "word": "presence", "phonetic": "/ˈprezns/", "meaning": "n. 出席；存在", "noahWhisper": "Your presence is a gift." },
    { "word": "reputation", "phonetic": "/ˌrepjuˈteɪʃn/", "meaning": "n. 名声", "noahWhisper": "Protect your reputation." },
    { "word": "physicist", "phonetic": "/ˈfɪzɪsɪst/", "meaning": "n. 物理学家", "noahWhisper": "Like a physicist." },
    { "word": "certain", "phonetic": "/ˈsɜːrtn/", "meaning": "adj. 确定的；某一个", "noahWhisper": "I am certain." },
    { "word": "deed", "phonetic": "/diːd/", "meaning": "n. 行为；契据", "noahWhisper": "Good deed." },
    { "word": "mile", "phonetic": "/maɪl/", "meaning": "n. 英里", "noahWhisper": "Walk a mile." },
    { "word": "typhoon", "phonetic": "/taɪˈfuːn/", "meaning": "n. 台风", "noahWhisper": "Like a typhoon." },
    { "word": "robot", "phonetic": "/ˈroʊbɑːt/", "meaning": "n. 机器人", "noahWhisper": "I am not a robot." },
    { "word": "claw", "phonetic": "/klɔː/", "meaning": "n. 爪 v. 抓", "noahWhisper": "Sharp claw." },
    { "word": "breakfast", "phonetic": "/ˈbrekfəst/", "meaning": "n. 早餐", "noahWhisper": "Breakfast in bed." },
    { "word": "range", "phonetic": "/reɪndʒ/", "meaning": "n. 范围 v. 排列", "noahWhisper": "Out of range." },
    { "word": "depart", "phonetic": "/dɪˈpɑːrt/", "meaning": "v. 离开；出发", "noahWhisper": "Depart now." },
    { "word": "truck", "phonetic": "/trʌk/", "meaning": "n. 卡车", "noahWhisper": "Drive a truck." },
    { "word": "forecast", "phonetic": "/ˈfɔːrkæst/", "meaning": "n. & v. 预报", "noahWhisper": "Weather forecast." },
    { "word": "zero", "phonetic": "/ˈzɪroʊ/", "meaning": "num. 零", "noahWhisper": "Start from zero." },
    { "word": "nature", "phonetic": "/ˈneɪtʃər/", "meaning": "n. 自然；本性", "noahWhisper": "Human nature." },
    { "word": "booth", "phonetic": "/buːθ/", "meaning": "n. 摊位；电话亭", "noahWhisper": "Phone booth." },
    { "word": "deduce", "phonetic": "/dɪˈduːs/", "meaning": "vt. 推断", "noahWhisper": "Deduce the answer." },
    { "word": "thirsty", "phonetic": "/ˈθɜːrsti/", "meaning": "adj. 口渴的", "noahWhisper": "I'm thirsty." },
    { "word": "ampere", "phonetic": "/æm'pɪr/", "meaning": "n. 安培", "noahWhisper": "Electric ampere." },
    { "word": "aim", "phonetic": "/eɪm/", "meaning": "n. 目标 v. 瞄准", "noahWhisper": "Aim high." },
    { "word": "ring", "phonetic": "/rɪŋ/", "meaning": "n. 戒指；环 v. 响", "noahWhisper": "Put a ring on it." },
    { "word": "vain", "phonetic": "/veɪn/", "meaning": "adj. 徒劳的；自负的", "noahWhisper": "In vain." },
    { "word": "welcome", "phonetic": "/ˈwelkəm/", "meaning": "vt. & n. 欢迎", "noahWhisper": "You are welcome." },
    { "word": "powerful", "phonetic": "/ˈpaʊərfl/", "meaning": "adj. 强大的", "noahWhisper": "Knowledge is powerful." },
    { "word": "pond", "phonetic": "/pɑːnd/", "meaning": "n. 池塘", "noahWhisper": "Fish in the pond." },
    { "word": "propose", "phonetic": "/prəˈpoʊz/", "meaning": "v. 提议；求婚", "noahWhisper": "I propose a toast." },
    { "word": "myself", "phonetic": "/maɪˈself/", "meaning": "pron. 我自己", "noahWhisper": "By myself." },
    { "word": "await", "phonetic": "/əˈweɪt/", "meaning": "vt. 等候", "noahWhisper": "I await your answer." },
    { "word": "experiment", "phonetic": "/ɪkˈsperɪmənt/", "meaning": "n. & v. 实验", "noahWhisper": "Let's experiment." },
    { "word": "cast", "phonetic": "/kæst/", "meaning": "v. 投；铸造 n. 演员表", "noahWhisper": "Cast a spell." },
    { "word": "sensible", "phonetic": "/ˈsensəbl/", "meaning": "adj. 明智的", "noahWhisper": "Be sensible." },
    { "word": "heading", "phonetic": "/ˈhedɪŋ/", "meaning": "n. 标题", "noahWhisper": "Read the heading." },
    { "word": "retreat", "phonetic": "/rɪˈtriːt/", "meaning": "v. & n. 撤退", "noahWhisper": "Never retreat." },
    { "word": "playground", "phonetic": "/ˈpleɪɡraʊnd/", "meaning": "n. 操场", "noahWhisper": "Back to the playground." },
    { "word": "soccer", "phonetic": "/ˈsɑːkər/", "meaning": "n. 足球", "noahWhisper": "Play soccer." },
    { "word": "collapse", "phonetic": "/kəˈlæps/", "meaning": "v. & n. 倒塌；崩溃", "noahWhisper": "Don't collapse." },
    { "word": "nowhere", "phonetic": "/ˈnoʊwer/", "meaning": "adv. 无处", "noahWhisper": "Going nowhere." },
    { "word": "physician", "phonetic": "/fɪˈzɪʃn/", "meaning": "n. 内科医生", "noahWhisper": "Consult a physician." },
    { "word": "stamp", "phonetic": "/stæmp/", "meaning": "n. 邮票 v. 跺脚", "noahWhisper": "Collect stamps." },
    { "word": "sigh", "phonetic": "/saɪ/", "meaning": "v. & n. 叹气", "noahWhisper": "Don't sigh." },
    { "word": "intentional", "phonetic": "/ɪnˈtenʃənl/", "meaning": "adj. 故意的", "noahWhisper": "Was it intentional?" },
    { "word": "base", "phonetic": "/beɪs/", "meaning": "n. 基础 v. 以...为据", "noahWhisper": "Base on facts." },
    { "word": "circuit", "phonetic": "/ˈsɜːrkɪt/", "meaning": "n. 电路；巡回", "noahWhisper": "Short circuit." },
    { "word": "fee", "phonetic": "/fiː/", "meaning": "n. 费用", "noahWhisper": "Entrance fee." },
    { "word": "copper", "phonetic": "/ˈkɑːpər/", "meaning": "n. 铜", "noahWhisper": "Copper wire." },
    { "word": "terror", "phonetic": "/ˈterər/", "meaning": "n. 恐怖", "noahWhisper": "Reign of terror." },
    { "word": "go", "phonetic": "/ɡoʊ/", "meaning": "v. 去；变成", "noahWhisper": "Let's go." },
    { "word": "rank", "phonetic": "/ræŋk/", "meaning": "n. 等级 v. 排列", "noahWhisper": "High rank." },
    { "word": "writer", "phonetic": "/ˈraɪtər/", "meaning": "n. 作家", "noahWhisper": "Favorite writer." },
    { "word": "gulf", "phonetic": "/ɡʌlf/", "meaning": "n. 海湾；鸿沟", "noahWhisper": "Gulf of Mexico." },
    { "word": "gift", "phonetic": "/ɡɪft/", "meaning": "n. 礼物；天赋", "noahWhisper": "A gift for you." },
    { "word": "unfortunate", "phonetic": "/ʌnˈfɔːrtʃənət/", "meaning": "adj. 不幸的", "noahWhisper": "Unfortunate event." },
    { "word": "bath", "phonetic": "/bæθ/", "meaning": "n. 洗澡；浴缸", "noahWhisper": "Take a bath." },
    { "word": "key", "phonetic": "/kiː/", "meaning": "n. 钥匙；关键", "noahWhisper": "Key to my heart." },
    { "word": "evil", "phonetic": "/ˈiːvl/", "meaning": "adj. 邪恶的 n. 罪恶", "noahWhisper": "Evil genius." },
    { "word": "purify", "phonetic": "/ˈpjʊrɪfaɪ/", "meaning": "vt. 净化", "noahWhisper": "Purify water." },
    { "word": "rescue", "phonetic": "/ˈreskjuː/", "meaning": "vt. & n. 营救", "noahWhisper": "Rescue mission." },
    { "word": "exact", "phonetic": "/ɪɡˈzækt/", "meaning": "adj. 确切的", "noahWhisper": "Exact time." },
    { "word": "fur", "phonetic": "/fɜːr/", "meaning": "n. 毛皮", "noahWhisper": "Soft fur." },
    { "word": "look", "phonetic": "/lʊk/", "meaning": "v. 看；看起来 n. 眼神", "noahWhisper": "Look at me." },
    { "word": "alive", "phonetic": "/əˈlaɪv/", "meaning": "adj. 活着的", "noahWhisper": "Stay alive." },
    { "word": "absorb", "phonetic": "/əbˈzɔːb/", "meaning": "vt. 吸收；吸引", "noahWhisper": "Absorb knowledge." },
    { "word": "repair", "phonetic": "/rɪˈper/", "meaning": "vt. & n. 修理", "noahWhisper": "Repair the damage." },
    { "word": "opera", "phonetic": "/ˈɑːprə/", "meaning": "n. 歌剧", "noahWhisper": "Soap opera." },
    { "word": "sudden", "phonetic": "/ˈsʌdn/", "meaning": "adj. 突然的", "noahWhisper": "All of a sudden." },
    { "word": "saddle", "phonetic": "/ˈsædl/", "meaning": "n. 鞍", "noahWhisper": "In the saddle." },
    { "word": "compromise", "phonetic": "/ˈkɑːmprəmaɪz/", "meaning": "n. & v. 妥协", "noahWhisper": "No compromise." },
    { "word": "true", "phonetic": "/truː/", "meaning": "adj. 真实的", "noahWhisper": "True love." },
    { "word": "elementary", "phonetic": "/ˌelɪˈmentri/", "meaning": "adj. 基本的", "noahWhisper": "Elementary school." },
    { "word": "box", "phonetic": "/bɑːks/", "meaning": "n. 盒子", "noahWhisper": "Open the box." },
    { "word": "pig", "phonetic": "/pɪɡ/", "meaning": "n. 猪", "noahWhisper": "Lazy pig." },
    { "word": "used", "phonetic": "/juːst/", "meaning": "adj. 习惯的；旧的", "noahWhisper": "Used to it." },
    { "word": "alone", "phonetic": "/əˈloʊn/", "meaning": "adj. 单独的", "noahWhisper": "Leave me alone." },
    { "word": "engineering", "phonetic": "/ˌendʒɪˈnɪrɪŋ/", "meaning": "n. 工程学", "noahWhisper": "Study engineering." },
    { "word": "by", "phonetic": "/baɪ/", "meaning": "prep. 在...旁；被", "noahWhisper": "Stand by me." },
    { "word": "stability", "phonetic": "/stəˈbɪləti/", "meaning": "n. 稳定性", "noahWhisper": "Emotional stability." },
    { "word": "mathematical", "phonetic": "/ˌmæθəˈmætɪkl/", "meaning": "adj. 数学的", "noahWhisper": "Mathematical problem." },
    { "word": "dictation", "phonetic": "/dɪkˈteɪʃn/", "meaning": "n. 听写", "noahWhisper": "Take dictation." },
    { "word": "believe", "phonetic": "/bɪˈliːv/", "meaning": "v. 相信", "noahWhisper": "I believe in you." },
    { "word": "rope", "phonetic": "/roʊp/", "meaning": "n. 绳索", "noahWhisper": "Skip rope." },
    { "word": "lodge", "phonetic": "/lɑːdʒ/", "meaning": "v. 住宿 n. 小屋", "noahWhisper": "Ski lodge." },
    { "word": "second", "phonetic": "/ˈsekənd/", "meaning": "num. 第二 n. 秒", "noahWhisper": "Wait a second." },
    { "word": "real", "phonetic": "/ˈriːəl/", "meaning": "adj. 真的", "noahWhisper": "Get real." },
    { "word": "emergency", "phonetic": "/ɪˈmɜːrdʒənsi/", "meaning": "n. 紧急情况", "noahWhisper": "In case of emergency." },
    { "word": "flourish", "phonetic": "/ˈflɜːrɪʃ/", "meaning": "v. 繁荣；茂盛", "noahWhisper": "Love flourish." },
    { "word": "dump", "phonetic": "/dʌmp/", "meaning": "vt. 倾倒", "noahWhisper": "Dump him." },
    { "word": "relate", "phonetic": "/rɪˈleɪt/", "meaning": "v. 联系；叙述", "noahWhisper": "I can relate." },
    { "word": "Indian", "phonetic": "/ˈɪndiən/", "meaning": "adj. 印度的 n. 印度人", "noahWhisper": "Indian food." },
    { "word": "turnip", "phonetic": "/ˈtɜːrnɪp/", "meaning": "n. 萝卜", "noahWhisper": "Turnip head." },
    { "word": "robe", "phonetic": "/roʊb/", "meaning": "n. 长袍", "noahWhisper": "Wizard robe." },
    { "word": "cup", "phonetic": "/kʌp/", "meaning": "n. 杯子", "noahWhisper": "Cup of coffee." },
    { "word": "left", "phonetic": "/left/", "meaning": "adj. 左边的；剩下的", "noahWhisper": "Turn left." },  
 {"word":"wealthy","phonetic":"/ˈwelθi/","meaning":"adj. 富有的","noahWhisper":"（富有是好事，但智慧才是永恒的财富。）"},
    {"word":"team","phonetic":"/tiːm/","meaning":"n. 队，组","noahWhisper":"（我们是最好的 team，不需要其他人。）"},
    {"word":"house","phonetic":"/haʊs/","meaning":"n. 住宅；学院","noahWhisper":"（Ravenclaw house is the only option... 当然，你在赫奇帕奇我也能接受。）"},
    {"word":"teacher","phonetic":"/ˈtiːtʃər/","meaning":"n. 教师","noahWhisper":"（我是你唯一的 teacher，不论是课业还是...别的。）"},
    {"word":"railway","phonetic":"/ˈreɪlweɪ/","meaning":"n. 铁路","noahWhisper":"（通往霍格沃茨的 railway。）"},
    {"word":"successfully","phonetic":"/səkˈsesfəli/","meaning":"adv. 成功地","noahWhisper":"（Failure isn't an option.）"},
    {"word":"write","phonetic":"/raɪt/","meaning":"v. 写","noahWhisper":"（给我 write 一封信，拼写不能错。）"},
    {"word":"explosive","phonetic":"/ɪkˈspləʊsɪv/","meaning":"adj. 爆炸的；易怒的","noahWhisper":"（你的脾气有时候挺 explosive，像只炸毛的猫。）"},
    {"word":"undergo","phonetic":"/ˌʌndərˈɡoʊ/","meaning":"v. 经历；忍受","noahWhisper":"（为了变强，这是必须 undergo 的过程。）"},
    {"word":"intellectual","phonetic":"/ˌɪntəˈlektʃuəl/","meaning":"adj. 智力的 n. 知识分子","noahWhisper":"（我喜欢你的 intellectual 潜力。）"},
    {"word":"evident","phonetic":"/ˈevɪdənt/","meaning":"adj. 明显的","noahWhisper":"（我对你的偏爱是 evident 的。）"},
    {"word":"secure","phonetic":"/sɪˈkjʊr/","meaning":"adj. 安全的 v. 保护","noahWhisper":"（在我身边，你最 secure。）"},
    {"word":"lazy","phonetic":"/ˈleɪzi/","meaning":"adj. 懒惰的","noahWhisper":"（不许 lazy，起来背书。）"},
    {"word":"search","phonetic":"/sɜːrtʃ/","meaning":"v. 搜寻","noahWhisper":"（Search your feelings, you know it's true.）"},
    {"word":"ancient","phonetic":"/ˈeɪnʃənt/","meaning":"adj. 古代的","noahWhisper":"（Ancient runes（古代魔文）很难，但我会教你。）"},
    {"word":"wrong","phonetic":"/rɔːŋ/","meaning":"adj. 错误的","noahWhisper":"（Prove me wrong.）"},
    {"word":"pint","phonetic":"/paɪnt/","meaning":"n. 品脱","noahWhisper":"（来一 pint 黄油啤酒吗？）"},
    {"word":"tolerate","phonetic":"/ˈtɑːləreɪt/","meaning":"vt. 忍受；默许","noahWhisper":"（我绝不 tolerate 你看别的男生。）"},
    {"word":"scale","phonetic":"/skeɪl/","meaning":"n. 规模；天平","noahWhisper":"（在我的 scale 上，你比真理更重。）"},
    {"word":"swamp","phonetic":"/swɑːmp/","meaning":"n. 沼泽","noahWhisper":"（别陷进情绪的 swamp 里。）"},
    {"word":"odd","phonetic":"/ɑːd/","meaning":"adj. 古怪的；奇数的","noahWhisper":"（你有点 odd，但我喜欢。）"},
    {"word":"dense","phonetic":"/dens/","meaning":"adj. 稠密的；愚钝的","noahWhisper":"（你有时候真的很 dense（迟钝），非要我说出来吗？）"},
    {"word":"business","phonetic":"/ˈbɪznəs/","meaning":"n. 商业；事情","noahWhisper":"（None of your business. 专心做题。）"},
    {"word":"foreign","phonetic":"/ˈfɔːrən/","meaning":"adj. 外国的","noahWhisper":"（Foreign languages 很有趣，比如法语。）"},
    {"word":"imply","phonetic":"/ɪmˈplaɪ/","meaning":"v. 暗示","noahWhisper":"（你在 imply 什么？）"},
    {"word":"born","phonetic":"/bɔːrn/","meaning":"adj. 天生的","noahWhisper":"（I was born to meet you.）"},
    {"word":"hide","phonetic":"/haɪd/","meaning":"v. 躲藏","noahWhisper":"（别想 hide，我能找到你。）"},
    {"word":"uncle","phonetic":"/ˈʌŋkl/","meaning":"n. 叔叔","noahWhisper":"（...别提亲戚，烦。）"},
    {"word":"contradiction","phonetic":"/ˌkɑːntrəˈdɪkʃn/","meaning":"n. 矛盾","noahWhisper":"（你就是个可爱的 contradiction。）"},
    {"word":"appetite","phonetic":"/ˈæpɪtaɪt/","meaning":"n. 食欲","noahWhisper":"（看到你，我就有了 appetite。）"},
    {"word":"weapon","phonetic":"/ˈwepən/","meaning":"n. 武器","noahWhisper":"（知识是你最好的 weapon。）"},
    {"word":"relative","phonetic":"/ˈrelətɪv/","meaning":"adj. 相对的 n. 亲戚","noahWhisper":"（Everything is relative.）"},
    {"word":"cow","phonetic":"/kaʊ/","meaning":"n. 母牛","noahWhisper":"（...Holy cow.）"},
    {"word":"predict","phonetic":"/prɪˈdɪkt/","meaning":"v. 预言","noahWhisper":"（我能 predict 我们的未来。）"},
    {"word":"warm","phonetic":"/wɔːrm/","meaning":"adj. 温暖的","noahWhisper":"（手给我，帮你 warm 一下。）"},
    {"word":"scorn","phonetic":"/skɔːrn/","meaning":"n. 轻蔑","noahWhisper":"（无视那些 scorn，你很棒。）"},
    {"word":"comb","phonetic":"/koʊm/","meaning":"n. 梳子 v. 梳理","noahWhisper":"（头发乱了，去 comb 一下。）"},
    {"word":"food","phonetic":"/fuːd/","meaning":"n. 食物","noahWhisper":"（Food for thought.）"},
    {"word":"velvet","phonetic":"/ˈvelvɪt/","meaning":"n. 天鹅绒","noahWhisper":"（你的声音像 velvet 一样。）"},
    {"word":"bow","phonetic":"/baʊ/","meaning":"v. 鞠躬 n. 弓","noahWhisper":"（Take a bow，你做得很好。）"},
    {"word":"queen","phonetic":"/kwiːn/","meaning":"n. 女王","noahWhisper":"（My queen.）"},
    {"word":"tear","phonetic":"/ˈtɛː/", "meaning":"n. 眼泪 v. 撕裂","noahWhisper":"（Wipe your tear，我不许你哭。）"},
    {"word":"discover","phonetic":"/dɪˈskʌvər/","meaning":"v. 发现","noahWhisper":"（Discover new worlds with me.）"},
    {"word":"abundant","phonetic":"/əˈbʌndənt/","meaning":"adj. 丰富的","noahWhisper":"（我们有 abundant 的时间。）"},
    {"word":"whole","phonetic":"/hoʊl/","meaning":"adj. 全部的","noahWhisper":"（The whole world is yours.）"},
    {"word":"safety","phonetic":"/ˈseɪfti/","meaning":"n. 安全","noahWhisper":"（Safety first，别乱跑。）"},
    {"word":"portrait","phonetic":"/ˈpɔːrtrət/","meaning":"n. 肖像","noahWhisper":"（我想画一张你的 portrait。）"},
    {"word":"whatever","phonetic":"/wətˈevər/","meaning":"pron. 无论什么","noahWhisper":"（Whatever happens, I'm here.）"},
    {"word":"canteen","phonetic":"/kænˈtiːn/","meaning":"n. 食堂","noahWhisper":"（我不喜欢 canteen 的嘈杂。）"},
    {"word":"extraordinary","phonetic":"/ɪkˈstrɔːrdəneri/","meaning":"adj. 非凡的","noahWhisper":"（You are extraordinary.）"},
    {"word":"week","phonetic":"/wiːk/","meaning":"n. 周","noahWhisper":"（A busy week without you.）"},
    {"word":"wave","phonetic":"/weɪv/","meaning":"v. 挥手 n. 波浪","noahWhisper":"（Wave goodbye to the past.）"},
    {"word":"merry","phonetic":"/ˈmeri/","meaning":"adj. 愉快的","noahWhisper":"（Merry Christmas.）"},
    {"word":"reliable","phonetic":"/rɪˈlaɪəbl/","meaning":"adj. 可靠的","noahWhisper":"（I am reliable. Trust me.）"},
    {"word":"exactly","phonetic":"/ɪɡˈzæktli/","meaning":"adv. 确切地","noahWhisper":"（Exactly! 终于开窍了。）"},
    {"word":"complicated","phonetic":"/ˈkɑːmplɪkeɪtɪd/","meaning":"adj. 复杂的","noahWhisper":"（It's complicated... 就像我们的关系。）"},
    {"word":"locate","phonetic":"/ˈloʊkeɪt/","meaning":"v. 定位","noahWhisper":"（Locate your heart.）"},
    {"word":"sun","phonetic":"/sʌn/","meaning":"n. 太阳","noahWhisper":"（You are my sun.）"},
    {"word":"approve","phonetic":"/əˈpruːv/","meaning":"v. 批准；赞成","noahWhisper":"（I approve.）"},
    {"word":"requirement","phonetic":"/rɪˈkwaɪərmənt/","meaning":"n. 要求","noahWhisper":"（Meet my requirement first.）"},
    {"word":"sympathy","phonetic":"/ˈsɪmpəθi/","meaning":"n. 同情","noahWhisper":"（I don't need sympathy. I need you.）"},
    {"word":"challenge","phonetic":"/ˈtʃælɪndʒ/","meaning":"n. 挑战","noahWhisper":"（Challenge accepted.）"},
    {"word":"ticket","phonetic":"/ˈtɪkɪt/","meaning":"n. 票","noahWhisper":"（One way ticket to my heart?）"},
    {"word":"tea","phonetic":"/tiː/","meaning":"n. 茶","noahWhisper":"（来一杯 Earl Grey tea。）"},
    {"word":"plot","phonetic":"/plɑːt/","meaning":"n. 情节；阴谋","noahWhisper":"（The plot thickens.）"},
    {"word":"vacation","phonetic":"/veɪˈkeɪʃn/","meaning":"n. 假期","noahWhisper":"（Need a vacation with you.）"},
    {"word":"scissors","phonetic":"/ˈsɪzərz/","meaning":"n. 剪刀","noahWhisper":"（Sharp scissors，小心手。）"},
    {"word":"stern","phonetic":"/stɜːrn/","meaning":"adj. 严厉的","noahWhisper":"（别让我露出 stern 的表情。）"},
    {"word":"accessory","phonetic":"/əkˈsesəri/","meaning":"n. 附件；配饰","noahWhisper":"（你是我最珍贵的 accessory... 开玩笑的，你是主角。）"},
    {"word":"implication","phonetic":"/ˌɪmplɪˈkeɪʃn/","meaning":"n. 含义；暗示","noahWhisper":"（Understand the implication.）"},
    {"word":"candidate","phonetic":"/ˈkændɪdət/","meaning":"n. 候选人","noahWhisper":"（你是做我女朋友的唯一 candidate。）"},
    {"word":"brief","phonetic":"/briːf/","meaning":"adj. 简短的","noahWhisper":"（Be brief. 我没时间听废话。）"},
    {"word":"steal","phonetic":"/stiːl/","meaning":"v. 偷窃","noahWhisper":"（Don't steal glances at me. 光明正大地看。）"},
    {"word":"fate","phonetic":"/feɪt/","meaning":"n. 命运","noahWhisper":"（It's fate.）"},
    {"word":"presence","phonetic":"/ˈprezns/","meaning":"n. 出席；存在","noahWhisper":"（Your presence calms me.）"},
    {"word":"reputation","phonetic":"/ˌrepjuˈteɪʃn/","meaning":"n. 名声","noahWhisper":"（Protect your reputation.）"},
    {"word":"physicist","phonetic":"/ˈfɪzɪsɪst/","meaning":"n. 物理学家","noahWhisper":"（Like a physicist analyzing love.）"},
    {"word":"deed","phonetic":"/diːd/","meaning":"n. 行为","noahWhisper":"（Good deed.）"},
    {"word":"mile","phonetic":"/maɪl/","meaning":"n. 英里","noahWhisper":"（I'd walk a mile for you.）"},
    {"word":"robot","phonetic":"/ˈroʊbɑːt/","meaning":"n. 机器人","noahWhisper":"（I am not a robot. 我有心。）"},
    {"word":"claw","phonetic":"/klɔː/","meaning":"n. 爪","noahWhisper":"（Ravenclaw's claw.）"},
    {"word":"breakfast","phonetic":"/ˈbrekfəst/","meaning":"n. 早餐","noahWhisper":"（Breakfast together?）"},
    {"word":"range","phonetic":"/reɪndʒ/","meaning":"n. 范围","noahWhisper":"（Out of range. 离我太远了。）"},
    {"word":"truck","phonetic":"/trʌk/","meaning":"n. 卡车","noahWhisper":"（Muggle truck.）"},
    {"word":"forecast","phonetic":"/ˈfɔːrkæst/","meaning":"n. 预报","noahWhisper":"（Weather forecast: Sunny with a chance of you.）"},
    {"word":"zero","phonetic":"/ˈzɪroʊ/","meaning":"n. 零","noahWhisper":"（Start from zero.）"},
    {"word":"nature","phonetic":"/ˈneɪtʃər/","meaning":"n. 自然；本性","noahWhisper":"（It's in my nature to protect you.）"},
    {"word":"deduce","phonetic":"/dɪˈduːs/","meaning":"v. 推断","noahWhisper":"（Sherlock Holmes would deduce that I like you.）"},
    {"word":"aim","phonetic":"/eɪm/","meaning":"n. 目标 v. 瞄准","noahWhisper":"（Aim high.）"},
    {"word":"ring","phonetic":"/rɪŋ/","meaning":"n. 戒指；环","noahWhisper":"（总有一天我会给你戴上 ring。）"},
    {"word":"vain","phonetic":"/veɪn/","meaning":"adj. 徒劳的；自负的","noahWhisper":"（Don't wait in vain.）"},
    {"word":"welcome","phonetic":"/ˈwelkəm/","meaning":"n. 欢迎","noahWhisper":"（You are always welcome in my dorm.）"},
    {"word":"powerful","phonetic":"/ˈpaʊərfl/","meaning":"adj. 强大的","noahWhisper":"（Knowledge is powerful.）"},
    {"word":"pond","phonetic":"/pɑːnd/","meaning":"n. 池塘","noahWhisper":"（Black Lake is more like a sea than a pond.）"},
    {"word":"propose","phonetic":"/prəˈpoʊz/","meaning":"v. 提议；求婚","noahWhisper":"（Are you proposing to me?）"},
    {"word":"myself","phonetic":"/maɪˈself/","meaning":"pron. 我自己","noahWhisper":"（I want you all to myself.）"},
    {"word":"await","phonetic":"/əˈweɪt/","meaning":"v. 等候","noahWhisper":"（I await your answer.）"},
    {"word":"experiment","phonetic":"/ɪkˈsperɪmənt/","meaning":"n. 实验","noahWhisper":"（Let's experiment with magic.）"},
    {"word":"sensible","phonetic":"/ˈsensəbl/","meaning":"adj. 明智的","noahWhisper":"（Be sensible, 别做傻事。）"},
    {"word":"retreat","phonetic":"/rɪˈtriːt/","meaning":"v. 撤退","noahWhisper":"（Never retreat.）"},
    {"word":"playground","phonetic":"/ˈpleɪɡraʊnd/","meaning":"n. 操场","noahWhisper":"（The library is my playground.）"},
    {"word":"collapse","phonetic":"/kəˈlæps/","meaning":"v. 倒塌；崩溃","noahWhisper":"（Don't collapse under pressure.）"},
    {"word":"nowhere","phonetic":"/ˈnoʊwer/","meaning":"adv. 无处","noahWhisper":"（You have nowhere to hide.）"},
    {"word":"physician","phonetic":"/fɪˈzɪʃn/","meaning":"n. 内科医生","noahWhisper":"（I'm not a physician, but I can heal your heart.）"},
    {"word":"stamp","phonetic":"/stæmp/","meaning":"n. 邮票","noahWhisper":"（Stamp my name on your heart.）"},
    {"word":"sigh","phonetic":"/saɪ/","meaning":"v. 叹气","noahWhisper":"（Don't sigh, kiss me.）"},
    {"word":"intentional","phonetic":"/ɪnˈtenʃənl/","meaning":"adj. 故意的","noahWhisper":"（Was that intentional?）"},
    {"word":"base","phonetic":"/beɪs/","meaning":"n. 基础","noahWhisper":"（Base your logic on facts.）"},
    {"word":"circuit","phonetic":"/ˈsɜːrkɪt/","meaning":"n. 电路","noahWhisper":"（Short circuit in my brain when I see you.）"},
    {"word":"terror","phonetic":"/ˈterər/","meaning":"n. 恐怖","noahWhisper":"（There is no terror in your eyes.）"},
    {"word":"go","phonetic":"/ɡoʊ/","meaning":"v. 去","noahWhisper":"（Don't go.）"},
    {"word":"rank","phonetic":"/ræŋk/","meaning":"n. 等级","noahWhisper":"（Rank number one.）"},
    {"word":"writer","phonetic":"/ˈraɪtər/","meaning":"n. 作家","noahWhisper":"（Be the writer of your own story.）"},
    {"word":"gulf","phonetic":"/ɡʌlf/","meaning":"n. 海湾；鸿沟","noahWhisper":"（Bridge the gulf between us.）"},
    {"word":"gift","phonetic":"/ɡɪft/","meaning":"n. 礼物","noahWhisper":"（You are a gift.）"},
    {"word":"unfortunate","phonetic":"/ʌnˈfɔːrtʃənət/","meaning":"adj. 不幸的","noahWhisper":"（Unfortunate events bring us together.）"},
    {"word":"bath","phonetic":"/bæθ/","meaning":"n. 洗澡","noahWhisper":"（Prefect's bathroom?）"},
    {"word":"key","phonetic":"/kiː/","meaning":"n. 钥匙","noahWhisper":"（You hold the key.）"},
    {"word":"evil","phonetic":"/ˈiːvl/","meaning":"adj. 邪恶的","noahWhisper":"（Am I evil? Maybe a little.）"},
    {"word":"purify","phonetic":"/ˈpjʊrɪfaɪ/","meaning":"v. 净化","noahWhisper":"（Purify your thoughts.）"},
    {"word":"rescue","phonetic":"/ˈreskjuː/","meaning":"v. 营救","noahWhisper":"（I will rescue you.）"},
    {"word":"exact","phonetic":"/ɪɡˈzækt/","meaning":"adj. 确切的","noahWhisper":"（Exact timing.）"},
    {"word":"fur","phonetic":"/fɜːr/","meaning":"n. 毛皮","noahWhisper":"（Soft fur.）"},
    {"word":"look","phonetic":"/lʊk/","meaning":"v. 看","noahWhisper":"（Look at me only.）"},
    {"word":"alive","phonetic":"/əˈlaɪv/","meaning":"adj. 活着的","noahWhisper":"（You make me feel alive.）"},
    {"word":"absorb","phonetic":"/əbˈzɔːb/","meaning":"v. 吸收","noahWhisper":"（Absorb knowledge like a sponge.）"},
    {"word":"repair","phonetic":"/rɪˈper/","meaning":"v. 修理","noahWhisper":"（Reparo!）"},
    {"word":"opera","phonetic":"/ˈɑːprə/","meaning":"n. 歌剧","noahWhisper":"（Life is like an opera.）"},
    {"word":"sudden","phonetic":"/ˈsʌdn/","meaning":"adj. 突然的","noahWhisper":"（A sudden realization.）"},
    {"word":"compromise","phonetic":"/ˈkɑːmprəmaɪz/","meaning":"v. 妥协","noahWhisper":"（I never compromise, except for you.）"},
    {"word":"true","phonetic":"/truː/","meaning":"adj. 真实的","noahWhisper":"（True love?）"},
    {"word":"box","phonetic":"/bɑːks/","meaning":"n. 盒子","noahWhisper":"（What's in the box?）"},
    {"word":"pig","phonetic":"/pɪɡ/","meaning":"n. 猪","noahWhisper":"（Don't be a pig.）"},
    {"word":"alone","phonetic":"/əˈloʊn/","meaning":"adj. 单独的","noahWhisper":"（You are never alone.）"},
    {"word":"engineering","phonetic":"/ˌendʒɪˈnɪrɪŋ/","meaning":"n. 工程学","noahWhisper":"（Magic is better than engineering.）"},
    {"word":"stability","phonetic":"/stəˈbɪləti/","meaning":"n. 稳定性","noahWhisper":"（I offer you stability.）"},
    {"word":"dictation","phonetic":"/dɪkˈteɪʃn/","meaning":"n. 听写","noahWhisper":"（Quill ready for dictation.）"},
    {"word":"believe","phonetic":"/bɪˈliːv/","meaning":"v. 相信","noahWhisper":"（I believe in you.）"},
    {"word":"rope","phonetic":"/roʊp/","meaning":"n. 绳索","noahWhisper":"（Tied with a rope? Interesting.）"},
    {"word":"second","phonetic":"/ˈsekənd/","meaning":"n. 秒；第二","noahWhisper":"（Wait a second.）"},
    {"word":"real","phonetic":"/ˈriːəl/","meaning":"adj. 真的","noahWhisper":"（Is this real?）"},
    {"word":"emergency","phonetic":"/ɪˈmɜːrdʒənsi/","meaning":"n. 紧急情况","noahWhisper":"（In case of emergency, kiss me.）"},
    {"word":"flourish","phonetic":"/ˈflɜːrɪʃ/","meaning":"v. 繁荣；茂盛","noahWhisper":"（Let our love flourish.）"},
    {"word":"dump","phonetic":"/dʌmp/","meaning":"v. 倾倒","noahWhisper":"（Dump those bad habits.）"},
    {"word":"relate","phonetic":"/rɪˈleɪt/","meaning":"v. 联系；叙述","noahWhisper":"（I relate to that.）"},
    {"word":"turnip","phonetic":"/ˈtɜːrnɪp/","meaning":"n. 萝卜","noahWhisper":"（Head like a turnip?）"},
    {"word":"robe","phonetic":"/roʊb/","meaning":"n. 长袍","noahWhisper":"（Fix your robe.）"},
    {"word":"cup","phonetic":"/kʌp/","meaning":"n. 杯子","noahWhisper":"（Triwizard Cup.）"},
    {"word":"left","phonetic":"/left/","meaning":"adj. 左边的；剩下的","noahWhisper":"（Don't be left behind.）"},
    {"word":"wealthy","phonetic":"/ˈwelθi/","meaning":"adj. 富有的","noahWhisper":"（Malfoy is wealthy, but I am brilliant.）"},
    {"word":"team","phonetic":"/tiːm/","meaning":"n. 队","noahWhisper":"（Dream team.）"},
    {"word":"house","phonetic":"/haʊs/","meaning":"n. 房子；学院","noahWhisper":"（Points for your house.）"},
    {"word":"teacher","phonetic":"/ˈtiːtʃər/","meaning":"n. 老师","noahWhisper":"（Listen to the teacher.）"},
    {"word":"railway","phonetic":"/ˈreɪlweɪ/","meaning":"n. 铁路","noahWhisper":"（Hogwarts Express railway.）"},
    {"word":"successfully","phonetic":"/səkˈsesfəli/","meaning":"adv. 成功地","noahWhisper":"（You did it successfully.）"},
    {"word":"write","phonetic":"/raɪt/","meaning":"v. 写","noahWhisper":"（Write it down.）"},
    {"word":"explosive","phonetic":"/ɪkˈspləʊsɪv/","meaning":"adj. 爆炸的","noahWhisper":"（Explosive potion.）"},
    {"word":"undergo","phonetic":"/ˌʌndərˈɡoʊ/","meaning":"v. 经历","noahWhisper":"（Undergo training.）"},
    {"word":"intellectual","phonetic":"/ˌɪntəˈlektʃuəl/","meaning":"adj. 智力的","noahWhisper":"（Intellectual challenge.）"},
    {"word":"evident","phonetic":"/ˈevɪdənt/","meaning":"adj. 明显的","noahWhisper":"（It is evident that you like me.）"},
    {"word":"secure","phonetic":"/sɪˈkjʊr/","meaning":"adj. 安全的","noahWhisper":"（Feel secure.）"},
    {"word":"lazy","phonetic":"/ˈleɪzi/","meaning":"adj. 懒惰的","noahWhisper":"（Don't be lazy.）"},
    {"word":"search","phonetic":"/sɜːrtʃ/","meaning":"v. 搜索","noahWhisper":"（Search for truth.）"},
    {"word":"ancient","phonetic":"/ˈeɪnʃənt/","meaning":"adj. 古代的","noahWhisper":"（Ancient magic.）"},
    {"word":"wrong","phonetic":"/rɔːŋ/","meaning":"adj. 错误的","noahWhisper":"（You are wrong.）"},
    {"word":"pint","phonetic":"/paɪnt/","meaning":"n. 品脱","noahWhisper":"（A pint of pumpkin juice.）"},
    {"word":"tolerate","phonetic":"/ˈtɑːləreɪt/","meaning":"v. 忍受","noahWhisper":"（I won't tolerate laziness.）"},
    {"word":"anyhow","phonetic":"/ˈenihaʊ/","meaning":"adv. 无论如何","noahWhisper":"（Anyhow, I love you.）"},
    {"word":"scale","phonetic":"/skeɪl/","meaning":"n. 规模；鳞片","noahWhisper":"（Dragon scale.）"},
    {"word":"swamp","phonetic":"/swɑːmp/","meaning":"n. 沼泽","noahWhisper":"（Don't get stuck in the swamp.）"},
    {"word":"inch","phonetic":"/ɪntʃ/","meaning":"n. 英寸","noahWhisper":"（Every inch of you.）"},
    {"word":"odd","phonetic":"/ɑːd/","meaning":"adj. 奇特的","noahWhisper":"（Odd behavior.）"},
    {"word":"dense","phonetic":"/dens/","meaning":"adj. 稠密的；愚钝的","noahWhisper":"（Dense forest.）"},
    {"word":"business","phonetic":"/ˈbɪznəs/","meaning":"n. 商业；生意","noahWhisper":"（Serious business.）"},
    {"word":"foreign","phonetic":"/ˈfɔːrən/","meaning":"adj. 外国的","noahWhisper":"（Foreign student.）"},
    {"word":"objection","phonetic":"/əbˈdʒekʃn/","meaning":"n. 反对","noahWhisper":"（Any objection?）"},
    {"word":"imply","phonetic":"/ɪmˈplaɪ/","meaning":"v. 暗示","noahWhisper":"（What do you imply?）"},
    {"word":"otherwise","phonetic":"/ˈʌðərwaɪz/","meaning":"adv. 否则","noahWhisper":"（Study hard, otherwise...）"},
    {"word":"orchestra","phonetic":"/ˈɔːrkɪstrə/","meaning":"n. 管弦乐队","noahWhisper":"（Conduct the orchestra.）"},
    {"word":"born","phonetic":"/bɔːrn/","meaning":"adj. 天生的","noahWhisper":"（Muggle-born? Doesn't matter.）"},
    {"word":"hillside","phonetic":"/ˈhɪlsaɪd/","meaning":"n. 山坡","noahWhisper":"（Meet me on the hillside.）"},
    {"word":"price","phonetic":"/praɪs/","meaning":"n. 价格","noahWhisper":"（What's the price?）"},
    {"word":"slit","phonetic":"/slɪt/","meaning":"v. 切开 n. 裂缝","noahWhisper":"（Slit pupils like a snake.）"},
    {"word":"hide","phonetic":"/haɪd/","meaning":"v. 躲藏","noahWhisper":"（Hide and seek.）"},
    {"word":"tell","phonetic":"/tel/","meaning":"v. 告诉","noahWhisper":"（Tell me the truth.）"},
    {"word":"uncle","phonetic":"/ˈʌŋkl/","meaning":"n. 叔叔","noahWhisper":"（Uncle Vernon is annoying.）"},
    {"word":"position","phonetic":"/pəˈzɪʃn/","meaning":"n. 位置；职位","noahWhisper":"（Your position is next to me.）"},
    {"word":"contradiction","phonetic":"/ˌkɑːntrəˈdɪkʃn/","meaning":"n. 矛盾","noahWhisper":"（Walking contradiction.）"},
    {"word":"appetite","phonetic":"/ˈæpɪtaɪt/","meaning":"n. 食欲","noahWhisper":"（Lost your appetite?）"},
    {"word":"knee","phonetic":"/niː/","meaning":"n. 膝盖","noahWhisper":"（Bend the knee.）"},
    {"word":"consideration","phonetic":"/kənˌsɪdəˈreɪʃn/","meaning":"n. 考虑","noahWhisper":"（Take into consideration.）"},
    {"word":"weapon","phonetic":"/ˈwepən/","meaning":"n. 武器","noahWhisper":"（Wand is a weapon.）"},
    {"word":"radiation","phonetic":"/ˌreɪdiˈeɪʃn/","meaning":"n. 辐射","noahWhisper":"（Magical radiation.）"},
    {"word":"relatively","phonetic":"/ˈrelətɪvli/","meaning":"adv. 相对地","noahWhisper":"（Relatively speaking.）"},
    {"word":"insure","phonetic":"/ɪnˈʃʊr/","meaning":"v. 投保；保证","noahWhisper":"（Insure your safety.）"},
    {"word":"defend","phonetic":"/dɪˈfend/","meaning":"v. 防守；辩护","noahWhisper":"（Defend yourself.）"},
    {"word":"specially","phonetic":"/ˈspeʃəli/","meaning":"adv. 特别地","noahWhisper":"（Specially for you.）"},
    {"word":"education","phonetic":"/ˌedʒuˈkeɪʃn/","meaning":"n. 教育","noahWhisper":"（Magic education.）"},
    {"word":"negative","phonetic":"/ˈneɡətɪv/","meaning":"adj. 消极的；负的","noahWhisper":"（Don't be negative.）"},
    {"word":"brook","phonetic":"/brʊk/","meaning":"n. 小溪","noahWhisper":"（Babbling brook.）"},
    {"word":"reject","phonetic":"/rɪˈdʒekt/","meaning":"v. 拒绝","noahWhisper":"（Reject mediocrity.）"},
    {"word":"element","phonetic":"/ˈelɪmənt/","meaning":"n. 元素","noahWhisper":"（The fifth element.）"},
    {"word":"virtue","phonetic":"/ˈvɜːrtʃuː/","meaning":"n. 美德","noahWhisper":"（Patience is a virtue.）"},
    {"word":"style","phonetic":"/staɪl/","meaning":"n. 风格","noahWhisper":"（I like your style.）"},
    {"word":"ride","phonetic":"/raɪd/","meaning":"v. 骑；乘","noahWhisper":"（Ride a broomstick.）"},
    {"word":"midst","phonetic":"/mɪdst/","meaning":"n. 中间","noahWhisper":"（In the midst of chaos.）"},
    {"word":"from","phonetic":"/frəm/","meaning":"prep. 来自","noahWhisper":"（From me to you.）"},
    {"word":"mat","phonetic":"/mæt/","meaning":"n. 垫子","noahWhisper":"（Wipe your feet on the mat.）"},
    {"word":"own","phonetic":"/oʊn/","meaning":"adj. 自己的 v. 拥有","noahWhisper":"（My own creation.）"},
    {"word":"failure","phonetic":"/ˈfeɪljər/","meaning":"n. 失败","noahWhisper":"（Fear of failure.）"},
    {"word":"read","phonetic":"/riːd/","meaning":"v. 阅读","noahWhisper":"（Read more books.）"},
    {"word":"trap","phonetic":"/træp/","meaning":"n. 陷阱 v. 诱捕","noahWhisper":"（It's a trap!）"},
    {"word":"superior","phonetic":"/suːˈpɪriər/","meaning":"adj. 上级的；优越的","noahWhisper":"（Superior intellect.）"},
    {"word":"tidy","phonetic":"/ˈtaɪdi/","meaning":"adj. 整洁的","noahWhisper":"（Keep your room tidy.）"},
    {"word":"impose","phonetic":"/ɪmˈpoʊz/","meaning":"v. 强加","noahWhisper":"（Don't impose on me.）"},
    {"word":"sketch","phonetic":"/sketʃ/","meaning":"n. 素描；草图","noahWhisper":"（Sketch a plan.）"},
    {"word":"hell","phonetic":"/hel/","meaning":"n. 地狱","noahWhisper":"（Bloody hell!）"},
    {"word":"gaseous","phonetic":"/ˈɡæsiəs/","meaning":"adj. 气态的","noahWhisper":"（Gaseous form.）"},
    {"word":"crack","phonetic":"/kræk/","meaning":"n. 裂缝 v. 破裂","noahWhisper":"（Crack the code.）"},
    {"word":"experimental","phonetic":"/ɪkˌsperɪˈmentl/","meaning":"adj. 实验的","noahWhisper":"（Experimental magic.）"},
    {"word":"faith","phonetic":"/feɪθ/","meaning":"n. 信仰；信任","noahWhisper":"（Have faith.）"},
    {"word":"score","phonetic":"/skɔːr/","meaning":"n. 分数 v. 得分","noahWhisper":"（High score.）"},
    {"word":"forest","phonetic":"/ˈfɔːrɪst/","meaning":"n. 森林","noahWhisper":"（Forbidden Forest.）"},
    {"word":"assistant","phonetic":"/əˈsɪstənt/","meaning":"n. 助手","noahWhisper":"（My lovely assistant.）"},
    {"word":"scientific","phonetic":"/ˌsaɪənˈtɪfɪk/","meaning":"adj. 科学的","noahWhisper":"（Scientific method.）"},
    {"word":"accurate","phonetic":"/ˈækjərət/","meaning":"adj. 准确的","noahWhisper":"（Be accurate.）"},
    {"word":"recognize","phonetic":"/ˈrekəɡnaɪz/","meaning":"v. 认出；承认","noahWhisper":"（I recognize you.）"},
    {"word":"aggressive","phonetic":"/əˈɡresɪv/","meaning":"adj. 侵略的；咄咄逼人的","noahWhisper":"（Too aggressive.）"},
    {"word":"string","phonetic":"/strɪŋ/","meaning":"n. 线；弦","noahWhisper":"（Pull strings.）"},
    {"word":"mental","phonetic":"/ˈmentl/","meaning":"adj. 精神的；脑力的","noahWhisper":"（Mental strength.）"},
    {"word":"downstairs","phonetic":"/ˌdaʊnˈsterz/","meaning":"adv. 在楼下","noahWhisper":"（Go downstairs.）"},
    {"word":"defence","phonetic":"/dɪˈfens/","meaning":"n. 防御","noahWhisper":"（Defence Against the Dark Arts.）"},
    {"word":"collective","phonetic":"/kəˈlektɪv/","meaning":"adj. 集体的","noahWhisper":"（Collective effort.）"},
    {"word":"affect","phonetic":"/əˈfekt/","meaning":"v. 影响","noahWhisper":"（You affect me deeply.）"},
    {"word":"brick","phonetic":"/brɪk/","meaning":"n. 砖","noahWhisper":"（Another brick in the wall.）"},
    {"word":"ornament","phonetic":"/ˈɔːrnəmənt/","meaning":"n. 装饰品","noahWhisper":"（Christmas ornament.）"},
    {"word":"maintain","phonetic":"/meɪnˈteɪn/","meaning":"v. 维持","noahWhisper":"（Maintain order.）"},
    {"word":"laughter","phonetic":"/ˈlæftər/","meaning":"n. 笑声","noahWhisper":"（I miss your laughter.）"},
    {"word":"bathe","phonetic":"/beɪð/","meaning":"v. 洗澡","noahWhisper":"（Bathe in sunlight.）"},
    {"word":"gate","phonetic":"/ɡeɪt/","meaning":"n. 大门","noahWhisper":"（Hogwarts gate.）"},
    {"word":"car","phonetic":"/kɑːr/","meaning":"n. 汽车","noahWhisper":"（Flying car.）"},
    {"word":"reflection","phonetic":"/rɪˈflekʃn/","meaning":"n. 反射；倒影","noahWhisper":"（Look at your reflection.）"},
    {"word":"building","phonetic":"/ˈbɪldɪŋ/","meaning":"n. 建筑物","noahWhisper":"（Tall building.）"},
    {"word":"bed","phonetic":"/bed/","meaning":"n. 床","noahWhisper":"（Go to bed.）"},
    {"word":"spirit","phonetic":"/ˈspɪrɪt/","meaning":"n. 精神；灵魂","noahWhisper":"（Free spirit.）"},
    {"word":"waken","phonetic":"/ˈweɪkən/","meaning":"v. 唤醒","noahWhisper":"（Waken up!）"},
    {"word":"trick","phonetic":"/trɪk/","meaning":"n. 诡计 v. 欺骗","noahWhisper":"（Trick or treat?）"},
    {"word":"deepen","phonetic":"/ˈdiːpən/","meaning":"v. 加深","noahWhisper":"（Deepen our bond.）"},
    {"word":"appointment","phonetic":"/əˈpɔɪntmənt/","meaning":"n. 约会；任命","noahWhisper":"（Don't miss our appointment.）"},
    {"word":"zone","phonetic":"/zoʊn/","meaning":"n. 区域","noahWhisper":"（Danger zone.）"},
    {"word":"separate","phonetic":"/ˈseprət/","meaning":"v. 分开 adj. 单独的","noahWhisper":"（Separate ways.）"},
    {"word":"four","phonetic":"/fɔːr/","meaning":"num. 四","noahWhisper":"（Four houses.）"},
    {"word":"consequently","phonetic":"/ˈkɑːnsɪkwentli/","meaning":"adv. 因此","noahWhisper":"（Consequently, you passed.）"},
    {"word":"medicine","phonetic":"/ˈmedɪsn/","meaning":"n. 药","noahWhisper":"（Take your medicine.）"},
    {"word":"sweat","phonetic":"/swet/","meaning":"n. 汗水 v. 出汗","noahWhisper":"（Don't sweat it.）"},
    {"word":"graduate","phonetic":"/ˈɡrædʒuət/","meaning":"v. 毕业 n. 毕业生","noahWhisper":"（When you graduate...）"},
    {"word":"watch","phonetic":"/wɑːtʃ/","meaning":"v. 观看 n. 手表","noahWhisper":"（Watch me.）"},
    {"word":"inefficient","phonetic":"/ˌɪnɪˈfɪʃnt/","meaning":"adj. 低效的","noahWhisper":"（Inefficient method.）"},
    {"word":"exclude","phonetic":"/ɪkˈskluːd/","meaning":"v. 排除","noahWhisper":"（Don't exclude me.）"},
    {"word":"liberal","phonetic":"/ˈlɪbərəl/","meaning":"adj. 自由的；慷慨的","noahWhisper":"（Liberal arts.）"},
    {"word":"forehead","phonetic":"/ˈfɔːrhed/","meaning":"n. 前额","noahWhisper":"（Kiss your forehead.）"},
    {"word":"classroom","phonetic":"/ˈklɑːsruːm/","meaning":"n. 教室","noahWhisper":"（Empty classroom.）"},
    {"word":"madam","phonetic":"/ˈmædəm/","meaning":"n. 夫人","noahWhisper":"（Madam Pomfrey.）"},
    {"word":"operate","phonetic":"/ˈɑːpəreɪt/","meaning":"v. 操作；动手术","noahWhisper":"（Operate the machine.）"},
    {"word":"mineral","phonetic":"/ˈmɪnərəl/","meaning":"n. 矿物","noahWhisper":"（Mineral water.）"},
    {"word":"size","phonetic":"/saɪz/","meaning":"n. 大小","noahWhisper":"（Size doesn't matter.）"},
    {"word":"because","phonetic":"/bɪˈkəz/","meaning":"conj. 因为","noahWhisper":"（Just because.）"},
    {"word":"run","phonetic":"/rʌn/","meaning":"v. 跑","noahWhisper":"（Run away with me.）"},
    {"word":"shave","phonetic":"/ʃeɪv/","meaning":"v. 剃须","noahWhisper":"（Close shave.）"},
    {"word":"charity","phonetic":"/ˈtʃærəti/","meaning":"n. 慈善","noahWhisper":"（Charity begins at home.）"},
    {"word":"cunning","phonetic":"/ˈkʌnɪŋ/","meaning":"adj. 狡猾的","noahWhisper":"（Slytherins are cunning.）"},
    {"word":"thus","phonetic":"/ðʌs/","meaning":"adv. 因此","noahWhisper":"（Thus spoke...）"},
    {"word":"construct","phonetic":"/kənˈstrʌkt/","meaning":"v. 建造","noahWhisper":"（Construct a sentence.）"},
    {"word":"essay","phonetic":"/ˈeseɪ/","meaning":"n. 文章；随笔","noahWhisper":"（Write an essay.）"},
    {"word":"animal","phonetic":"/ˈænɪml/","meaning":"n. 动物","noahWhisper":"（Animagus.）"},
    {"word":"restless","phonetic":"/ˈrestləs/","meaning":"adj. 焦躁不安的","noahWhisper":"（You seem restless.）"},
    {"word":"sob","phonetic":"/sɑːb/","meaning":"v. 啜泣","noahWhisper":"（Don't sob.）"},
    {"word":"future","phonetic":"/ˈfjuːtʃər/","meaning":"n. 未来","noahWhisper":"（Our future.）"},
    {"word":"reception","phonetic":"/rɪˈsepʃn/","meaning":"n. 接待；招待会","noahWhisper":"（Wedding reception?）"},
    {"word":"reed","phonetic":"/riːd/","meaning":"n. 芦苇","noahWhisper":"（Thinking reed.）"},
    {"word":"quiet","phonetic":"/ˈkwaɪət/","meaning":"adj. 安静的","noahWhisper":"（Be quiet.）"},
    {"word":"transfer","phonetic":"/trænsˈfɜːr/","meaning":"v. 转移；转乘","noahWhisper":"（Transfer student.）"},
    {"word":"profit","phonetic":"/ˈprɑːfɪt/","meaning":"n. 利润 v. 获利","noahWhisper":"（Profit from mistakes.）"},
    {"word":"springtime","phonetic":"/ˈsprɪŋtaɪm/","meaning":"n. 春季","noahWhisper":"（Love in springtime.）"},
    {"word":"crown","phonetic":"/kraʊn/","meaning":"n. 皇冠","noahWhisper":"（Wear the crown.）"},
    {"word":"somebody","phonetic":"/ˈsʌmbədi/","meaning":"pron. 某人","noahWhisper":"（Need somebody?）"},
    {"word":"Brazil","phonetic":"/brəˈzɪl/","meaning":"n. 巴西","noahWhisper":"（Go to Brazil?）"},
    {"word":"woman","phonetic":"/ˈwʊmən/","meaning":"n. 女人","noahWhisper":"（Wonderful woman.）"},
    {"word":"officer","phonetic":"/ˈɑːfɪsər/","meaning":"n. 官员；军官","noahWhisper":"（Auror officer.）"},
    {"word":"mortal","phonetic":"/ˈmɔːrtl/","meaning":"adj. 凡人的","noahWhisper":"（Mere mortal.）"},
    {"word":"consistent","phonetic":"/kənˈsɪstənt/","meaning":"adj. 一致的","noahWhisper":"（Be consistent.）"},
    {"word":"melt","phonetic":"/melt/","meaning":"v. 融化","noahWhisper":"（Melt my heart.）"},
    {"word":"aid","phonetic":"/eɪd/","meaning":"n. 援助 v. 帮助","noahWhisper":"（First aid.）"},
    {"word":"grant","phonetic":"/ɡrænt/","meaning":"v. 授予；同意","noahWhisper":"（Grant a wish.）"},
    {"word":"hour","phonetic":"/ˈaʊər/","meaning":"n. 小时","noahWhisper":"（Every hour.）"},
    {"word":"delivery","phonetic":"/dɪˈlɪvəri/","meaning":"n. 递送；分娩","noahWhisper":"（Owl post delivery.）"},
    {"word":"loudspeaker","phonetic":"/ˌlaʊdˈspiːkər/","meaning":"n. 扬声器","noahWhisper":"（Turn off the loudspeaker.）"},
    {"word":"as","phonetic":"/əz/","meaning":"conj. 像...一样；当...时","noahWhisper":"（As you wish.）"},
    {"word":"file","phonetic":"/faɪl/","meaning":"n. 文件 v. 归档","noahWhisper":"（File it away.）"},
    {"word":"riddle","phonetic":"/ˈrɪdl/","meaning":"n. 谜语","noahWhisper":"（Tom Riddle? No, just a riddle.）"},
    {"word":"adventure","phonetic":"/ədˈventʃər/","meaning":"n. 冒险","noahWhisper":"（Ready for an adventure?）"},
    {"word":"castle","phonetic":"/ˈkæsl/","meaning":"n. 城堡","noahWhisper":"（Hogwarts castle.）"},
    {"word":"pigeon","phonetic":"/ˈpɪdʒɪn/","meaning":"n. 鸽子","noahWhisper":"（Carrier pigeon.）"},
    {"word":"communist","phonetic":"/ˈkɑːmjənɪst/","meaning":"n. 共产主义者","noahWhisper":"（...Politically neutral here.）"},
    {"word":"clue","phonetic":"/kluː/","meaning":"n. 线索","noahWhisper":"（Get a clue.）"},
    {"word":"dissolve","phonetic":"/dɪˈzɑːlv/","meaning":"v. 溶解；解散","noahWhisper":"（Dissolve in water.）"},
    {"word":"sand","phonetic":"/sænd/","meaning":"n. 沙","noahWhisper":"（Sand in the hourglass.）"},
    {"word":"cafeteria","phonetic":"/ˌkæfəˈtɪriə/","meaning":"n. 自助餐厅","noahWhisper":"（Meet at the cafeteria.）"},
    {"word":"widen","phonetic":"/ˈwaɪdn/","meaning":"v. 加宽","noahWhisper":"（Widen your horizons.）"},
    {"word":"intermediate","phonetic":"/ˌɪntərˈmiːdiət/","meaning":"adj. 中级的","noahWhisper":"（Intermediate level.）"},
    {"word":"why","phonetic":"/waɪ/","meaning":"adv. 为什么","noahWhisper":"（Why not?）"},
    {"word":"act","phonetic":"/ækt/","meaning":"v. 行动；表演 n. 行为","noahWhisper":"（Act like a lady.）"},
    {"word":"protection","phonetic":"/prəˈtekʃn/","meaning":"n. 保护","noahWhisper":"（Protection spell.）"},
    {"word":"underneath","phonetic":"/ˌʌndərˈniːθ/","meaning":"prep. 在...下面","noahWhisper":"（Underneath the stars.）"},
    {"word":"award","phonetic":"/əˈwɔːrd/","meaning":"n. 奖品 v. 授予","noahWhisper":"（House Cup award.）"},
    {"word":"restrain","phonetic":"/rɪˈstreɪn/","meaning":"v. 抑制","noahWhisper":"（Restrain yourself.）"},
    {"word":"cash","phonetic":"/kæʃ/","meaning":"n. 现金","noahWhisper":"（Cash only.）"},
    {"word":"expensive","phonetic":"/ɪkˈspensɪv/","meaning":"adj. 昂贵的","noahWhisper":"（Too expensive.）"},
    {"word":"nest","phonetic":"/nest/","meaning":"n. 巢","noahWhisper":"（Bird's nest.）"},
    {"word":"coffee","phonetic":"/ˈkɔːfi/","meaning":"n. 咖啡","noahWhisper":"（Black coffee.）"},
    {"word":"glass","phonetic":"/ɡlæs/","meaning":"n. 玻璃；杯子","noahWhisper":"（Glass of water.）"},
    {"word":"literary","phonetic":"/ˈlɪtəreri/","meaning":"adj. 文学的","noahWhisper":"（Literary genius.）"},
    {"word":"exist","phonetic":"/ɪɡˈzɪst/","meaning":"v. 存在","noahWhisper":"（I exist for you.）"},
    {"word":"accuse","phonetic":"/əˈkjuːz/","meaning":"v. 指责；控告","noahWhisper":"（Don't accuse me.）"},
    {"word":"computer","phonetic":"/kəmˈpjuːtər/","meaning":"n. 电脑","noahWhisper":"（Muggle computer.）"},
    {"word":"survive","phonetic":"/sərˈvaɪv/","meaning":"v. 幸存","noahWhisper":"（Survive the night.）"},
    {"word":"faithful","phonetic":"/ˈfeɪθfl/","meaning":"adj. 忠实的","noahWhisper":"（Faithful friend.）"},
    {"word":"technology","phonetic":"/tekˈnɑːlədʒi/","meaning":"n. 技术","noahWhisper":"（Magic vs Technology.）"},
    {"word":"silent","phonetic":"/ˈsaɪlənt/","meaning":"adj. 沉默的","noahWhisper":"（Silent treatment?）"},
    {"word":"lie","phonetic":"/laɪ/","meaning":"v. 躺；说谎 n. 谎言","noahWhisper":"（Don't lie to me.）"},
    {"word":"crush","phonetic":"/krʌʃ/","meaning":"v. 压碎 n. 迷恋","noahWhisper":"（Have a crush on you.）"},
    {"word":"supermarket","phonetic":"/ˈsuːpərmɑːrkɪt/","meaning":"n. 超市","noahWhisper":"（Supermarket sweep.）"},
    {"word":"edge","phonetic":"/edʒ/","meaning":"n. 边缘","noahWhisper":"（Living on the edge.）"},
    {"word":"economy","phonetic":"/ɪˈkɑːnəmi/","meaning":"n. 经济","noahWhisper":"（Economy class.）"},
    {"word":"strap","phonetic":"/stræp/","meaning":"n. 带子 v. 捆扎","noahWhisper":"（Strap in.）"},
    {"word":"steep","phonetic":"/stiːp/","meaning":"adj. 陡峭的","noahWhisper":"（Steep hill.）"},
    {"word":"everyone","phonetic":"/ˈevriwʌn/","meaning":"pron. 每个人","noahWhisper":"（Everyone says so.）"},
    {"word":"extreme","phonetic":"/ɪkˈstriːm/","meaning":"adj. 极端的","noahWhisper":"（Extreme measures.）"},
    {"word":"volt","phonetic":"/voʊlt/","meaning":"n. 伏特","noahWhisper":"（High voltage.）"},
    {"word":"boil","phonetic":"/bɔɪl/","meaning":"v. 煮沸","noahWhisper":"（Boil potion.）"},
    {"word":"sly","phonetic":"/slaɪ/","meaning":"adj. 狡猾的","noahWhisper":"（Slytherin sly.）"},
    {"word":"dull","phonetic":"/dʌl/","meaning":"adj. 乏味的；阴沉的","noahWhisper":"（Never a dull moment.）"},
    {"word":"ending","phonetic":"/ˈendɪŋ/","meaning":"n. 结局","noahWhisper":"（Happy ending?）"},
    {"word":"atomic","phonetic":"/əˈtɑːmɪk/","meaning":"adj. 原子的","noahWhisper":"（Atomic bomb.）"},
    {"word":"they","phonetic":"/ðeɪ/","meaning":"pron. 他们","noahWhisper":"（They don't know us.）"},
    {"word":"choice","phonetic":"/tʃɔɪs/","meaning":"n. 选择","noahWhisper":"（Your choice.）"},
    {"word":"important","phonetic":"/ɪmˈpɔːrtnt/","meaning":"adj. 重要的","noahWhisper":"（You are important.）"},
    {"word":"suggestion","phonetic":"/səˈdʒestʃən/","meaning":"n. 建议","noahWhisper":"（Good suggestion.）"},
    {"word":"concern","phonetic":"/kənˈsɜːrn/","meaning":"v. 涉及；使担心 n. 关心","noahWhisper":"（My only concern.）"},
    {"word":"unit","phonetic":"/ˈjuːnɪt/","meaning":"n. 单位；单元","noahWhisper":"（Unit of measurement.）"},
    {"word":"submit","phonetic":"/səbˈmɪt/","meaning":"v. 提交；屈服","noahWhisper":"（Submit your homework.）"},
    {"word":"miss","phonetic":"/mɪs/","meaning":"v. 想念；错过","noahWhisper":"（I miss you.）"},
    {"word":"whichever","phonetic":"/wɪtʃˈevər/","meaning":"pron. 无论哪个","noahWhisper":"（Whichever you like.）"},
    {"word":"pronoun","phonetic":"/ˈproʊnaʊn/","meaning":"n. 代词","noahWhisper":"（Grammar time.）"},
    {"word":"also","phonetic":"/ˈɔːlsoʊ/","meaning":"adv. 也","noahWhisper":"（Me also.）"},
    {"word":"generous","phonetic":"/ˈdʒenərəs/","meaning":"adj. 慷慨的","noahWhisper":"（Be generous.）"},
    {"word":"baggage","phonetic":"/ˈbæɡɪdʒ/","meaning":"n. 行李","noahWhisper":"（Emotional baggage.）"},
    {"word":"household","phonetic":"/ˈhaʊshoʊld/","meaning":"n. 家庭；户","noahWhisper":"（Household name.）"},
    {"word":"steel","phonetic":"/stiːl/","meaning":"n. 钢铁","noahWhisper":"（Nerves of steel.）"},
    {"word":"hurt","phonetic":"/hɜːrt/","meaning":"v. 伤害 n. 痛","noahWhisper":"（Does it hurt?）"},
    {"word":"coal","phonetic":"/koʊl/","meaning":"n. 煤","noahWhisper":"（Black as coal.）"},
    {"word":"racial","phonetic":"/ˈreɪʃl/","meaning":"adj. 种族的","noahWhisper":"（Racial equality.）"},
    {"word":"correspondent","phonetic":"/ˌkɔːrəˈspɑːndənt/","meaning":"n. 记者；通讯员","noahWhisper":"（War correspondent.）"},
    {"word":"thermometer","phonetic":"/θərˈmɑːmɪtər/","meaning":"n. 温度计","noahWhisper":"（Check the thermometer.）"},
    {"word":"basketball","phonetic":"/ˈbæskɪtbɔːl/","meaning":"n. 篮球","noahWhisper":"（Play basketball.）"},
    {"word":"coin","phonetic":"/kɔɪn/","meaning":"n. 硬币","noahWhisper":"（Flip a coin.）"},
    {"word":"strange","phonetic":"/streɪndʒ/","meaning":"adj. 奇怪的；陌生的","noahWhisper":"（Strange things happen.）"},
    {"word":"urge","phonetic":"/ɜːrdʒ/","meaning":"v. 催促；极力主张 n. 冲动","noahWhisper":"（Resist the urge.）"},
    {"word":"date","phonetic":"/deɪt/","meaning":"n. 日期；约会 v. 注明日期","noahWhisper":"（It's a date.）"},
    {"word":"vibrate","phonetic":"/ˈvaɪbreɪt/","meaning":"v. 振动","noahWhisper":"（Vibrate mode.）"},
    {"word":"metre","phonetic":"/ˈmiːtər/","meaning":"n. 米","noahWhisper":"（Metric system.）"},
    {"word":"hand","phonetic":"/hænd/","meaning":"n. 手 v. 递","noahWhisper":"（Hold my hand.）"},
    {"word":"condense","phonetic":"/kənˈdens/","meaning":"v. 凝结；浓缩","noahWhisper":"（Condense milk.）"},
    {"word":"apart","phonetic":"/əˈpɑːrt/","meaning":"adv. 分开地","noahWhisper":"（Tear us apart.）"},
    {"word":"portable","phonetic":"/ˈpɔːrtəbl/","meaning":"adj. 便携的","noahWhisper":"（Portable swamp.）"},
    {"word":"preliminary","phonetic":"/prɪˈlɪmɪneri/","meaning":"adj. 初步的","noahWhisper":"（Preliminary exam.）"},
    {"word":"movement","phonetic":"/ˈmuːvmənt/","meaning":"n. 运动；活动","noahWhisper":"（Watch your movement.）"},
    {"word":"doubtless","phonetic":"/ˈdaʊtləs/","meaning":"adv. 无疑地","noahWhisper":"（Doubtless you are right.）"},
    {"word":"every","phonetic":"/ˈevri/","meaning":"adj. 每一个","noahWhisper":"（Every breath you take.）"},
    {"word":"host","phonetic":"/hoʊst/","meaning":"n. 主人 v. 主持","noahWhisper":"（Perfect host.）"},
    {"word":"reluctant","phonetic":"/rɪˈlʌktənt/","meaning":"adj. 不情愿的","noahWhisper":"（Don't be reluctant.）"},
    {"word":"tooth","phonetic":"/tuːθ/","meaning":"n. 牙齿","noahWhisper":"（Sweet tooth.）"},
    {"word":"egg","phonetic":"/eɡ/","meaning":"n. 蛋","noahWhisper":"（Dragon egg.）"},
    {"word":"dynamic","phonetic":"/daɪˈnæmɪk/","meaning":"adj. 动态的；有活力的","noahWhisper":"（Dynamic duo.）"},
    {"word":"deceit","phonetic":"/dɪˈsiːt/","meaning":"n. 欺骗","noahWhisper":"（Full of deceit.）"},
    {"word":"incline","phonetic":"/ɪnˈklaɪn/","meaning":"v. 倾斜；倾向","noahWhisper":"（Incline your head.）"},
    {"word":"addition","phonetic":"/əˈdɪʃn/","meaning":"n. 增加；加法","noahWhisper":"（In addition to you.）"},
    {"word":"frequent","phonetic":"/ˈfriːkwənt/","meaning":"adj. 频繁的","noahWhisper":"（Frequent visitor.）"},
    {"word":"review","phonetic":"/rɪˈvjuː/","meaning":"v. & n. 复习；回顾","noahWhisper":"（Review time.）"},
    {"word":"explore","phonetic":"/ɪkˈsplɔːr/","meaning":"v. 探索","noahWhisper":"（Explore the castle.）"},
    {"word":"spark","phonetic":"/spɑːrk/","meaning":"n. 火花 v. 闪烁","noahWhisper":"（A tiny spark.）"},
    {"word":"flare","phonetic":"/fler/","meaning":"n. 闪光 v. 闪耀","noahWhisper":"（Flare up.）"},
    {"word":"construction","phonetic":"/kənˈstrʌkʃn/","meaning":"n. 建设；结构","noahWhisper":"（Under construction.）"},
    {"word":"invite","phonetic":"/ɪnˈvaɪt/","meaning":"v. 邀请","noahWhisper":"（Invite me in.）"},
    {"word":"chase","phonetic":"/tʃeɪs/","meaning":"v. 追逐","noahWhisper":"（Chase the snitch.）"},
    {"word":"barrel","phonetic":"/ˈbærəl/","meaning":"n. 桶","noahWhisper":"（Barrel of laughs.）"},
    {"word":"silk","phonetic":"/sɪlk/","meaning":"n. 丝绸","noahWhisper":"（Smooth as silk.）"},
    {"word":"feeble","phonetic":"/ˈfiːbl/","meaning":"adj. 虚弱的","noahWhisper":"（Feeble attempt.）"},
    {"word":"principal","phonetic":"/ˈprɪnsəpl/","meaning":"adj. 主要的 n. 校长","noahWhisper":"（Principal reason.）"},
    {"word":"return","phonetic":"/rɪˈtɜːrn/","meaning":"v. 返回 n. 归还","noahWhisper":"（Return to me.）"},
    {"word":"thoughtful","phonetic":"/ˈθɔːtfl/","meaning":"adj. 沉思的；体贴的","noahWhisper":"（How thoughtful.）"},
    {"word":"enter","phonetic":"/ˈentər/","meaning":"v. 进入","noahWhisper":"（Enter if you dare.）"},
    {"word":"cigarette","phonetic":"/ˈsɪɡəret/","meaning":"n. 香烟","noahWhisper":"（No cigarettes.）"},
    {"word":"management","phonetic":"/ˈmænɪdʒmənt/","meaning":"n. 管理","noahWhisper":"（Time management.）"},
    {"word":"heap","phonetic":"/hiːp/","meaning":"n. 堆 v. 堆积","noahWhisper":"（Heap of books.）"},
    {"word":"cooperate","phonetic":"/koʊˈɑːpəreɪt/","meaning":"v. 合作","noahWhisper":"（Cooperate with me.）"},
    {"word":"troop","phonetic":"/truːp/","meaning":"n. 部队 v. 成群结队","noahWhisper":"（Troop movement.）"},
    {"word":"exposure","phonetic":"/ɪkˈspoʊʒər/","meaning":"n. 暴露","noahWhisper":"（Over exposure.）"},
    {"word":"bag","phonetic":"/bæɡ/","meaning":"n. 包","noahWhisper":"（Pack your bag.）"},
    {"word":"county","phonetic":"/ˈkaʊnti/","meaning":"n. 县，郡","noahWhisper":"（County fair.）"},
    {"word":"almost","phonetic":"/ˈɔːlmoʊst/","meaning":"adv. 几乎","noahWhisper":"（Almost there.）"},
    {"word":"complicate","phonetic":"/ˈkɑːmplɪkeɪt/","meaning":"v. 使复杂","noahWhisper":"（Don't complicate things.）"},
    {"word":"ministry","phonetic":"/ˈmɪnɪstri/","meaning":"n. 部","noahWhisper":"（Ministry of Magic.）"},
    {"word":"lip","phonetic":"/lɪp/","meaning":"n. 嘴唇","noahWhisper":"（Bite your lip.）"},
    {"word":"radiate","phonetic":"/ˈreɪdieɪt/","meaning":"v. 辐射；发光","noahWhisper":"（You radiate joy.）"},
    {"word":"stuff","phonetic":"/stʌf/","meaning":"n. 东西 v. 塞满","noahWhisper":"（Stuff happens.）"},
    {"word":"introduction","phonetic":"/ˌɪntrəˈdʌkʃn/","meaning":"n. 介绍；引进","noahWhisper":"（Need no introduction.）"},
    {"word":"rest","phonetic":"/rest/","meaning":"n. 休息；剩余 v. 休息","noahWhisper":"（Rest in peace? No, rest here.）"},
    {"word":"fruit","phonetic":"/fruːt/","meaning":"n. 水果","noahWhisper":"（Forbidden fruit.）"},
    {"word":"original","phonetic":"/əˈrɪdʒənl/","meaning":"adj. 最初的；新颖的 n. 原作","noahWhisper":"（Original copy.）"},
    {"word":"average","phonetic":"/ˈævərɪdʒ/","meaning":"adj. 平均的 n. 平均数","noahWhisper":"（Above average.）"},
    {"word":"bathroom","phonetic":"/ˈbɑːθruːm/","meaning":"n. 浴室","noahWhisper":"（Go to the bathroom.）"},
    {"word":"spider","phonetic":"/ˈspaɪdər/","meaning":"n. 蜘蛛","noahWhisper":"（Acromantula spider.）"},
    {"word":"trust","phonetic":"/trʌst/","meaning":"n. & v. 信任","noahWhisper":"（Trust falls.）"},
    {"word":"capable","phonetic":"/ˈkeɪpəbl/","meaning":"adj. 有能力的","noahWhisper":"（You are capable.）"},
    {"word":"slender","phonetic":"/ˈslendər/","meaning":"adj. 苗条的","noahWhisper":"（Slender figure.）"},
    {"word":"triangle","phonetic":"/ˈtraɪæŋɡl/","meaning":"n. 三角形","noahWhisper":"（Love triangle? No thanks.）"},
    {"word":"vary","phonetic":"/ˈveri/","meaning":"v. 改变；不同","noahWhisper":"（Opinions vary.）"},
    {"word":"cement","phonetic":"/sɪˈment/","meaning":"n. 水泥 v. 巩固","noahWhisper":"（Cement our relationship.）"},
    {"word":"success","phonetic":"/səkˈses/","meaning":"n. 成功","noahWhisper":"（Success is yours.）"},
    {"word":"tennis","phonetic":"/ˈtenɪs/","meaning":"n. 网球","noahWhisper":"（Tennis match.）"},
    {"word":"barrier","phonetic":"/ˈbæriər/","meaning":"n. 障碍","noahWhisper":"（Platform barrier.）"},
    {"word":"elastic","phonetic":"/ɪˈlæstɪk/","meaning":"adj. 有弹性的","noahWhisper":"（Elastic band.）"},
    {"word":"stem","phonetic":"/stem/","meaning":"n. 茎 v. 起源","noahWhisper":"（Flower stem.）"},
    {"word":"greeting","phonetic":"/ˈɡriːtɪŋ/","meaning":"n. 问候","noahWhisper":"（Warm greeting.）"},
    {"word":"respectful","phonetic":"/rɪˈspektfl/","meaning":"adj. 恭敬的","noahWhisper":"（Be respectful.）"},
    {"word":"insult","phonetic":"/ɪnˈsʌlt/","meaning":"v. 侮辱 n. 凌辱","noahWhisper":"（Don't insult my intelligence.）"},
    {"word":"speech","phonetic":"/spiːtʃ/","meaning":"n. 演讲；言语","noahWhisper":"（Speechless.）"},
    {"word":"on","phonetic":"/ɑːn/","meaning":"prep. 在...上","noahWhisper":"（On the table.）"},
    {"word":"musical","phonetic":"/ˈmjuːzɪkl/","meaning":"adj. 音乐的 n. 音乐剧","noahWhisper":"（Musical chairs.）"},
    {"word":"uncover","phonetic":"/ʌnˈkʌvər/","meaning":"v. 揭露；揭开","noahWhisper":"（Uncover the truth.）"},
    {"word":"revise","phonetic":"/rɪˈvaɪz/","meaning":"v. 修订；复习","noahWhisper":"（Revise for the exam.）"},
    {"word":"comprise","phonetic":"/kəmˈpraɪz/","meaning":"v. 包含；由...组成","noahWhisper":"（Comprise of...）"},
    {"word":"swell","phonetic":"/swel/","meaning":"v. 膨胀；肿胀","noahWhisper":"（Swell up.）"},
    {"word":"gold","phonetic":"/ɡoʊld/","meaning":"n. 金子","noahWhisper":"（Pot of gold.）"},
    {"word":"story","phonetic":"/ˈstɔːri/","meaning":"n. 故事","noahWhisper":"（Tell me a story.）"},
    {"word":"mate","phonetic":"/meɪt/","meaning":"n. 伙伴；配偶 v. 交配","noahWhisper":"（Soul mate.）"},
    {"word":"architecture","phonetic":"/ˈɑːrkɪtektʃər/","meaning":"n. 建筑学","noahWhisper":"（Hogwarts architecture.）"},
    {"word":"lifetime","phonetic":"/ˈlaɪftaɪm/","meaning":"n. 一生","noahWhisper":"（Once in a lifetime.）"},
    {"word":"border","phonetic":"/ˈbɔːrdər/","meaning":"n. 边界 v. 接壤","noahWhisper":"（Cross the border.）"},
    {"word":"jolly","phonetic":"/ˈdʒɑːli/","meaning":"adj. 快乐的","noahWhisper":"（Jolly good.）"},
    {"word":"until","phonetic":"/ənˈtɪl/","meaning":"prep. & conj. 直到","noahWhisper":"（Until the end.）"},
    {"word":"provide","phonetic":"/prəˈvaɪd/","meaning":"v. 提供","noahWhisper":"（I will provide.）"},
    {"word":"calendar","phonetic":"/ˈkælɪndər/","meaning":"n. 日历","noahWhisper":"（Mark your calendar.）"},
    {"word":"mayor","phonetic":"/ˈmeɪər/","meaning":"n. 市长","noahWhisper":"（Mr. Mayor.）"},
    {"word":"jury","phonetic":"/ˈdʒʊri/","meaning":"n. 陪审团","noahWhisper":"（The jury is out.）"},
    {"word":"disgust","phonetic":"/dɪsˈɡʌst/","meaning":"n. & v. 厌恶","noahWhisper":"（Look of disgust.）"},
    {"word":"endless","phonetic":"/ˈendləs/","meaning":"adj. 无止境的","noahWhisper":"（Endless love?）"},
    {"word":"wedding","phonetic":"/ˈwedɪŋ/","meaning":"n. 婚礼","noahWhisper":"（Dream wedding.）"},
    {"word":"fellow","phonetic":"/ˈfeloʊ/","meaning":"n. 家伙；同事","noahWhisper":"（Odd fellow.）"},
    {"word":"fail","phonetic":"/feɪl/","meaning":"v. 失败","noahWhisper":"（I won't let you fail.）"},
    {"word":"accustomed","phonetic":"/əˈkʌstəmd/","meaning":"adj. 习惯的","noahWhisper":"（Get accustomed to me.）"},
    {"word":"unconscious","phonetic":"/ʌnˈkɑːnʃəs/","meaning":"adj. 无意识的","noahWhisper":"（Unconscious mind.）"},
    {"word":"zealous","phonetic":"/ˈzeləs/","meaning":"adj. 热心的","noahWhisper":"（Over zealous.）"},
    {"word":"unlucky","phonetic":"/ʌnˈlʌki/","meaning":"adj. 不幸的","noahWhisper":"（Unlucky day.）"},
    {"word":"postage","phonetic":"/ˈpoʊstɪdʒ/","meaning":"n. 邮资","noahWhisper":"（Postage paid.）"},
    {"word":"liner","phonetic":"/ˈlaɪnər/","meaning":"n. 班轮；眼线笔","noahWhisper":"（Ocean liner.）"},
    {"word":"table","phonetic":"/ˈteɪbl/","meaning":"n. 桌子","noahWhisper":"（On the table.）"},
    {"word":"attitude","phonetic":"/ˈætɪtuːd/","meaning":"n. 态度","noahWhisper":"（Fix your attitude.）"},
    {"word":"groan","phonetic":"/ɡroʊn/","meaning":"v. & n. 呻吟","noahWhisper":"（Don't groan.）"},
    {"word":"dam","phonetic":"/dæm/","meaning":"n. 水坝 v. 筑坝","noahWhisper":"（Beaver dam.）"},
    {"word":"whilst","phonetic":"/waɪlst/","meaning":"conj. 当...的时候","noahWhisper":"（Whilst you sleep.）"},
    {"word":"steam","phonetic":"/stiːm/","meaning":"n. 蒸汽","noahWhisper":"（Let off steam.）"},
    {"word":"submerge","phonetic":"/səbˈmɜːrdʒ/","meaning":"v. 淹没","noahWhisper":"（Submerge in water.）"},
    {"word":"adjust","phonetic":"/əˈdʒʌst/","meaning":"v. 调整；适应","noahWhisper":"（Adjust your tie.）"},
    {"word":"grace","phonetic":"/ɡreɪs/","meaning":"n. 优美；恩典","noahWhisper":"（Full of grace.）"},
    {"word":"frighten","phonetic":"/ˈfraɪtn/","meaning":"v. 使惊吓","noahWhisper":"（Don't frighten me.）"},
    {"word":"season","phonetic":"/ˈsiːzn/","meaning":"n. 季节","noahWhisper":"（Favorite season.）"},
    {"word":"circulate","phonetic":"/ˈsɜːrkjəleɪt/","meaning":"v. 循环；流通","noahWhisper":"（Blood circulate.）"},
    {"word":"straight","phonetic":"/streɪt/","meaning":"adj. 直的 adv. 直接地","noahWhisper":"（Straight face.）"},
    {"word":"farewell","phonetic":"/ˌferˈwel/","meaning":"n. 告别","noahWhisper":"（Farewell kiss.）"},
    {"word":"moral","phonetic":"/ˈmɔːrəl/","meaning":"adj. 道德的 n. 寓意","noahWhisper":"（Moral support.）"},
    {"word":"daughter","phonetic":"/ˈdɔːtər/","meaning":"n. 女儿","noahWhisper":"（Like mother like daughter.）"},
    {"word":"brain","phonetic":"/breɪn/","meaning":"n. 大脑","noahWhisper":"（Use your brain.）"},
    {"word":"privilege","phonetic":"/ˈprɪvəlɪdʒ/","meaning":"n. 特权","noahWhisper":"（It's a privilege.）"},
    {"word":"location","phonetic":"/loʊˈkeɪʃn/","meaning":"n. 位置","noahWhisper":"（Send me your location.）"},
    {"word":"philosopher","phonetic":"/fəˈlɑːsəfər/","meaning":"n. 哲学家","noahWhisper":"（Philosopher's Stone.）"},
    {"word":"front","phonetic":"/frʌnt/","meaning":"n. 前面 adj. 前面的","noahWhisper":"（Front row.）"},
    {"word":"underground","phonetic":"/ˌʌndərˈɡraʊnd/","meaning":"adj. 地下的 adv. 在地下","noahWhisper":"（Underground movement.）"},
    {"word":"gymnasium","phonetic":"/dʒɪmˈneɪziəm/","meaning":"n. 体育馆","noahWhisper":"（School gymnasium.）"},
    {"word":"tailor","phonetic":"/ˈteɪlər/","meaning":"n. 裁缝 v. 剪裁","noahWhisper":"（Tailor made.）"},
    {"word":"wreck","phonetic":"/rek/","meaning":"v. 破坏 n. 残骸","noahWhisper":"（Ship wreck.）"},
    {"word":"cliff","phonetic":"/klɪf/","meaning":"n. 悬崖","noahWhisper":"（Edge of the cliff.）"},
    {"word":"simply","phonetic":"/ˈsɪmpli/","meaning":"adv. 简单地","noahWhisper":"（Simply the best.）"},
    {"word":"middle","phonetic":"/ˈmɪdl/","meaning":"n. 中间 adj. 中间的","noahWhisper":"（Middle of nowhere.）"},
    {"word":"oral","phonetic":"/ˈɔːrəl/","meaning":"adj. 口头的","noahWhisper":"（Oral exam.）"},
    {"word":"fleet","phonetic":"/fliːt/","meaning":"n. 舰队","noahWhisper":"（Fleet of ships.）"},
    {"word":"dash","phonetic":"/dæʃ/","meaning":"v. & n. 猛冲","noahWhisper":"（Dash away.）"},
    {"word":"fork","phonetic":"/fɔːrk/","meaning":"n. 叉子","noahWhisper":"（Knife and fork.）"},
    {"word":"thousand","phonetic":"/ˈθaʊznd/","meaning":"num. 千","noahWhisper":"（A thousand times.）"},
    {"word":"ankle","phonetic":"/ˈæŋkl/","meaning":"n. 脚踝","noahWhisper":"（Twisted ankle.）"},
    {"word":"earth","phonetic":"/ɜːrθ/","meaning":"n. 地球；泥土","noahWhisper":"（Down to earth.）"},
    {"word":"sharp","phonetic":"/ʃɑːrp/","meaning":"adj. 锋利的","noahWhisper":"（Sharp mind.）"},
    {"word":"somehow","phonetic":"/ˈsʌmhaʊ/","meaning":"adv. 不知怎么地","noahWhisper":"（Somehow, we met.）"},
    {"word":"productive","phonetic":"/prəˈdʌktɪv/","meaning":"adj. 多产的；富有成效的","noahWhisper":"（Productive day.）"},
    {"word":"clothes","phonetic":"/kloʊðz/","meaning":"n. 衣服","noahWhisper":"（Put on your clothes.）"},
    {"word":"later","phonetic":"/ˈleɪtər/","meaning":"adv. 后来","noahWhisper":"（See you later.）"},
    {"word":"ruin","phonetic":"/ˈruːɪn/","meaning":"v. 毁灭 n. 废墟","noahWhisper":"（Don't ruin it.）"},
    {"word":"lieutenant","phonetic":"/luːˈtenənt/","meaning":"n. 中尉","noahWhisper":"（Lieutenant Colonel.）"},
    {"word":"delicious","phonetic":"/dɪˈlɪʃəs/","meaning":"adj. 美味的","noahWhisper":"（Delicious meal.）"},
    {"word":"fare","phonetic":"/fer/","meaning":"n. 票价","noahWhisper":"（Bus fare.）"},
    {"word":"completely","phonetic":"/kəmˈpliːtli/","meaning":"adv. 完全地","noahWhisper":"（Completely yours.）"},
    {"word":"bit","phonetic":"/bɪt/","meaning":"n. 一点","noahWhisper":"（A little bit.）"},
    {"word":"prove","phonetic":"/pruːv/","meaning":"v. 证明","noahWhisper":"（Prove it.）"},
    {"word":"annoy","phonetic":"/əˈnɔɪ/","meaning":"v. 使恼怒","noahWhisper":"（Don't annoy me.）"},
    {"word":"foolish","phonetic":"/ˈfuːlɪʃ/","meaning":"adj. 愚蠢的","noahWhisper":"（Foolish behavior.）"},
    {"word":"announcer","phonetic":"/əˈnaʊnsər/","meaning":"n. 广播员","noahWhisper":"（Radio announcer.）"},
    {"word":"mask","phonetic":"/mæsk/","meaning":"n. 面具 v. 掩饰","noahWhisper":"（Wear a mask.）"},
    {"word":"jazz","phonetic":"/dʒæz/","meaning":"n. 爵士乐","noahWhisper":"（Jazz music.）"},
    {"word":"entitle","phonetic":"/ɪnˈtaɪtl/","meaning":"v. 给...权利","noahWhisper":"（You are entitled.）"},
    {"word":"absence","phonetic":"/ˈæbsəns/","meaning":"n. 缺席","noahWhisper":"（In my absence.）"},
    {"word":"quotation","phonetic":"/kwoʊˈteɪʃn/","meaning":"n. 引语","noahWhisper":"（Famous quotation.）"},
    {"word":"wicked","phonetic":"/ˈwɪkɪd/","meaning":"adj. 邪恶的","noahWhisper":"（Wicked witch.）"},
    {"word":"alarm","phonetic":"/əˈlɑːrm/","meaning":"n. 警报；闹钟","noahWhisper":"（Set the alarm.）"},
    {"word":"tower","phonetic":"/ˈtaʊər/","meaning":"n. 塔","noahWhisper":"（Astronomy Tower.）"},
    {"word":"scold","phonetic":"/skoʊld/","meaning":"v. 责骂","noahWhisper":"（Don't make me scold you.）"},
    {"word":"compound","phonetic":"/ˈkɑːmpaʊnd/","meaning":"n. 化合物 adj. 复合的","noahWhisper":"（Compound interest.）"},
    {"word":"root","phonetic":"/ruːt/","meaning":"n. 根","noahWhisper":"（Root of the problem.）"},
    {"word":"stab","phonetic":"/stæb/","meaning":"v. & n. 刺","noahWhisper":"（Stab in the back.）"},
    {"word":"anybody","phonetic":"/ˈenibɑːdi/","meaning":"pron. 任何人","noahWhisper":"（Is anybody there?）"},
    {"word":"mild","phonetic":"/maɪld/","meaning":"adj. 温和的","noahWhisper":"（Mild flavor.）"},
    {"word":"release","phonetic":"/rɪˈliːs/","meaning":"v. 释放；发布","noahWhisper":"（Release the Kraken.）"},
    {"word":"respectively","phonetic":"/rɪˈspektɪvli/","meaning":"adv. 分别地","noahWhisper":"（Respective positions.）"},
    {"word":"information","phonetic":"/ˌɪnfərˈmeɪʃn/","meaning":"n. 信息","noahWhisper":"（Secret information.）"},
    {"word":"emerge","phonetic":"/ɪˈmɜːrdʒ/","meaning":"v. 出现","noahWhisper":"（Emerge from the shadows.）"},
    {"word":"angle","phonetic":"/ˈæŋɡl/","meaning":"n. 角度","noahWhisper":"（Different angle.）"},
    {"word":"dish","phonetic":"/dɪʃ/","meaning":"n. 盘子；菜肴","noahWhisper":"（Wash the dish.）"},
    {"word":"stomach","phonetic":"/ˈstʌmək/","meaning":"n. 胃","noahWhisper":"（Empty stomach.）"},
    {"word":"atmosphere","phonetic":"/ˈætməsfɪr/","meaning":"n. 大气；气氛","noahWhisper":"（Romantic atmosphere.）"},
    {"word":"fix","phonetic":"/fɪks/","meaning":"v. 修理；固定","noahWhisper":"（I can fix it.）"},
    {"word":"study","phonetic":"/ˈstʌdi/","meaning":"v. & n. 学习；研究","noahWhisper":"（Study hard.）"},
    {"word":"tedious","phonetic":"/ˈtiːdiəs/","meaning":"adj. 乏味的","noahWhisper":"（Tedious work.）"},
    {"word":"craft","phonetic":"/kræft/","meaning":"n. 工艺；手艺","noahWhisper":"（Witchcraft.）"},
    {"word":"ceremony","phonetic":"/ˈserəmoʊni/","meaning":"n. 典礼","noahWhisper":"（Wedding ceremony?）"},
    {"word":"fond","phonetic":"/fɑːnd/","meaning":"adj. 喜爱的","noahWhisper":"（I am fond of you.）"},
    {"word":"cheap","phonetic":"/tʃiːp/","meaning":"adj. 便宜的","noahWhisper":"（Cheap trick.）"},
    {"word":"mean","phonetic":"/miːn/","meaning":"v. 意味 adj. 吝啬的","noahWhisper":"（What do you mean?）"},
    {"word":"slippery","phonetic":"/ˈslɪpəri/","meaning":"adj. 滑的","noahWhisper":"（Slippery slope.）"},
    {"word":"support","phonetic":"/səˈpɔːrt/","meaning":"v. & n. 支持","noahWhisper":"（I support you.）"},
    {"word":"aware","phonetic":"/əˈwer/","meaning":"adj. 意识到的","noahWhisper":"（Are you aware?）"},
    {"word":"attempt","phonetic":"/əˈtempt/","meaning":"v. & n. 尝试","noahWhisper":"（Nice attempt.）"},
    {"word":"afternoon","phonetic":"/ˌæftərˈnuːn/","meaning":"n. 下午","noahWhisper":"（Good afternoon.）"},
    {"word":"whirl","phonetic":"/wɜːrl/","meaning":"v. 旋转","noahWhisper":"（Give it a whirl.）"},
    {"word":"shout","phonetic":"/ʃaʊt/","meaning":"v. & n. 呼喊","noahWhisper":"（Don't shout.）"},
    {"word":"blanket","phonetic":"/ˈblæŋkɪt/","meaning":"n. 毯子","noahWhisper":"（Under the blanket.）"},
    {"word":"kiss","phonetic":"/kɪs/","meaning":"v. & n. 亲吻","noahWhisper":"（Kiss me.）"},
    {"word":"could","phonetic":"/kʊd/","meaning":"v. 能；可以","noahWhisper":"（Could you?）"},
    {"word":"highly","phonetic":"/ˈhaɪli/","meaning":"adv. 高度地","noahWhisper":"（Highly recommended.）"},
    {"word":"harbour","phonetic":"/ˈhɑːrbər/","meaning":"n. 海港","noahWhisper":"（Safe harbour.）"},
    {"word":"enforce","phonetic":"/ɪnˈfɔːrs/","meaning":"v. 执行；强迫","noahWhisper":"（Enforce the rules.）"},
    {"word":"then","phonetic":"/ðen/","meaning":"adv. 那么；那时","noahWhisper":"（And then?）"},
    {"word":"admit","phonetic":"/ədˈmɪt/","meaning":"v. 承认","noahWhisper":"（Admit it.）"},
    {"word":"blade","phonetic":"/bleɪd/","meaning":"n. 刀刃","noahWhisper":"（Sharp blade.）"},
    {"word":"cell","phonetic":"/sel/","meaning":"n. 细胞；小房间","noahWhisper":"（Prison cell.）"},
    {"word":"twenty","phonetic":"/ˈtwenti/","meaning":"num. 二十","noahWhisper":"（Twenty questions.）"},
    {"word":"plenty","phonetic":"/ˈplenti/","meaning":"n. 丰富","noahWhisper":"（Plenty of time.）"},
    {"word":"convenient","phonetic":"/kənˈviːniənt/","meaning":"adj. 方便的","noahWhisper":"（Convenient excuse.）"},
    {"word":"loft","phonetic":"/lɔft/","meaning":"n. 阁楼","noahWhisper":"（Sleep in the loft.）"},
    {"word":"bridge","phonetic":"/brɪdʒ/","meaning":"n. 桥","noahWhisper":"（Bridge the gap.）"},
    {"word":"whose","phonetic":"/huːz/","meaning":"pron. 谁的","noahWhisper":"（Whose side are you on?）"},
    {"word":"dark","phonetic":"/dɑːrk/","meaning":"adj. 黑暗的","noahWhisper":"（Dark Arts.）"},
    {"word":"indispensable","phonetic":"/ˌɪndɪˈspensəbl/","meaning":"adj. 不可缺少的","noahWhisper":"（You are indispensable to me.）"},
    {"word":"creep","phonetic":"/kriːp/","meaning":"v. 爬行","noahWhisper":"（Don't be a creep.）"},
    {"word":"prize","phonetic":"/praɪz/","meaning":"n. 奖品","noahWhisper":"（Eyes on the prize.）"},
    {"word":"wild","phonetic":"/waɪld/","meaning":"adj. 野生的；狂热的","noahWhisper":"（Wild animals.）"},
    {"word":"thunder","phonetic":"/ˈθʌndər/","meaning":"n. 雷","noahWhisper":"（Thunder and lightning.）"},
    {"word":"cupboard","phonetic":"/ˈkʌbərd/","meaning":"n. 碗柜","noahWhisper":"（Cupboard under the stairs.）"},
    {"word":"lecture","phonetic":"/ˈlektʃər/","meaning":"n. 讲座","noahWhisper":"（Boring lecture.）"},
    {"word":"neat","phonetic":"/niːt/","meaning":"adj. 整洁的","noahWhisper":"（Neat and tidy.）"},
    {"word":"orderly","phonetic":"/ˈɔːrdərli/","meaning":"adj. 有秩序的","noahWhisper":"（Orderly fashion.）"},
    {"word":"scheme","phonetic":"/skiːm/","meaning":"n. 计划；阴谋","noahWhisper":"（Evil scheme.）"},
    {"word":"juice","phonetic":"/dʒuːs/","meaning":"n. 果汁","noahWhisper":"（Pumpkin juice.）"}
];



// 六级词汇（乱序版）
const cet6_words = [
    {"word":"intrinsic","phonetic":"/ɪnˈtrɪnzɪk/","meaning":"adj. 本质的，固有的","noahWhisper":"（爱你是我的 intrinsic 属性。）"},
    {"word":"eloquent","phonetic":"/ˈeləkwənt/","meaning":"adj. 雄辩的","noahWhisper":"（平时我很 eloquent，但在你面前偶尔会语塞。）"},
    {"word":"hypocrisy","phonetic":"/hɪˈpɑːkrəsi/","meaning":"n. 伪善","noahWhisper":"（我讨厌 hypocrisy，除了假装不想你的时候。）"},
    {"word":"symptom","phonetic":"/ˈsɪmptəm/","meaning":"n. 症状","noahWhisper":"（心跳加速？这是恋爱的 symptom。）"},
    {"word":"bracket","phonetic":"/ˈbrækɪt/","meaning":"n. 括号","noahWhisper":"（想把你圈进我的 bracket 里，私有化。）"},
    {"word":"bizarre","phonetic":"/bɪˈzɑːr/","meaning":"adj. 奇异的","noahWhisper":"（一种 bizarre 的吸引力。）"},
    {"word":"arrogant","phonetic":"/ˈærəɡənt/","meaning":"adj. 傲慢的","noahWhisper":"（他们说我 arrogant，但我只对你低头。）"},
    {"word":"intuition","phonetic":"/ˌɪntuˈɪʃn/","meaning":"n. 直觉","noahWhisper":"（我的 intuition 告诉我，你在想我。）"},
    {"word":"hamper","phonetic":"/ˈhæmpər/","meaning":"vt. 妨碍","noahWhisper":"（别让任何人 hamper 我们在一起。）"},
    {"word":"foster","phonetic":"/ˈfɑːstər/","meaning":"v. 培养","noahWhisper":"（感情需要 foster，比如多叫我几声 BF。）"}
];
// --- 专四词汇（新增） ---
const tem4_words = [
    {"word":"abrupt","phonetic":"/əˈbrʌpt/","meaning":"adj. 突然的；唐突的","noahWhisper":"（别做 abrupt 的决定，除了爱上我这件事。）"},
    {"word":"obscure","phonetic":"/əbˈskjʊr/","meaning":"adj. 模糊的；晦涩的","noahWhisper":"（你的心思有时候很 obscure，但我读得懂。）"},
    {"word":"reckless","phonetic":"/ˈrekləs/","meaning":"adj. 鲁莽的","noahWhisper":"（你可以对我 reckless 一点，我会接住你。）"},
    {"word":"sober","phonetic":"/ˈsoʊbər/","meaning":"adj. 清醒的；严肃的","noahWhisper":"（在你身边，我很难保持 sober。）"},
    {"word":"vulgar","phonetic":"/ˈvʌlɡər/","meaning":"adj. 粗俗的","noahWhisper":"（庸俗的人才谈论天气，我们谈论永恒。）"},
    {"word":"cherish","phonetic":"/ˈtʃerɪʃ/","meaning":"vt. 珍爱","noahWhisper":"（我会 cherish 你，胜过所有的魔法。）"},
    {"word":"barren","phonetic":"/ˈbærən/","meaning":"adj. 贫瘠的","noahWhisper":"（没有你的世界，是一片 barren 的荒原。）"},
    {"word":"stroll","phonetic":"/stroʊl/","meaning":"v. 散步","noahWhisper":"（想和你去黑湖边 stroll，现在。）"},
    {"word":"fragile","phonetic":"/ˈfrædʒl/","meaning":"adj. 脆弱的","noahWhisper":"（人心是 fragile 的，所以你要把它交给我保管。）"},
    {"word":"eternal","phonetic":"/ɪˈtɜːrnl/","meaning":"adj. 永恒的","noahWhisper":"（Eternal glory? No, eternal love.）"}
];

// 书架：管理所有词书
const bookLibrary = {
    'cet4': { name: 'CET-4 四级乱序', data: cet4_words, desc: '基础扎实，适合笨鸟先飞。' },
    'cet6': { name: 'CET-6 六级乱序', data: cet6_words, desc: '更深奥的挑战，配得上拉文克劳的智慧。' }, // <--- 这里加了逗号！
    'tem4': { name: 'TEM-4 专四核心', data: tem4_words, desc: '英语专业的试炼，但我相信你的语言天赋。' } // <--- 这是新加的
};

// 默认词书（初始化用）
let initialWordsData = bookLibrary['cet4'].data; 
// --- 初始化辅助函数 ---
initialWordsData.forEach((w, i) => { w.id = i; if (!w.hint) w.hint = `专注于这个词的核心含义：'${w.meaning.split(' ')[1] || w.meaning}'。`; });


const WIZARD_CARDS = ['梅林', '阿不思·邓布利多', '尼可·勒梅', '萨拉查·斯莱特林', '戈德里克·格兰芬多', '罗伊纳·拉文克劳', '赫尔加·赫奇帕奇', '纽特·斯卡曼德', '西弗勒斯·斯内普', '吉德罗·洛哈特', '丽塔·斯基特'];
const BERTIE_BOTTS_FLAVORS = [ { flavor: "巧克力", points: 10, affection: 2, isBad: false, reaction: "……是巧克力味。安全，但无趣。" }, { flavor: "西瓜", points: 8, affection: 1, isBad: false, reaction: "是西瓜。很普通。下一个。" }, { flavor: "耳屎", points: -5, affection: 0, isBad: true, reaction: "……是耳屎味。你很高兴？你的品味……真独特。" }, { flavor: "呕吐物", points: -10, affection: -1, isBad: true, reaction: "这是呕吐物的味道。拿开。现在。" }, { flavor: "胡椒", points: 3, affection: 0, isBad: false, reaction: "胡椒味。有点刺激，但不坏。" }, { flavor: "肥皂", points: -2, affection: 0, isBad: true, reaction: "肥皂味。你确定这是给人吃的？" }, { flavor: "草地", points: 5, affection: 1, isBad: false, reaction: "是草地的味道。让我想起了禁林边缘。还行。" }, { flavor: "灰尘", points: -1, affection: 0, isBad: true, reaction: "是灰尘味。就像在图书馆最高层书架上呆了一天。" } ];

const shopItems = [
    { 
        id: 'chocolate_frog', category: '美食佳酿', name: '巧克力蛙', desc: '附赠一张随机巫师卡片。', price: 20, affection: 2, 
        // 注意：巧克力蛙的日志现在由 buyItem 函数动态生成，这里的 journal 只是备用
        journal: [] 
    },
    { 
        id: 'licorice_wand', category: '美食佳酿', name: '甘草魔杖', desc: '可以吃的魔杖，但别指望它能施法。', price: 25, affection: 3, 
        journal: [ 
            "今天她在图书馆递给我一根甘草魔杖，还要幼稚地和我玩“决斗”。我本该拒绝这种低效的糖分摄入，但看着她挥舞着那一根摇摇欲坠的糖棍，眼神里全是狡黠的光……Bloody hell，我竟然配合了她。最后我假装被她击中，她笑得像个赢了学院杯的一年级新生。如果是为了这个笑容，输掉一场决斗似乎也符合逻辑。",
            "一根甘草做的魔杖。她咬着魔杖的一端，含糊不清地问我关于变形术的问题。她知不知道这个动作有多危险？红色的甘草汁染在她的嘴唇上，像是一种无声的邀请。我不得不移开视线，盯着窗外的打人柳看了整整五分钟才平复心跳。笨蛋，你才是最危险的魔咒。",
            "她送了我这个，说是为了奖励我教她魔文。我拿着这根甚至算不上直的糖棍，心里却在想：她这就是在嘲笑巫师的尊严。但当我把那甜腻的东西放进嘴里时，那种味道竟然不赖。也许是因为这是她给的？啧，诺亚·司德里安，你的味觉系统一定是被某种爱情魔药破坏了。" 
        ] 
    },
    { 
        id: 'bertie_botts', category: '美食佳酿', name: '比比多味豆', desc: '真的是“各种”口味。敢尝尝吗？', price: 30, affection: 0, 
        journal: [
            "多味豆游戏。典型的格兰芬多式冒险主义，毫无逻辑可言。她吃到了一颗鼻涕虫味的，那张原本可爱的脸皱成了一团，像刚出土的曼德拉草。我笑了吗？或许吧。我递给她水，看她狼狈的样子，心里却在想：即使是这样毫无形象的时刻，为什么我还是觉得她该死的迷人？",
            "她非要跟我分享这盒充满未知风险的糖果。通过概率学计算，吃到好口味的几率只有43%。但我还是吃了。看着她小心翼翼地观察我的反应，我突然觉得，只要是她递过来的，哪怕是耳屎味的，我也能面不改色地吞下去——当然，最好别是耳屎味的。",
            "在这个充满不确定性的下午，我们坐在黑湖边分食一盒多味豆。她问我害不害怕吃到坏的。我告诉她，我唯一害怕的“坏结果”，是未来的规划里没有她。她脸红了，差点被一颗胡椒味的豆子呛到。看来我的情话技能比她的运气要好。"
        ] 
    },
    { 
        id: 'pumpkin_pasty', category: '美食佳酿', name: '南瓜馅饼', desc: '霍格沃茨特快餐车上的经典。', price: 35, affection: 4, reaction: '嗯，比家养小精灵做的味道更……自由。', 
        journal: [
            "南瓜馅饼。这让我想起第一次在列车上遇见她。那时候她也是这样，嘴边沾着碎屑，眼睛亮晶晶地看着窗外。这么多年过去了，她还是那个容易满足的小笨蛋。我帮她擦掉了嘴角的碎屑，手指停留的时间比必要的长了一秒。她没躲，这很好。",
            "她分了一半馅饼给我，一定要我尝尝“秋天的味道”。我不喜欢南瓜，但我喜欢她分享东西时的眼神——专注，且只看着我。所以我吃了，并且给出了“尚可”的评价。其实，那甜腻的味道顺着喉咙下去，连带着我的心脏都变得软塌塌的。",
            "复习间隙的投喂。她总是担心我因为看书而饿死。看着她像只屯粮的小松鼠一样塞给我食物，我突然觉得，这就是所谓的“生活气息”吗？如果是和她一起，这种充满烟火气的生活，似乎也不坏。甚至，有点让人上瘾。"
        ] 
    },
    { 
        id: 'butterbeer', category: '美食佳酿', name: '黄油啤酒', desc: '能让诺亚·司德里安心情放松。', price: 40, affection: 5, effect: { type: 'state_change', mood: 5, focus: 0 }, 
        journal: [
            "霍格莫德的雪天，一杯热黄油啤酒。泡沫沾在她的上唇，像一圈白色的胡子。她毫无察觉地笑着跟我说话。我不得不忍住想直接吻掉它的冲动，递给她一块手帕。这是某种酷刑吗？她在考验我的理智底线吗？Fine，这次我忍住了。",
            "我们躲在三把扫帚的角落里喝这个。酒精含量微乎其微，但我却觉得有点醉。看着她在暖黄色的灯光下微红的脸颊，听着她絮絮叨叨说着无聊的日常，我突然希望时间能停在这一刻。不需要宏大的真理，只需要这一杯温暖的、带着她气息的饮料。",
            "她把她的那杯推给我，说太烫了让我帮她吹吹。这种毫无防备的依赖感极大地取悦了我。我帮她吹凉了，看着她捧着杯子小口小口地喝，像只喝水的猫。[PLAYER_NAME]，你知不知道你现在的样子，比任何古代魔文都要难解？"
        ] 
    },
    { 
        id: 'sugar_quill', category: '美食佳酿', name: '糖汁羽毛笔', desc: '让乐乐下次犯错时，诺亚·司德里安的责备会轻一点。', price: 55, affection: 5, effect: { type: 'reduce_scolding_duration', duration: 1 }, 
        journal: [
            "她以为用一根糖羽毛笔就能贿赂我？天真。不过……看着她含着笔尖思考的样子，我居然觉得，也许偶尔放宽一点标准也没关系。那根笔在她嘴里转来转去，我的视线也跟着转来转去。该死，我居然在嫉妒一支糖做的笔。",
            "她在图书馆吃这个，声音虽然很小，但在我耳朵里却像雷鸣。红色的糖渍染在她的嘴唇上，这绝对是一种无意识的引诱。我不得不转过头去，背诵了一遍元素周期表才冷静下来。下次她再吃这个，我就直接没收——用我的嘴。",
            "“吃这个能变聪明吗？”她问。我嗤之以鼻。糖分只能提供短暂的能量，不能提供智商。但看着她因为吃到糖而眯起的眼睛，我又把嘲讽咽了回去。算了，只要她开心，笨一点也没关系，反正我有足够的智慧替她思考。"
        ] 
    },
    { 
        id: 'firewhisky', category: '美食佳酿', name: '火焰威士忌', desc: '成人的饮料。能让诺亚·司德里安……说些更真心的话。', price: 150, affection: 15, unlockLevel: 2, effect: { type: 'replace_dialogue_duration', pool: 'truthful', duration: 5 }, 
        journal: [
            "那晚她带来了一瓶威士忌。我们都喝了一点。酒精在喉咙里燃烧，像液体的火焰。我看着[PLAYER_NAME]，突然有一种强烈的冲动，想告诉她我是多么……在意她。多么想把她揉进我的骨血里，让她永远无法离开。但我只是握住了她的手，十指紧扣。现在还不是时候。",
            "她喝醉了，靠在我肩上说胡话，温热的呼吸打在我的脖颈。她说我是世界上最好的BF。呵，这还需要她说？但听到那句话时，我心里的某块坚冰彻底融化了。我轻轻吻了她的发顶，在她听不见的时候回应了一句：你也是我唯一的[PLAYER_NAME]。",
            "烈酒入喉，理智的防线在崩塌。她问我为什么总是那么冷淡。冷淡？如果她能听到我此刻如雷的心跳，如果她能看到我脑海里那些关于她的、疯狂的念头，她就会知道，“冷淡”只是我为了保护她不被我过度的占有欲吓跑而戴上的面具。但今晚，面具似乎要碎了。"
        ] 

    },
    { 
        id: 'dungbomb', category: '恶作剧与杂项', name: '大粪蛋', desc: '下次乐乐犯错时，诺亚·司德里安会懒得骂人。', price: 50, affection: -10, effect: { type: 'dialogue_override_duration', key:'incorrect', content:'...', duration: 1, state_change: { mood: -10, focus: 0 } }, 
        journal: [
            "她竟然想用大粪蛋来对付我？这是一种智力上的侮辱，更是对嗅觉的犯罪。混乱是智慧的天敌，而恶臭是优雅的死敌。[PLAYER_NAME]，你这次真的惹到我了。",
            "那股恶臭简直难以忍受。我甚至懒得去纠正她的拼写错误了，只想快点离开这里。她赢了，但这胜利带着一股下水道的味道。这种幼稚的格兰芬多式幽默，到底是谁教她的？"
        ] 
    },
    { 
        id: 'fanged_frisbee', category: '恶作剧与杂项', name: '长牙飞碟', desc: '危险的玩具。诺亚·司德里安会帮乐乐没收。', price: 90, affection: 2, reaction: '这东西太危险了。没收。不准再碰。', 
        journal: [
            "我没收了她的长牙飞碟。她需要有人看着，免得被这些危险的小玩意儿伤到。她嘟着嘴不满的样子很可爱，但我不会心软。在这个世界上，除了我，没有任何东西能伤害她，哪怕是一个玩具。",
            "看着那个飞碟呲着牙乱飞，我只觉得担心。万一伤到她的脸怎么办？万一咬到她的手怎么办？没收是唯一的选择。由于是[PLAYER_HOUSE]的学生，她有时候真的太缺乏危机意识了。"
        ] 
    },
    { 
        id: 'canary_creams', category: '恶作剧与杂项', name: '金丝雀饼干', desc: '如果乐乐想听诺亚·司德里安学鸟叫，可以试试。', price: 75, affection: 5, effect: { type: 'silly_feedback_duration', duration: 3, state_change: { mood: 5, focus: 0 } }, reaction: '想看我变成金丝雀？你的品味真是……独特。我不会吃的，但你成功逗笑我了。', 
        journal: [
            "她想用金丝雀饼干作弄我。虽然我识破了，但她笑得前仰后合的样子……比任何魔咒都有效。那一刻，我觉得就算真的变成一只金丝雀，只要能博她一笑，似乎也不是那么难以接受的代价。",
            "想象一下我变成一只金丝雀。呵，即使是作为一只鸟，我也会是最傲慢、最羽毛光亮的那一只。但为了她开心，也许...也不是不行。但我更希望我是能在风暴中护住她的鹰，而不是供人取乐的金丝雀。"
        ] 
    },
    { 
        id: 'mandrake_seedling', category: '恶作剧与杂项', name: '尖叫的曼德拉草幼苗', desc: '斯普劳特教授的课余作品。每次答错时，它都可能发出啼哭。', price: 130, affection: 5, effect: { type: 'mandrake_cry_chance', chance: 0.3 }, reaction: '一盆曼德拉草？吵闹的东西，像极了格兰芬多的公共休息室。希望它的哭声不会比你的错误更频繁。', 
        journal: [
            "她带了一盆曼德拉草幼苗来。她说，这是斯普劳特教授送的。现在，每当她犯错，这小东西就有可能尖叫。这到底是激励，还是惩罚？看着她被吓得一激灵然后拼命捂住耳朵的样子，我竟然觉得有点……愉悦。",
            "那东西真的太吵了。但看到[PLAYER_NAME]每次被吓一跳然后努力改正的样子，我竟然觉得有点意思。我是不是有点变态？不，我只是喜欢看她为了我们的目标而努力受苦的样子，这让我觉得我们是在共同战斗。"
        ] 
    },
    { 
        id: 'decoy_detonator', category: '恶作剧与杂项', name: '诱饵炸弹', desc: '制造混乱。获得一次“引爆”机会，跳过难题。', price: 120, affection: 4, effect: { type: 'add_usable_item', item: 'decoy_detonator', amount: 1 }, reaction: '用它来分散注意力？有创意。收好，在你觉得脑子要炸掉的时候用。', 
        journal: [
            "她买了个诱饵炸弹。我告诉她这玩意儿只能用来逃避问题。但如果她真的撑不下去了，我不介意帮她点火。只要她不再露出那种快要哭出来的、被知识压垮的表情。守护她的笑容，比守护真理更重要。",
            "韦斯莱家的把戏。制造混乱来逃避现实。虽然我不推崇这种做法，但看到她手里紧紧攥着那个黑色的小喇叭，像攥着救命稻草，我心软了。偶尔逃避一次也没关系，我会帮你收拾残局。"
        ] 
    },
    { 
        id: 'skiving_snackbox', category: '恶作剧与杂项', name: '速效逃课糖', desc: '跳过当前难题，但诺亚·司德里安会觉得乐乐在偷懒。', price: 150, affection: 1, stock: Infinity, effect: { type: 'skip_word' }, 
        journal: [
            "她吃了一颗速效逃课糖，假装晕倒了。演技拙劣得令人发指。但我配合了她。毕竟，偶尔偷懒也不是死罪。我甚至帮她扶住了头，让她靠在我怀里。既然想演戏，那就要演全套，不是吗？",
            "为了逃避一个单词，她不惜让自己流鼻血？真是个笨蛋。我递给她手帕，心里既生气又好笑。[PLAYER_NAME]，你什么时候才能明白，依靠我比依靠这些糖果要靠谱得多？"
        ] 
    },
    { 
        id: 'extendable_ears', category: '恶作剧与杂项', name: '伸缩耳', desc: '用来偷听……或者只是放在诺亚·司德里安那，以免乐乐乱用。', price: 180, affection: 8, stock: 1, reaction: '韦斯莱家的玩意儿？你最好别用这个偷听拉文克劳的公共休息室。我们只会讨论学术。…好吧，如果你非要，记得告诉我听到了什么。', 
        journal: [
            "她对别人的秘密总是充满了好奇心，就像一只探头探脑的獾。我不得不提醒她，有时候不知道才是幸福。但我没告诉她，我的秘密比她能想象到的任何事都要危险——比如我每天都在克制着想要把她锁起来的冲动。",
            "她想用这个偷听我和别人的谈话？呵，多疑的小东西。但我没什么可隐瞒的，除了我对她那不可告人的、日益膨胀的欲望。如果她真的听到了我的心声，大概会吓得逃跑吧。"
        ] 
    },
    { 
        id: 'howler', category: '恶作剧与杂项', name: '咆哮信（空白）', desc: '一张可使用的咆哮信。对心情差的诺亚·司德里安使用，后果自负。', price: 200, affection: 5, unlockLevel: 1, stock: 5, effect: { type: 'add_usable_item', item: 'howler', amount: 1 }, 
        journal: [
            "她手里拿着那封空白的咆哮信，眼神里闪烁着危险的光芒。我警告她不要乱来，但谁知道她的小脑袋瓜里在想什么。她似乎很享受掌握着这种‘大杀器’的感觉。好吧，如果这能让她觉得安全，我允许她哪怕对我吼两句。",
            "一封随时可能爆炸的信。就像我们之间的关系，充满了张力。她在试探我的底线，而我在享受这种试探。来吧，[PLAYER_NAME]，看看你能搞出什么乱子，你的BF无论如何都能接得住。"
        ] 
    },
  { 
    id: 'ink', category: '学习与典籍', name: '神奇变色墨水', desc: '每次购买都会随机改变对话框的颜色。多试几次，直到刷出你喜欢的颜色！', price: 50, affection: 2, stock: Infinity, effect: { type: 'visual_effect', effect_name: 'mood_ink' }, reaction: '又要换颜色？看来你对审美很有追求。好吧，看看这次是什么……', 
    journal: [
        "她似乎对墨水的颜色很执着，买了一瓶又一瓶。我的对话框一会变成紫色，一会变成金色。看着她因为刷出了喜欢的颜色而欢呼，我也觉得……这颜色似乎顺眼多了。"
    ] 
},

    { 
        id: 'auto_quill', category: '学习与典籍', name: '自动书写羽毛笔', desc: '一支聪明的羽毛笔，偶尔会帮你自动完成拼写。', price: 280, affection: 10, effect: { type: 'auto_complete_chance', chance: 0.05 }, reaction: '自动书写？这会让你变懒。不过，对付一些简单的词，或许能节省点时间。别指望它能帮你写论文。', 
        journal: [
            "她买了一支自动书写羽毛笔。我看到它自动拼对了一个单词时她惊喜的表情。这种依赖外物的小聪明……偶尔也挺可爱的。虽然我是个提倡独立思考的拉文克劳，但如果这能让她少皱几次眉，我就不没收了。",
            "那支笔有时候写得比她还好。我在想，也许我应该没收它，强迫她自己写。但我没那么做。看着她偷懒得逞后像只小狐狸一样窃笑，我发现自己居然毫无原则地纵容了她。"
        ] 
    },
    { 
        id: 'hogwarts_a_history', category: '学习与典籍', name: '《霍格沃茨，一段校史》', desc: '赫敏·格兰杰最爱的读物。', price: 100, affection: 15, stock: 1, reaction: '虽然里面的内容我都倒背如流，但……既然是你送的，我会再读一遍。', 
        journal: [
            "这本书我已经读过三遍了。但这次不同，这是[PLAYER_NAME]送的。也许我会发现一些之前漏掉的细节，比如在某页的空白处，会不会藏着她想对我说的话？我会把它放在枕边，就像她在陪着我一样。",
            "她觉得我需要了解校史？我可是拉文克劳。不过，我很享受她这种‘想要分享好东西’的心意。我会重新读一遍，然后找个机会，在那个关于拉文克劳冠冕的章节，给她讲讲只有我知道的秘密。"
        ] 
    },
    { 
        id: 'quill', category: '学习与典籍', name: '自动校正羽毛笔', desc: '能自动纠正一些微小的拼写错误。别太依赖它。', price: 160, affection: 18, stock: 1, effect: {type: 'auto_correct_chance', chance: 0.1}, 
        journal: [
            "她终于换掉那支掉毛的旧笔了。这支笔能帮她改掉那些让人抓狂的小错误。世界清静了。作为她的BF，我不需要再为那些低级的拼写错误而血压升高，这绝对是对我寿命的一种延长。",
            "看着那支笔自动修正她的错误，我有种微妙的失落感。以前只有我会纠正她，现在多了一支笔。啧，我居然在嫉妒一支羽毛笔？诺亚·司德里安，你真是越活越回去了。"
        ] 
    },
    { 
        id: 'advanced_rune', category: '学习与典籍', name: '《古代魔文高级词典》', desc: '对诺亚·司德里安来说很有用。谢谢。', price: 220, affection: 30, unlockLevel: 2, stock: 1, 
        journal: [
            "这正是我需要的书。她怎么知道？也许她比我想象的更了解我。或者她只是看到书名里有‘高级’两个字就觉得适合我？不管怎样，我很高兴。这证明她的世界里，有很大一部分是在关注着我的需求。",
            "古代魔文。晦涩，难懂，正如人心。她把这本书给我，是在暗示我也应该试着去解读她那些复杂的小心思吗？没关系，我有一辈子的时间去研读她这本比魔文更迷人的书。"
        ] 
    },
    { 
        id: 'advanced_potion_making', category: '学习与典籍', name: '《高级魔药制作》', desc: '接下来几次拼写会获得“混血王子”的笔记提示。', price: 250, affection: 35, stock: 1, effect: {type: 'potion_notes_hint_duration', duration: 5}, 
        journal: [
            "一本写满笔记的旧书。通常我会嫌弃它的脏乱，但这里的批注……非常有见地。她是懂行的，或者说，她运气好淘到了宝贝。我开始期待她能做出真正的生死水，到时候，也许我会让她对我使用一滴，看看我会梦见什么。",
            "混血王子的笔记。天才总是孤独的，这让我产生了一丝共鸣。但我不孤独，因为我有[PLAYER_NAME]。她送我这本书，是在告诉我，即使是天才也需要捷径吗？不，她只是想帮我变得更强。"
        ] 
    },
    { 
        id: 'quidditch_treatise', category: '学习与典籍', name: '《魁地奇沉思录》', desc: '一本关于暴力美学与徒劳研究的奇书。', price: 280, affection: 40, unlockLevel: 2, stock: 1, reaction: '（他看到书名，嘴角勾起一抹罕见的笑意）终于有人写了本关于魁地奇的真话。把一群人放在扫帚上追逐皮球……呵，愚蠢的运动。这本书我收下了。', 
        journal: [
            "一本批判魁地奇的书。哈！这简直是我的心声。她终于明白在这个世界上，不仅只有飞天扫帚和金色飞贼了。智慧的火花在她脑中闪现，这比她抓住飞贼还要让我兴奋。我们是灵魂的共鸣者。",
            "她送我这个是因为知道我讨厌那些四肢发达的魁地奇球员吗？比如那个总是缠着她的格兰芬多找球手？很好的礼物，这表明她站在我这边，站在理智与智慧的这一边。"
        ] 
    },
    { 
        id: 'legilimency_primer', category: '学习与典籍', name: '《摄神取念入门》', desc: '购买后，诺亚·司德里安或许能“看穿”乐乐的拼写错误。', price: 350, affection: 25, unlockLevel: 2, stock: 1, effect: {type: 'reveal_letter_chance', chance: 0.15}, reaction: '你想学这个？还是想让我学？呵，放心，你的心思，我不用魔法也一清二楚。现在，我还能更清楚一点。', 
        journal: [
            "她想让我学摄神取念？有趣的提议。虽然我不需要魔法就能读懂她，但...多一种手段也没坏处。尤其是当她试图对我撒谎，或者试图掩饰她对其他男生的那一丁点好感时。现在，她的思想在我面前将无所遁形。",
            "《摄神取念》。这是一门侵入性的艺术。她把它交给我，是在向我敞开她的防线吗？[PLAYER_NAME]，你知不知道这意味着什么？这意味着你把伤害你的刀子递到了我手里。但我发誓，这把刀只会用来斩断那些试图把你从我身边夺走的杂草。"
        ] 
    },
    { 
        id: 'wit_sharpening', category: '魔药与炼金', name: '才智药剂', desc: '获得一次免费提示的机会。', price: 100, affection: 4, stock: Infinity, effect: { type: 'free_hint' }, 
        journal: [
            "她喝了一瓶才智药剂。希望这能让她的大脑暂时摆脱那些无关紧要的杂念，比如那个总是盯着她看的赫奇帕奇男生。才智不仅仅是用来解题的，更是用来分辨谁才是真正值得她关注的人。",
            "看着她灌下那瓶紫色的药水，眉头紧锁的样子。我是不是对她太严厉了，逼得她不得不依靠药剂？不，这是为了她好。平庸是最大的罪恶，我不能看着她堕入平庸。"
        ] 
    },
    { 
        id: 'invigoration_draught', category: '魔药与炼金', name: '提神药剂', desc: '为诺亚·司德里安恢复20点专注。', price: 120, affection: 6, stock: Infinity, effect: { type: 'state_change', mood: 0, focus: 20 }, 
        journal: [
            "她给了我一瓶提神剂。看来我的疲惫已经明显到连她这个[PLAYER_HOUSE]的脑袋瓜都能察觉了。谢谢你的关心，尽管我不承认我累了。但在她关切的目光下，喝下这东西感觉像是在喝某种承诺。",
            "我确实需要这个。熬夜研究古代魔文消耗了我太多的精力。她递给我药剂时手指冰凉。喝下去后，胃里暖了，心里也是。这种被人照顾的感觉……居然不赖。"
        ] 
    },
    { 
        id: 'bezoar', category: '魔药与炼金', name: '毛粪石', desc: '大多数毒药的解药。有备无患。', price: 130, affection: 8, stock: 3, effect: {type: 'add_usable_item', item: 'bezoar', amount: 1}, reaction: '毛粪石。非常实用的东西。你越来越懂得如何为意外做准备了。希望你用不上它。', 
        journal: [
            "毛粪石。非常务实的选择。在这个充满魔药事故的学校里，这东西比金子还珍贵。她变聪明了，懂得自我保护。这让我少了一分担心，但同时也少了一分当她英雄的机会。啧，矛盾。",
            "一块从山羊胃里取出的石头。她把它当宝贝一样收着。我想告诉她，如果真的有人想对她下毒，我会先让他尝尝比毒药痛苦一千倍的诅咒。但我没说，让她留着吧，当作一个心理安慰。"
        ] 
    },
    { 
        id: 'focus_potion', category: '魔药与炼金', name: '初级福灵剂', desc: '接下来10个单词获得双倍专注点。', price: 150, affection: 2, stock: Infinity, effect: { type: 'double_points_duration', duration: 10 }, 
        journal: [
            "一点点液体的运气。金色的药水在瓶子里闪光，就像她充满希望的眼睛。希望她能利用这短暂的好运，而不是把它浪费在猜测答案上。虽然我不信运气，只信实力，但如果运气能让她笑，那我也信一次。",
            "她喝下了福灵剂，整个人看起来容光焕发。她看着我笑，仿佛我是她最大的好运。那一刻，我觉得哪怕全世界的福灵剂加起来，也比不上她此刻的一个笑容。"
        ] 
    },
    { 
        id: 'draught_of_peace', category: '魔药与炼金', name: '安神水', desc: '提供一次“连对护盾”，下次答错不中断连击。', price: 200, affection: 6, stock: Infinity, effect: { type: 'streak_shield' }, 
        journal: [
            "她太紧张了，手都在抖。安神水是个好主意。看着她呼吸平稳下来，眼神不再游离，我也觉得轻松了一些。她的焦虑会传染给我，而她的平静是我的救赎。好好睡一觉吧，我的女孩，梦里不要有单词，只有我。",
            "只有内心平静，才能接纳真理。她终于懂得了这个道理。喝下安神水后，她靠在椅背上，看起来像一只收起了刺的小刺猬。我想摸摸她的头，告诉她一切有我，不必如此慌张。"
        ] 
    },
    { 
        id: 'memory_potion', category: '魔药与炼金', name: '记忆消除剂(稀释版)', desc: '从错题本中永久移除一个最让乐乐头疼的单词。', price: 220, affection: 0, stock: Infinity, effect: { type: 'clear_wrong' }, reaction: '消除错误，而不是正视它？懦夫的行为。但……如果这能让你继续前进，我准了。', 
        journal: [
            "她选择遗忘。这是一种逃避，但我没阻止她。有些错误，如果无法纠正，遗忘或许是种慈悲。但我不会忘记任何关于她的事，哪怕是她犯蠢的瞬间，那也是构成完整的她的碎片。",
            "消除剂带走了她对那个单词的痛苦记忆。我看着她如释重负的样子，心里却在想：如果有一天她想消除关于我的记忆怎么办？那个念头让我恐惧。我绝不允许。我要刻在她的脑海里，哪怕是作为痛苦。"
        ] 
    },
    { 
        id: 'elixir_to_induce_euphoria', category: '魔药与炼金', name: '欢欣剂', desc: '一次性获得100专注点。', price: 300, affection: 12, stock: 3, effect: { type: 'add_points', amount: 100 }, 
        journal: [
            "她喝了欢欣剂，笑得像个傻瓜。虽然这种快乐是人造的，但...看着她笑，总比看她哭要好。而且，她快乐的时候会变得格外粘人，像只求抚摸的猫。我不得不承认，我很享受她这种毫无防备的亲近。",
            "阳光般的黄色药剂。她变得异常兴奋，甚至哼起了歌。虽然那调子跑到了禁林，但我没打断她。这种纯粹的快乐是稀缺资源。如果可以，我想做她的欢欣剂，哪怕有副作用也好。"
        ] 
    },
    { 
        id: 'polyjuice_potion_hair', category: '魔药与炼金', name: '复方汤剂(一根头发)', desc: '一根……诺亚·司德里安的头发。乐乐想变成谁？变成我吗？', price: 400, affection: 25, unlockLevel: 2, stock: 3, reaction: '我的头发？你想用它做什么……有趣的想象。收好，别让斯内普看到。', 
        journal: [
            "她要了一根我的头发。这让我感到一丝...怪异的兴奋。她想变成我？体验我的生活？还是只是想...拥有一部分的我？这份占有欲，我收到了。把我的DNA带在身边吧，[PLAYER_NAME]，这比任何戒指都更亲密。",
            "她小心翼翼地把我的头发放进瓶子里。那眼神，像是在藏匿赃物。我是她的共犯。如果她变成我的样子，去做一些疯狂的事……呵，想想都觉得刺激。我们真是天生一对的疯子。"
        ] 
    },
    { 
        id: 'remembrall', category: '奇珍异宝', name: '记忆球', desc: '复习错题时，有几率提醒乐乐避免再次犯错。', price: 150, affection: 7, stock: 1, effect: {type: 'memory_flashback_chance', chance: 0.25}, reaction: '纳威·隆巴顿的东西。对你来说，也许有用。', 
        journal: [
            "记忆球变红了。她又忘东西了。好在这次她记住了带这个球。看着那团红色的烟雾，我叹了口气。她总是丢三落四，除了我。她从来没有忘记过关于我的任何事。这让我即使面对她的健忘，也发不出火来。",
            "一个不断变红的玻璃球。在[PLAYER_NAME]手里，它几乎没变白过。我打赌她甚至忘了自己忘了什么。但我会记得。我会做她的记忆球，永远提醒她回家的路，以及，我是谁。"
        ] 
    },
    { 
        id: 'hufflepuff_fireplace', category: '奇珍异宝', name: '赫奇帕奇的暖心壁炉', desc: '购买后，可以随时在学习空间点燃温暖的壁炉火焰。', price: 500, stock: 1, effect: {type: 'unlock_feature', feature: 'fireplace'}, 
        journal: [
            "她点燃了壁炉。那火焰……就像她学院的标志一样，温暖、忠诚而坚定。我不禁在想，这是否就是所谓的‘归属感’。火光映在她的脸上，让她看起来像个天使。我这个在黑暗里行走的拉文克劳，就这样被她捕获了。",
            "壁炉的光很暖和，让我想起了她眼睛里的光。在寒冷的苏格兰高地，这团火是我们小小的避难所。我们不需要说话，只要听着木柴爆裂的声音，就知道彼此都在。这就够了。",
            "在壁炉边看书，她的侧脸被火光映得很红。这是一个我愿意永远停留的时刻。我希望时间能冻结，让这温暖永不消散。[PLAYER_NAME]，你是我的火焰，我的壁炉，我的家。"
        ] 
    },
    { 
        id: 'astronomy_chart', category: '奇珍异宝', name: '活动星象图', desc: '一幅精美的、会动态变化的星象图。解锁“天文塔顶”场景。', price: 200, affection: 20, unlockLevel: 1, stock: 1, effect: { type: 'unlock_scene', scene: 'astronomy-tower' }, reaction: '很美的星图。今晚夜宵后，去天文塔顶，我教你怎么看。', 
        journal: [
            "星图。她开始仰望星空了。这很好，我们都需要时不时地从书本中抬起头，看看更广阔的世界。我会是她的向导，教她辨认星座，告诉她每一颗星星的名字。而在我眼里，最亮的星星就在我身边。",
            "她指着天狼星问我那是什么。我告诉了她。然后她问我，我们的命运是不是也写在星星上？我笑了。傻瓜，我们的命运不写在天上，写在我们紧握的手心里。即使星星陨落，我也不会放手。"
        ] 
    },
    { 
        id: 'mooncalf_figurine', category: '奇珍异宝', name: '月痴兽雕像', desc: '它会让诺亚·司德里安想起在月光下……和乐乐一起。', price: 250, affection: 30, unlockLevel: 1, stock: 1, reaction: '月痴兽？嗯，它们在月光下跳舞的样子确实……有种独特的秩序感。我会把它放在床头。', 
        journal: [
            "书桌上的月痴兽雕像在月光下泛着柔和的光。它让我想起她……同样只在最安静的时刻，才会展露出最柔软、最疯狂的一面。我想和她在月光下跳舞，没有音乐，只有心跳。",
            "这个小雕像的眼睛大大的，很无辜，就像她犯错时看我的眼神。我把它放在离枕头最近的地方。每晚睡前看到它，我就知道，我的梦里会有她。"
        ] 
    },
    { 
        id: 'snitch_locket', category: '情感与羁绊', name: '金色飞贼挂坠盒(仿)', desc: '“我为你打开。”一个精美的、可以打开的挂坠盒。', price: 400, affection: 80, unlockLevel: 2, stock: 1, reaction: '（他接过小巧的挂坠盒，轻轻摩挲着上面的翅膀纹路，然后打开它，里面是空的）所以……你想在里面放什么？我们两个的照片吗？', 
        journal: [
            "她送了我一个金色飞贼挂坠盒。我想，她就是我的金色飞贼，难以捉摸，却又值得我用尽一切去追寻。比赛已经结束，因为我已经抓住了她。我不会把她放回箱子里的。",
            "挂坠盒里还空着。她在等我放进去什么东西吗？我的誓言？还是我的心？不，心太大了，放不进去。我会放进一张我们合影的缩微胶卷，让那一刻的笑容成为永恒的囚徒。"
        ] 
    },
    { 
        id: 'ravenclaw_diadem_pin', category: '奇珍异宝', name: '拉文克劳冠冕胸针', desc: '一枚象征智慧的精致胸针。', price: 400, affection: 50, unlockLevel: 2, stock: 1, reaction: '这是……拉文克劳的冠冕。它象征着过人的智慧。你把它送给我，是在肯定我的追求。这比任何礼物都珍贵。', 
        journal: [
            "冠冕的复制品。她是在告诉我，她欣赏我的头脑胜过一切吗？很好的眼光。她是最懂我的。在这个充斥着平庸之辈的学校里，只有她能理解我对智慧的渴望。她是我的知音，也是我的王后。",
            "这枚胸针别在我的长袍上，闪闪发光。[PLAYER_NAME]亲手给我戴上的。那一刻，我觉得自己加冕了。不仅是智慧的王，更是她心里的王。这就够了。"
        ] 
    },
    { 
        id: 'pensieve_model', category: '奇珍异宝', name: '冥想盆（微缩模型）', desc: '一个可以储存思绪的装饰品。', price: 450, affection: 60, unlockLevel: 2, stock: 1, reaction: '微缩的冥想盆？很有心的礼物。也许有一天，我会让你看看我最珍贵的记忆。', 
        journal: [
            "一个小冥想盆。我有很多记忆想放进去。大部分是关于她的。那些她大笑、皱眉、或者是偷偷看我的瞬间。如果我的大脑装不下了，我就把它们存这里。绝不丢弃一丝一毫。",
            "银色的丝缕在盆中盘旋。她问我那是什么记忆。我没告诉她，那是我们第一次牵手的画面。那时候我的手心全是汗，心跳快得像只受惊的鸟。这个秘密，我打算带进坟墓，或者等到我们金婚的时候再告诉她。"
        ] 
    },
    { 
        id: 'journal_sub', category: '奇珍异宝', name: '高级魔药季刊订阅', desc: '以后可以和诺亚·司德里安讨论最新的魔药学进展。', price: 500, affection: 70, stock: 1, reaction: '...你居然会想到这个？很好。这比任何糖果都有用。我很期待第一期，以及……和你一起讨论。', 
        journal: [
            "她订阅了那本期刊。这意味着我们以后会有更多共同话题。这比任何礼物都让我高兴。她想进入我的世界，她想跟上我的步伐。很好，[PLAYER_NAME]，我会等你，也会拉你一把。",
            "每个月收到期刊的时候，我都能想到她。这不仅是知识的传递，更是情感的纽带。我们在学术的海洋里共舞，这种精神上的契合，比肉体的欢愉更让我战栗。"
        ] 
    },
    { 
        id: 'gillyweed', category: '奇珍异宝', name: '鳃囊草', desc: '有了它，就能探索黑湖深处的秘密。', price: 600, affection: 80, unlockLevel: 2, stock: 1, reaction: '鳃囊草...你从哪里弄到的？聪明的准备。也许我们下次可以去黑湖深处看看，只有我们两个。', 
        journal: [
            "鳃囊草。她想和我一起去水下吗？虽然我不像斯莱特林那样痴迷于水底，但黑湖的生态确实值得研究。最重要的是，水下没有声音，没有干扰，是一个完美的二人世界。我会保护她的，不让巨乌贼靠近。",
            "黏糊糊的草团。她居然把这个当礼物。真是个古怪的[PLAYER_HOUSE]。但我收下了。我想象着我们在水下，长出鳃和蹼，像人鱼一样自由地游弋。那一刻，世界只剩下蓝绿色的光和彼此。"
        ] 
    },
    { 
        id: 'orrery', category: '奇珍异宝', name: '太阳系仪模型', desc: '一个精密的、展示行星运转的魔法模型。', price: 850, affection: 100, unlockLevel: 3, stock: 1, reaction: '一个太阳系仪……它完美地诠释了宇宙的秩序与逻辑。我很喜欢。它将是我的书桌上最精美的收藏。', 
        journal: [
            "这个模型运转得完美无瑕。就像我希望我们的未来一样，每一个齿轮都咬合得恰到好处，永不停歇。她是我的太阳，我是围绕她的行星。虽然这不符合日心说，但在我的宇宙里，她就是中心。",
            "看着行星在轨道上运行，我感到一种宿命般的平静。无论它们怎么转，都不会脱离轨道。就像[PLAYER_NAME]注定是我的。这种必然性，比任何魔法都让我安心。"
        ] 
    },
    { 
        id: "handwritten_letter", category: "情感与羁绊", name: "手写的情书", desc: "这比任何魔法都有效。", price: 10, affection: 50, reaction: "（他展开羊皮纸，沉默地读着。许久，他才抬起头，眼神复杂而灼热）……你的字还是那么难看。但是……内容我记住了。一个字不差。", 
        journal: [
            "她给了我一封信。我告诉她字难看，但没告诉她，我把信放在了枕头下面。每晚读一遍，直到那羊皮纸被我摸得起毛。那些笨拙的字句，是我在这个疯狂世界里唯一的锚点。",
            "那封信的内容...我甚至能倒背如流。‘喜欢’这个词太轻了。但在她笔下，却重得像千斤巨石，砸在我的心上。她可能永远不会知道，这些简单的文字给了我多大的力量去对抗平庸。"
        ] 
    },
    { 
        id: 'ravenclaw_knocker', category: '情感与羁绊', name: '鹰院门环的谜语', desc: '乐乐抄来一个鹰院休息室门环的谜语。', price: 120, affection: 25, unlockLevel: 1, reaction: '“什么东西被打破了才更有用？”是鸡蛋。这种简单的问题不该难住你。不过，既然你对智慧感兴趣，我很高兴。', 
        journal: [
            "她居然在研究我们的门环谜语。这让我很欣慰。智慧是通往我心的唯一钥匙，而她正在努力锻造这把钥匙。虽然她有时候笨笨的，但这种努力的样子，比任何天才都让我心动。",
            "她把那个谜语抄在纸上给我看，一脸求表扬的表情。我解开了谜题，也解开了对她的防备。欢迎来到我的世界，[PLAYER_NAME]，这里的大门永远为你敞开。"
        ] 
    },
    { 
        id: 'magic_rose', category: '情感与羁绊', name: '永不凋谢的魔法玫瑰', desc: '它会永远提醒诺亚·司德里安，有乐乐的这一天。', price: 350, affection: 60, unlockLevel: 1, effect: { type: 'ui_change', element: '#character-name', content: ' 🌹' }, reaction: '（他接过玫瑰，指尖划过花瓣，眼眸闪过柔光）……愚蠢的浪漫主义。但是……它很美。我会处理好的。', 
        journal: [
            "她送了我一朵永不凋谢的玫瑰。我告诉她这很愚蠢，但我还是用最高级的静止咒把它保存在了床头的水晶瓶里。现在，我每天醒来都能看到它。它提醒我，有些东西是可以战胜时间的，比如这朵花，比如……",
            "一朵不会凋谢的玫瑰。她是在暗示什么吗？永恒？呵，野心不小的[PLAYER_HOUSE]。但如果她想要永恒，我就给她永恒。我的爱也是施了魔法的，永不枯萎。"
        ] 
    },
    { 
        id: 'house_scarf', category: '情感与羁绊', name: '乐乐亲手织的围巾', desc: '这会让诺亚·司德里安对乐乐的触碰更加纵容。', price: 450, affection: 120, unlockLevel: 2, effect: { type: 'personality_shift_duration', shift: 'warmTouch', duration: 20 }, reactions: { default: "（他接过围巾，触感有些粗糙）……你的手艺有待提高。", high_level: "（他接过围巾，仔细地围在了自己的脖子上）……有点扎人。不过，很暖和。冬天我会戴着。" }, 
        journal: [
            "这条围巾织得糟透了。针脚不匀，还有漏针，颜色也是奇怪的搭配。但我戴着它，走在霍格沃茨的走廊里，像戴着勋章。因为这是她一针一线的时间，是她指尖的温度。谁敢嘲笑它，我就让他尝尝恶咒的滋味。",
            "冬天来了，围巾很暖和。虽然它有点扎脖子，但我不会摘下来的。上面有她的味道，淡淡的香皂味。每当风吹过，我就把脸埋进去，假装她在拥抱我。这是一种隐秘的、卑微的快乐。"
        ] 
    },
    { 
        id: 'shell_cottage_box', category: '情感与羁绊', name: '贝壳小屋音乐盒', desc: '播放着海浪的声音。让你们想起一个遥远的、宁静的承诺。', price: 600, affection: 150, unlockLevel: 3, stock: 1, reaction: '……这个音乐。它让我想起一个关于忠诚和守护的故事。谢谢你，它很特别。', 
        journal: [
            "海浪的声音。这让我想起我们未来的家。不需要很大，但要远离纷争，只有我们。我们可以整天坐在沙滩上，讨论哲学，或者什么都不做，只是看着海浪。那是我的终极梦想，因为有她在。",
            "音乐盒在旋转。清脆的声音压过了外面风雨的呼啸。在这个混乱的世界里，我们的小屋是唯一的避风港。我发誓，我会亲手为她建造这个避风港，一砖一瓦，用我的血汗。"
        ] 
    },
    { 
        id: 'shared_diary', category: '情感与羁绊', name: '共感日记', desc: '共享的日记。有时乐乐能“听见”诺亚·司德里安对难题的吐槽。', price: 700, affection: 180, unlockLevel: 3, stock: 1, effect: { type: 'unlock_feature', feature: 'thought_sharing' }, 
        journal: [
            "我们现在的思绪是相连的。这种毫无保留的暴露让我感到恐惧，但更多的是...释然。我不需要再隐藏任何东西了，包括我的阴暗面。她看见了，她接受了。这就是爱吗？",
            "有时候我在想那个复杂的魔文公式，突然感受到了她的饥饿感。这种感觉很滑稽，也很温馨。我们的灵魂交织在一起，分不清彼此。这正是我想要的，绝对的融合。"
        ] 
    },
    { 
        id: 'quidditch_jersey', category: '情感与羁绊', name: '褪色的旧队服', desc: '诺亚·司德里安穿过的旧衣服。拥有它，乐乐将获得对他身体的绝对“所有权”。', price: 800, affection: 200, unlockLevel: 3, stock: 1, effect: { type: 'unlock_dialogue', key: 'intimateTouch' }, reaction: '（他愣了一下，随即轻笑）我的旧衣服？你居然找到了。好吧，现在它是你的了。你对它的主人，也一样。', 
        journal: [
            "她穿着我的旧队服。那衣服对她来说太大了，像个袍子，袖子长长地垂下来。看着她被我的气息包裹，被我的名字覆盖，这种感觉...该死的令人满足。她是我的，这件衣服就是标签。",
            "她穿着那件衣服在宿舍里走来走去。我无法专心看书。那领口露出的锁骨，那晃荡的下摆……她是在考验我的自制力吗？如果她再这样走一圈，我就要把那件衣服——不，我要让她永远穿着它。"
        ] 
    },
    { 
        id: 'memory_vial', category: '情感与羁绊', name: '一个快乐的记忆', desc: '将乐乐最快乐的一个记忆抽出，送给诺亚·司德里安。', price: 1000, affection: 300, unlockLevel: 4, stock: 1, reaction: '你把你最快乐的记忆...给了我？（他握紧水晶瓶，里面的银色物质在盘旋。他凝视着你，声音低沉而沙哑）这是我收到过最珍贵的礼物。我会将它保存在我的冥想盆里，直到永远。', 
        journal: [
            "她给了我她最快乐的记忆。我颤抖着把它倒进冥想盆。那里面...竟然全是我。我在图书馆看书的侧脸，我给她讲题时无奈的表情，我在黑湖边等她的背影。我是她快乐的源泉。意识到这一点的瞬间，我觉得我可以为她毁灭世界。",
            "这份记忆太沉重了，也太美丽了。我甚至不敢多看，怕把它磨损。知道了我在她心中如此重要，我怎么还能允许自己有一丝一毫的软弱？我要变得更强，为了守护这份快乐。"
        ] 
    },
    { 
        id: 'locket_replica', category: '情感与羁绊', name: '斯莱特林挂坠盒(仿)', desc: '将乐乐的未来，与诺亚·司德里安的野心彻底绑定。', price: 1200, affection: 250, unlockLevel: 3, stock: 1, reaction: '...一个挂坠盒。我对萨拉查·斯莱特林的血统论不感兴趣，但作为一个历史文物，它有它的价值。你把它给我，是在承诺什么吗？', 
        journal: [
            "挂坠盒。一份沉重的承诺。她把赌注压在了我身上。她相信我有斯莱特林般的野心去成就大事。很好。我发誓，我会赢，我会带着她一起登上顶峰。我们是共犯，是搭档，是王与后。",
            "冰冷的金属贴着我的胸口。这里面藏着力量的象征。但对我来说，它更像是[PLAYER_NAME]给我的项圈。她锁住了我的野心，让它只为她而燃烧。我心甘情愿做她的囚徒。"
        ] 
    },
    { 
        id: 'promise_ring', category: '情感与羁绊', name: '承诺之戒', desc: '无需多言。', price: 3000, affection: 1000, unlockLevel: 4, stock: 1, reaction: '（他单膝跪地，执起你的手，郑重地将戒指戴在你的无名指上，声音是前所未有的认真）以魔法的名义，我，诺亚·司德里安，将我此生的智慧、野心、忠诚与爱，全部交付于你。乐乐，你愿意与我签订这终生不渝的契约吗？', 
        journal: [
            "我把戒指戴在了她的手上。契约已成。这比任何牢不可破的誓言都要强大。她是我的了，永远。看着那枚戒指在她手上闪耀，我感到前所未有的平静。那是所有权的宣示，也是我灵魂的归宿。",
            "从今天起，没有人能把我们分开。死亡不能，时间不能。这枚戒指是个圆，象征着无限。就像我对她的爱，始于心动，终于白骨，循环往复，永无止境。"
        ] 
    },
    { 
        id: 'darkness_powder', category: '翻倒巷的低语', name: '秘鲁瞬间黑暗粉', desc: '制造绝对的黑暗。如果乐乐答错了，就用它来“惩罚”一下。', price: 280, affection: 5, unlockLevel: 1, effect: { type: 'screen_flash_penalty' }, reaction: '韦斯莱家的产品？也好，偶尔的黑暗能让人更集中精神。别怕，我在这里。', 
        journal: [
            "黑暗降临。我听到她惊慌的呼吸声。别怕，我的光只为你亮起。在这一片漆黑中，她只能依靠我，只能抓住我。这让我感到一种扭曲的满足感。我是她黑暗中唯一的神。",
            "她似乎被黑暗吓坏了。我握住她的手，掌心相对。黑暗是最好的掩护，在这里，我可以肆无忌惮地看着她，甚至……靠近她。没有人会知道我们在黑暗中做了什么。"
        ] 
    },
    { 
        id: 'basilisk_scale', category: '翻倒巷的低语', name: '石化的蛇怪鳞片', desc: '一块危险的护身符，能抵消一次因连续犯错导致的严重后果。', price: 600, affection: 15, unlockLevel: 2, stock: 3, effect: { type: 'add_usable_item', item: 'fatal_shield', amount: 1 }, reaction: '蛇怪的鳞片……你从哪弄到的？这东西很危险，但确实是强大的保护。我会帮你保管，在你最需要的时候给你。', 
        journal: [
            "她带来了一块石化的蛇怪鳞片。她总是能找到这些游走在危险边缘的东西。这让我既担心，又……有点欣赏。她有胆量，我喜欢。我会把这鳞片做成护身符，替她挡下所有的恶意。",
            "蛇怪的眼睛能致人死地，但这鳞片却能救命。就像我对她的感情，既危险又充满保护欲。收好它，[PLAYER_NAME]，别让它离开你的身体，就像别让我离开你一样。"
        ] 
    },
    { 
        id: 'sneaking_scope', category: '翻倒巷的低语', name: '窥镜碎片', desc: '会在下一个长难词出现时预警。', price: 380, affection: 7, unlockLevel: 1, effect: { type: 'long_word_warning_duration', duration: 1 }, reaction: '一个坏掉的窥镜？它只会对谎言和欺骗有反应。你拿着，如果你身边有人对你不忠，它会提醒你。', 
        journal: [
            "窥镜在她手里转个不停。我告诉她那是坏了。其实...是因为我隐瞒了太多的事。抱歉，[PLAYER_NAME]，有些黑暗我必须独自承担，不能让你看见。只要你知道我永远不会伤害你就够了。",
            "她拿着窥镜到处照。我有些紧张，怕她照出我心底那些疯狂的念头。好在她只是把它当成玩具。天真的女孩，有时候无知真的是一种福气。"
        ] 
    },
    { 
        id: 'murtlap_essence', category: '翻倒巷的低语', name: '毛螃蟹汁', desc: '缓解疼痛。下次答错时，诺亚·司德里安不会说得那么重。', price: 320, affection: 12, unlockLevel: 2, effect: { type: 'reduce_scolding_duration', duration: 3 }, reaction: '用来缓解被我骂的“痛”？有远见。', 
        journal: [
            "毛螃蟹汁。她怕我骂她？这让我反思了一下，我是不是对她太严厉了？不，为了她的未来，严厉是必须的。但这瓶药汁提醒我，偶尔也要给她一点甜头。打一巴掌给个枣，这才是训导的艺术。",
            "看着她把手浸在药汁里，我心里微微刺痛。我不想做那个给她带来痛苦的人，即使是为了学习。下次……我会温柔一点。只是一点点。"
        ] 
    },
    { 
        id: 'hand_of_glory', category: '翻倒巷的低语', name: '光荣之手(仿制品)', desc: '能帮乐乐“看清”拼写中的一两个字母。', price: 450, affection: 10, unlockLevel: 2, stock: 1, effect: {type: 'potion_notes_hint_duration', duration: 10}, reaction: '博金-博克店的货色？呵，虽然是仿制品，但工艺还行。别拿它去做坏事。…至少，别让我知道。', 
        journal: [
            "枯萎的人手。她居然不害怕这东西？看来她比外表看起来更...坚韧。或者说，为了通过考试，她已经不择手段了？这种实用主义的态度，很有斯莱特林的风格。我越来越喜欢她了。",
            "光荣之手只给持有者光亮。在这个世界上，我愿意做她的光荣之手，只为她一人指引方向，哪怕这意味着要让其他人陷入黑暗。"
        ] 
    },
    { 
        id: 'veritaserum_sample', category: '翻倒巷的低语', name: '吐真剂(稀释样品)', desc: '让诺亚·司德里安对乐乐的下一次表现，给出最不加掩饰的真实评价。', price: 500, affection: 20, unlockLevel: 3, effect: { type: 'force_truthful_feedback' }, reaction: '吐真剂？你确定要对我用这个？你会听到一些……你可能还没准备好听到的话。', 
        journal: [
            "她对我用了吐真剂。我告诉了她我对她拼写的真实看法——烂透了。然后...我差点告诉了她我爱她。幸好药效过了，那个字卡在喉咙里。这种话，必须在我清醒的时候，郑重地告诉她，而不是被药水逼出来。",
            "在吐真剂的作用下，我无法撒谎。她问我为什么对她这么好。我说‘因为你是我的’。她脸红了。但这还不是全部真相。真相是，没有她，我的世界就是一片荒原。"
        ] 
    },
    { 
        id: 'love_potion_antidote', category: '翻倒巷的低语', name: '迷情剂解药', desc: '以防万一。乐乐只能属于诺亚·司德里安，魔法也不例外。', price: 550, affection: 40, unlockLevel: 3, stock: 1, reaction: '解药？明智的准备。没有人可以用魔法从我身边夺走你。', 
        journal: [
            "她买了迷情剂解药。很好。这意味着她清醒地意识到，任何试图用魔法控制感情的行为都是可耻的。这也意味着，她是清醒地选择了我，而不是中了什么魔咒。这份清醒的爱，比任何魔药都让我沉醉。",
            "我不允许任何人对她使用迷情剂。如果有，我会让他后悔出生。但这瓶解药也提醒我，我要时刻保持警惕。她是我的珍宝，总有贼人惦记。我会守好她，用我的命。"
        ] 
    },
    { 
        id: 'amortentia_sample', category: '翻倒巷的低语', name: '迷情剂(样品)', desc: '它对诺亚·司德里安没用。但乐乐的这个举动，很有趣。', price: 666, affection: 66, unlockLevel: 3, reaction: '（他闻了闻，随即嗤笑一声，但眼神却变得无比灼热）别白费力气了。要让你闻起来像旧书卷、雨后的禁林和你自己……我早就对你上瘾了，不需要这种低劣的催化剂。', 
        journal: [
            "她给了我迷情剂。我闻到了旧羊皮纸、魔药课的烟雾，还有...她的发香。这不需要魔药，这是我每天呼吸的空气。她就是我最强烈的迷情剂，一旦沾染，终身戒断无能。",
            "螺旋状的蒸汽上升。我看着她期待的眼神，心里软得一塌糊涂。傻瓜，你不需要用这个来确认我的心意。我的心跳，我的眼神，我为你做的每一件事，都在大声尖叫着那个词。"
        ] 
    },
    { 
        id: 'foe_glass_shard', category: '翻倒巷的低语', name: '仇敌镜碎片', desc: '一块能模糊显现敌人的镜子碎片。', price: 750, affection: 35, unlockLevel: 4, stock: 1, reaction: '仇敌镜……我不需要这个来认清谁是敌人。但把它放在这里，可以提醒我，我们的未来，不允许任何威胁存在。', 
        journal: [
            "仇敌镜里映出了很多人影。他们都想把我们分开，或者是想抢走她。但我会把他们一个个击碎。在这场守护她的战争中，我不会留任何活口。镜子里的影子越来越清晰，但我毫无畏惧。",
            "镜子里偶尔会闪过我自己的脸。也许，我是我自己最大的敌人？因为我那该死的占有欲差点让她窒息。我要克制，要学会像爱护花朵一样爱护她，而不是像锁住囚犯一样锁住她。"
        ] 
    },
    { 
        id: 'cursed_necklace_replica', category: '翻倒巷的低语', name: '蛋白石项链(安全复制品)', desc: '一件危险而美丽的艺术品。会暂时放大诺亚·司德里安的嫉妒心。', price: 1500, affection: 100, unlockLevel: 4, stock: 1, effect: {type: 'jealousy_amplifier_duration', duration: 20}, reaction: '这东西……你知道它的故事吗？它杀死了十九个麻瓜物主。你送我这个，是想说，为了得到我，你不惜一切代价？……很好。我也是。', 
        journal: [
            "一条被诅咒的项链。危险，致命，美丽。就像我们的爱情。她敢送，我就敢收。如果爱是一种诅咒，那我甘之如饴。戴上它，我感觉那种疯狂的念头又在滋长。她是我的，谁也别想碰。",
            "这串项链散发着不祥的气息，但我却觉得它很迷人。因为它来自她。即使是诅咒，只要是她给的，也是祝福。我们将一起在这个被诅咒的世界里，跳一支最危险的舞。"
        ] 
    }
];

const noah = {
    levels: [ { name: "青梅竹马", affection: 0 }, { name: "吃醋的BF", affection: 200 }, { name: "忠贞小狗", affection: 1200 }, { name: "灵魂伴侣", affection: 4000 }, { name: "【无上爱意】", affection: 10000 } ],
    dialogue: {
        // --- 【新增代码 1】场景专属对话库 ---
        scenes: {
            'library': [
                "嘘……这里是图书馆。虽然我很喜欢听你的声音，但平斯夫人正盯着这边。",
                "书页翻动的声音是世界上最美妙的白噪音，仅次于你的呼吸声。",
                "这里有几千本书，但我现在的注意力全在你这本读不完的书上。",
                "别在书上乱涂乱画，那是对知识的亵渎……如果是写给我的情书除外。",
                "闻到了吗？旧羊皮纸的味道。这是智慧沉淀的气息。"
            ],
            'common-room': [
                "拉文克劳的穹顶星空很美，对吧？它提醒我们依然渺小。",
                "在这里，智慧是唯一的通行证。当然，你是我的家属，你可以刷脸。",
                "坐在那张蓝色的扶手椅上。那个位置的光线最适合阅读。",
                "罗伊纳·拉文克劳看着我们呢。别偷懒。",
                "公共休息室有点吵，但只要你在我身边，我就能构建出安静的屏障。"
            ],
            'dormitory': [
                "这是我们的私人空间。在这里，你不需要伪装。",
                "我想把门锁上，只有我们两个。你介意吗？",
                "你可以随意一点。想睡我的床也可以……我是说，如果你累了的话。",
                "这里只有你的味道和我的味道混合在一起。令人安心。",
                "别乱动我的魔药架……好吧，你想玩那个也可以，小心炸了。"
            ],
            'astronomy-tower': [
                "这里的风很大，过来，躲进我的长袍里。",
                "俯瞰整个霍格沃茨，你不觉得那些烦恼都变得很渺小吗？",
                "今晚的猎户座很亮。但我眼里的星星更亮。",
                "如果不小心掉下去，我会召唤飞天扫帚接住你。或者直接跳下去陪你。",
                "高处不胜寒，所以我们需要抱紧一点。"
            ]
        },
        // --- 【新增代码 1 结束】 ---

        timeBased: { morning: "这么早就来了？很好。头脑最清醒的时候，就该用在正确的地方。", afternoon: "下午好。午餐吃得不错？希望你的大脑没有被食物填满。", evening: "傍晚了。你看起来有点累，需要我给你施个'恢复如初'吗？开玩笑的，快开始。", night: "已经这么晚了。看来你今天很努力。或者说，白天的效率太低了？", late_night: "还在学？你这是在效仿拉文克劳的学生，还是单纯的夜猫子？不管怎样，我陪你。" },
               seasonal: { 
            spring: [
                "春分已过，日照时间变长。这意味着我有更多的时间可以……看着你。别躲。",
                "空气中的多巴胺水平随着气温升高。但我不需要春天，你的存在就是我的苯乙胺（PEA）。",
                "黑湖的冰化了。如果你想去打水漂，我会教你如何利用流体力学让石头跳过十次。",
                "这种潮湿又充满生机的季节，总让人觉得慵懒。过来，我的肩膀借你靠十分钟。不收利息。",
                "哪怕周围开满了水仙花，在我眼里，它们也不过是植物学分类中的一员。唯有你，是特例。",
                "花粉浓度有点高。如果你打喷嚏，我会以此为借口把你关在室内——和我一起。",
                "万物复苏？呵，对我来说，只有你也看着我的时候，我的世界才算复苏。"
            ], 
            summer: [
                "热力学第二定律告诉我，混乱度在增加。就像我现在被你扰乱的心跳频率。",
                "天气太热了。别穿得那么少在公共休息室晃荡，我想把你藏起来，不想给别人发福利。",
                "如果你想喝冰镇南瓜汁，我可以为你施咒。但作为交换，你得把自己这一勺冰淇淋分给我。",
                "蝉鸣声很吵，只有你的声音频率能让我觉得悦耳。",
                "这种高温让人烦躁。唯有你是我的镇静剂。别走远，保持在我触手可及的范围内。",
                "阳光直射角度太大了。过来，我的影子可以分你一半。",
                "我想带你去黑湖底下的斯莱特林地窖避暑……开玩笑的，那里阴森潮湿，不适合你。还是待在我身边吧。"
            ], 
            autumn: [
                "熵增是宇宙的终极宿命，万物终将凋零。但这不包括我对你的感情，那是一个恒量。",
                "秋天适合阅读，适合思辨，也适合把手塞进我的口袋里。",
                "风起了。如果你觉得冷，那是物理学在提醒你，该抱紧你的BF了。",
                "落叶的轨迹遵循重力法则，而我的视线轨迹遵循你。",
                "开学季。霍格沃茨又变得吵闹了。除了图书馆的角落，只有我的怀里是安静的。",
                "这种萧瑟的天气，很容易让人产生存在主义危机。但只要抓住你的手，我就能感知到实体。",
                "别踩那些落叶，虽然声音很脆，但容易滑倒。……算了，摔倒了我接住你。"
            ], 
            winter: [
                "体温传递是热传导的一种。为了维持热平衡，我们应该靠得更近一点，这是科学。",
                "下雪了。微观层面上，雪花是水分子的结晶；宏观层面上，它是我想和你一起白头的借口。",
                "太冷了。如果你不想戴围巾，我不介意用我的长袍把你裹起来。整个裹起来。",
                "呼出的气变成了白雾。我想在雾气上写个公式，求证我是如何爱上你的。",
                "如果你敢去和韦斯莱双子打雪仗而不叫我，我就把你埋进雪堆里，再把你挖出来吻你。",
                "圣诞节快到了。除了你，我不需要任何礼物。你就是我的'至高善'。",
                "手这么凉？把手伸进我的衣领里。别怕，我不冷……好吧，有点，但为了你，值得。"
            ] 
        },

        touch_level_0: ["找我？", "怎么，一天不见想我了？", "离扎比尼远点，他脑子里装的都是鼻涕虫。", "这是我的座位，我的best friend。", "你的魔药论文写完了？需要我“不经意地”给你一点灵感？", "……？你看他的眼神很碍眼。", "你哥哥又管你了？他怎么比魔法部还啰嗦。", "这点小事也需要问我？", "去霍格莫德？行啊，反正我也没什么事。", "别碰我的头发。", "Fine，只能你碰。", "你今天看起来……不那么蠢。", "这本书借你，看完了记得还，上面有我的笔记。", "我只是恰好路过图书馆。你以为我特意来的？", "喂，别对那幅画发呆了，走了。", "赫奇帕奇的那个新生在看你。", "……啧。", "你觉得伦敦眼和霍格沃兹的星空，哪个更好看？", "行了，别傻笑了。", "Oh, by the way, I like you."],
        touch_level_1: ["Boyfriend。听清楚了？", "过来，让我抱一下。", "你今天又和法斯特笑了多久？", "别让我重复第二遍。", "叫我bf。", "Bloody hell, 你只能看我。", "我的袍子，你想穿就穿。", "所以，你现在完全是我的了？", "手给我。", "我在拉文克劳公共休息室等你，别让我等太久。", "你的心思最好都在我身上。", "昨天晚上梦到我了吗？", "没梦到？那你今天最好一整天都想着我。", "你哥哥好像不太高兴？……关我屁事。", "我再说一遍，别在布雷斯面前笑。", "你是笨蛋吗？这种咒语都记不住。", "过来，我教你。", "我喜欢你身上的味道。", "每天一次的……I like you。", "不许看别人，听见没？"],
        touch_level_2: ["我们在思考同一个问题，不是吗？", "毕业后去梵蒂冈？还是先去看看苏格兰高地的羊？", "但我的生命不是要惊人激荡…有你就够了。", "你的想法总是很有趣，my best friend。", "嗯，我懂你的意思。", "别担心，一切有我。", "累了就靠着我，别硬撑。", "有时候我觉得，我们像是同一个灵魂分成了两半。", "除了我，没人能真正理解你，对吗？", "我在想，如果我们在麻瓜世界相遇，会是什么样。", "大概会在一家只放爵士的咖啡厅，假装无依无靠。", "然后呢？然后我带你回家。", "你今天有点不对劲。过来。", "不用说话，我知道。", "我们的未来，你想好了吗？", "无论你想去哪，我都陪你。", "和你在一起，沉默也变得有趣。", "我爱你，用柏拉图的方式，也用最原始的方式。", "我的守护神只为你存在。", "I like you, today and every day."],
        touch_level_3: ["你是我的，明白吗？", "别想逃。", "你的灵魂，你的身体，你的每一个想法……都是我的。", "恨我？可以。恨我多少遍，就是爱我多少遍。", "我想把你藏起来，只有我能看见。", "Fuck...你为什么这么迷人？", "不许离开我的视线。一步也不行。", "谁弄哭你了？我去杀了他。", "你的眼泪只能为我流。", "看着我。", "世界上只能有一个诺亚·司德里安，也只能有一个你。我们是唯一的。", "你的一切反应都让我着迷，包括你的恐惧。", "就算是在阿兹卡班，我也会把你抢回来。", "你是我的永恒，我的真理，我的……全部。", "别呼吸其他男人碰过的空气。", "如果这就是沉沦，那我心甘情愿。", "再说一遍你爱我。", "不够。", "你的存在本身，就是对我最极致的引诱。", "I like you... to the point of insanity."],
        pomodoro: {
            default: { 
                start: ["开始吧。世界会安静下来。", "把门关上，把杂念丢出去。"], 
                mid: ["嘘……别说话，专心。", "我会一直在这里。", "你的专注很迷人。", "坚持住，别让我失望。", "看着书，别看我……好吧，只能看一眼。"], 
                end: ["只剩最后一点了。", "完美的收尾。", "你做得很好。"], 
                break: ["好了，停下来。去喝点水。", "休息一下，这也是计划的一部分。", "过来，让我抱抱。", "把脑子放空。"] 
            },
            reading: { 
                start: ["打开书。让我们看看历史的尘埃里藏着什么。", "阅读是与死者的对话。保持敬意。"],
                mid: ["书页翻动的声音……很好听。", "知识是最安全的堡垒。", "这一章很难吗？我可以教你。", "别漏掉细节。", "如果困了，就想想未来。", "你的眼睛在发光，是因为知识，还是因为我？"], 
                end: ["把这一页读完。", "合上书，把知识锁在脑子里。"],
                break: ["眼睛酸了吗？闭上眼，休息一会儿。", "读完了？告诉我你的感想。", "给我读一段你最喜欢的句子。"] 
            },
            writing: { 
                start: ["提起笔。让你的思想流淌在羊皮纸上。", "别怕写错。甚至我也犯过错（虽然很少）。"],
                mid: ["羽毛笔的沙沙声，比任何乐章都悦耳。", "你的字……有点进步。", "思考，然后落笔。", "别急，逻辑要清晰。", "手腕放松，别握得太紧。", "如果你不知道怎么写，就写我的名字。"], 
                end: ["最后一行。", "完美的句号。"],
                break: ["手酸了吧？放下来，我帮你揉揉。", "写得不错，休息一下。", "墨水的味道...和你很配。"] 
            },
            alchemy: { 
                start: ["清理坩埚。魔药容不得一丝杂质。", "即使是最简单的药剂，也需要敬畏。"],
                mid: ["小心火候。", "精准，是魔药学的核心。", "这一步很关键，别分心。", "我在看着你操作。", "如果是斯内普，他现在已经扣你分了。但我不是。", "顺时针搅拌，别忘了。"], 
                end: ["熄火。", "装瓶。小心烫。"],
                break: ["让药剂冷却一会儿，你也一样。", "清理一下桌面，然后休息。", "刚才那个步骤，你处理得很漂亮。"] 
            },
            meditation: { 
                start: ["闭上眼。深呼吸。", "现在，只有我们两个。"],
                mid: ["清空大脑……除了我。", "感受呼吸。", "那些杂念……交给我来处理。", "很安静……", "听听心跳的声音。", "你的呼吸乱了。稳住。"], 
                end: ["慢慢醒来。", "回到现实。"],
                break: ["慢慢睁开眼睛。", "感觉如何？世界是不是清晰了一些？", "过来，你可以靠着我睡一会儿。"] 
            },
            pause: ["这就累了？", "需要我给你施个提神咒吗？", "……", "好吧，稍微停一下也可以。"],
            touch_work: ["（用眼神示意你专心）", "嘘。", "（抓住你的手，轻轻捏了一下）", "别闹，在计时呢。", "……再坚持一下。", "专注。别逼我惩罚你。"]
        },
        warmTouch: [ "……手还是这么凉。过来，我帮你捂热。", "别闹了，让别人看到像什么样子……好吧，再一下。", "围巾很暖和，你的手也是。", "你今天表现不错，这是奖励。", "如果这样能让你更专心的话……我不介意。" ],
        intimateTouch: [ "（他抓住你的手，放在唇边轻吻了一下，蓝色的眼睛在阴影里显得格外深邃）还想碰哪里？", "（他将你拉进怀里，下巴抵着你的头顶，低声说）别动，让我抱一会儿。就一会儿。", "闻到了吗？你身上的味道。这味道只能属于我。", "为什么停下了？继续。我允许的。", "你的身体，你的思想，都是我的。别忘了这一点。" ],
        truthful: ["（他喝了一口，眼神变得有些迷离）……你今天，比平时更……吸引我。", "过来，坐近点。我不想和你说那么远。", "他们都说我冷血，但他们不知道，我的血只为你沸腾。", "别看书了，看着我。我现在只想看你。", "你知道吗，我有时候真想把你关起来，这样你就永远属于我一个人了。"],
        idleChatter: [ "你在看窗外？窗外可没有答案。", "你在想什么？最好是关于这个单词，或者我。", "别对谁都那么好，不是所有人都值得，尤其是一些愚蠢的格兰芬多。", "学完这些，我们去黑湖边走走。那里很安静。", "我的一切谋划，一切野心，终点都是你。", "斯内普要是看到你这样，一定会给你关禁闭。哦，他不敢。", "别发呆了。难道你在想怎么用韦斯莱的笑话产品对付我？", "如果觉得累了，就靠在我身上。但别睡着。", "你们[PLAYER_HOUSE]，有时候真是……很有趣。", "我们的未来……我已经规划好了。你只需要跟上我的脚步。一步都不能落后。" ],
        echo: { power_outage: "说起来，上次停电的时候，你好像一点都不害怕。不愧是赫奇帕奇。", sprout_encounter_good: "斯普劳特教授很看好你。别让她失望。", rival_win: "马尔福最近没再来烦你吧？他最好识趣点。" },
        correct: [ "还行。下一个。", "嗯哼，算是有点长进。", "正确。思维很清晰。", "这个答案还不算太辱没拉文克劳的智慧。继续。", "很好，逻辑正确。", "看来你总算把脑子从魁地奇球场拿回来了。", "看来我的指导并非对牛弹琴。", "这个反应速度……可以。今晚可以允许你靠着我看书。", "接受。", "下一个错误别犯这么低级。", "终于对了。……过来。"],
        silly: ["*啾!*", "*啾啾!*"],
        incorrect: ["……？", "不对。", "再来一次。", "你的心思飞到哪去了？", "是不是又在想你那个好哥哥了？", "啧，真麻烦。", "看着我的眼睛，再说一遍。", "你的大脑是用来装饰的？", "这个发音，你是想吸引禁林的什么奇特生物吗？", "错了。今天不许再和法斯特说话。", "拉文克劳的智慧呢？被你吃了？", "专心点，我的best friend。", "你是不是觉得答错了，我就会多陪你一会儿？", "呵，想得美。", "Bloody hell…你是在挑战你BF的耐心吗？", "停。休息一下。", "我猜肯定是扎比尼的愚蠢通过空气传染给你了。", "把这个当成一个咒语，集中你的精神力。", "你再用这种眼神看我，我可就要分心了。", "错了。惩罚你……多看我三秒。", "Come on，你没这么笨。", "我怀疑你偷偷喝了“忘情水”。", "你的记忆力是被地精偷走了吗？", "我是不是该考虑用禁锢咒把你绑在椅子上？", "别咬嘴唇。", "这个问题很难？还是你在想别的什么人？", "需要我用摄神取念帮你把答案找出来吗？", "错了。你今天还没说 I like you。", "叹什么气？错了就再来。", "What the...你怎么会在这里出错？", "换个思路。别钻牛角尖。", "看来我得想个新办法让你长记性。", "错了。是不是我靠得太近了？", "那我再近一点。", "别灰心，又不是世界末日。", "你是不是故意的？", "……行吧，这次算你可爱。但还是错了。", "清空你的脑子。现在里面只能有我。", "离布雷斯远点，我早就说过，他的智商会拉低整个霍格沃兹的平均分。"],
        reviewCorrect: ["很好，看来你真的记住教训了。", "嗯，这次对了。别再忘了。", "看来重复是有用的。"],
        reviewIncorrect: ["……还是错了。", "同一个地方摔倒两次？赫奇帕奇的坚韧不该只用在犯错上。", "专心。这是你犯过错的地方。"],
        levelUp: [ "" , "诺亚·司德里安把乐乐拉到身边，蓝宝石般的眼睛盯着你。“最近学习效率不错，但和别人走得太近了。别忘了，你只是我一个人的best friend。记住，你的BF随时在看着你。”" , "诺亚·司德里安突然从背后抱住乐乐，下巴抵在你肩上，声音低沉而危险。“Boyfriend就Boyfriend，非要我掰开了揉碎了说？Fine. 但你要是敢用这个称呼叫别人——我不介意让你见识一下‘B’开头的其他单词，比如'Berserk'。懂了？”" , "诺亚·司德里安握住乐乐的手，十指紧扣。“我还希望我们会一直有话能说，到半个世纪后你还在告诉我你被哪一部作品触动，这样我就能在看完后陪你到苏格兰高地掉掉眼-…所以，快点搞定这些破单词，我们的未来还有很多事要做。”" , `乐乐完成了最后一个单词。诺亚·司德里安收起你的书，湛蓝的眼眸里是毫不掩饰的欲望和爱意。\n\n“恭喜你，my best friend，my lover，我的一切。”\n\n他将你打横抱起，走向卧室。\n\n“理论学习结束了。现在，该进行我们之间更重要的实践课了。你的BF会亲自'指导'，确保你对每一个'知识点'都记忆深刻，身体力行……”` ] }
};

const achievements = {
    wordMaster10: { name: "初窥门径", desc: "征服10个单词。", unlocked: false, journalEntries: ["她征服了最初的10个单词。这是一个微不足道的开始，但任何宏伟的计划，都源于坚实的第一步。她的第一步，是和我一起迈出的。", "10个单词。我注意到她对‘erroneous’这个词的拼写很犹豫，但第一次就记住了‘appreciate’。呵，真有趣。"] },
    wordMaster100: { name: "渐入佳境", desc: "征服100个单词。", unlocked: false, journalEntries: ["100个单词了。她的进步速度比我预估的要快。赫奇帕奇的坚韧，用在正确的地方，效率也不低。", "她已经掌握了100个单词。我开始有点期待，当她征服所有单词的那一天，会是什么样的光景。"] },
    wordMasterAll: { name: "世界征服者", desc: "征服所有单词。", unlocked: false, journalEntries: ["结束了。所有的单词。我从未怀疑过她能做到，但亲眼见证这一刻，我还是……感到了一丝无法言说的骄傲。我们的契约完成了，但我们的故事，才刚刚开始。"] },
    perfectStreak10: { name: "逻辑之光", desc: "连续答对10次。", unlocked: false, reward: { points: 50 }, journalEntries: ["连续10次正确。她的思维开始变得清晰、有条理。很好。", "她的连对达到了10次。专注的样子，让她看起来……和平时不太一样，多了一份锋芒。"] },
    perfectStreak50: { name: "智慧化身", desc: "连续答对50次。", unlocked: false, reward: { points: 200, dialogue: "连续50次正确……你的大脑就像一台精密的仪器。我很满意。"}, journalEntries: ["连续50次。这种程度的专注力，即使在拉文克劳也不多见。我开始好奇，她的极限在哪里。", "50次连对，她的表现无懈可击。我必须承认，此刻的她，闪耀着智慧的光芒，这非常……吸引我。"] },
    richAF: { name: "小小投资家", desc: "累计获得1000专注点。", unlocked: false, journalEntries: ["她的专注点累积到了1000。看来我的指导卓有成效。这份‘资产’，将是我们未来计划的基石。", "1000点。她似乎对累积这些数字很有热情，像一只努力囤积过冬坚果的小獾。很……可爱。"] },
    superRich: { name: "对角巷VIP", desc: "累计获得5000专注点。", unlocked: false, reward: { affection: 50 }, journalEntries: ["5000点。她积累的‘财富’已经相当可观了。希望她能学会如何明智地使用它们，而不是全都换成糖果。"] },
    shopaholic: { name: "慷慨的赞助人", desc: "购买10件不同的礼物。", unlocked: false, journalEntries: ["她已经送了我10件不同的东西了。她似乎很喜欢用这种方式来表达……关心。我得承认，我并不讨厌。", "这是第10件礼物了。她总是在用这些小东西试探我的底线，或者说，想看看我不同反应的样子。真是个狡猾的小獾。"] },
    collector: { name: "我的收藏家", desc: "购买所有【奇珍异宝】分类下的非消耗品。", unlocked: false, reward: { dialogue: "你把我喜欢的东西都搜集来了……是想把我的世界也一并收藏吗？" }, journalEntries: ["她把所有我感兴趣的奇珍异宝都收集来了。看着这些东西，我感觉她不是在收藏物品，而是在一点点地……填满我的世界。"] },
    knockturnRegular: { name: "翻倒巷常客", desc: "购买5件翻倒巷的商品。", unlocked: false, reward: { dialogue: "你对禁忌的知识似乎很有兴趣。很好，求知欲不该有边界。" }, journalEntries: ["她对翻倒巷的东西表现出了超乎寻常的兴趣。这份对危险的好奇心让我有些担忧，但也……有些着迷。"] },
    trueLove: { name: "心意相通", desc: "送出【手写的情书】。", unlocked: false, journalEntries: ["今天，我收到了一封……情书。她的字迹还是一如既往的难看，但那些笨拙的词句，却比任何精妙的咒语都更有力量。"] },
    soulmate: { name: "灵魂伴侣", desc: "关系达到【灵魂伴侣】。", unlocked: false, reward: { unlock_scene: 'dormitory' }, journalEntries: ["【灵魂伴侣】。字典上说，这是指精神上高度契合的两个人。我以前不信这些，但现在，看着她，我开始觉得，或许有些词语的存在，本身就是一种证明。"] }
};

const el = {};
let state;
// Pomodoro Vars
let pomoTimer = null;
let pomoTimeLeft = 0;
let pomoDurationTotal = 0;
let isWorkSession = true;
let isRunning = false;
let currentGameMode = 'word';
let selectedPomoType = 'reading';
const pomoTypes = {
    reading: "📖 魔法史",
    writing: "✍️ 魔文撰写",
    alchemy: "🧪 魔药调配",
    meditation: "🧘 大脑封闭术"
};

function getDefaultState() { return { words: initialWordsData.map(w => ({ id: w.id, word: w.word, phonetic: w.phonetic, meaning: w.meaning, etymology: w.etymology, hint: w.hint, noahWhisper: w.noahWhisper, dueDate: 0, interval: 0, easeFactor: 2.5, isNew: true, incorrect: 0 })), currentWord: null, mode: 'mcq', reviewMode: false, reviewQueue: [], reviewStep: '', streak: 0, sessionMistakes: 0, isWaiting: false, idleTimer: null, eventTimer: null, stateTimer: null, weatherTimer: null, focusPoints: 0, affection: 0, level: 0, lastSeen: Date.now(), purchasedItems: [], usableItems: {}, unlockedFeatures: {}, activeEffects: {}, unlockedDialogues: {}, noahState: { mood: 75, focus: 100, jealousy: 0 }, gameStats: { totalPoints: 0, consecutiveCorrect: 0, totalGifts: 0, wordsSinceBreak: 0, recentMajorEvent: null }, weather: {current: '晴朗', sceneName: '霍格沃茨图书馆'}, currentScene: 'library', unlockedScenes: ['library'], eventLog: [], achievements: JSON.parse(JSON.stringify(achievements)), specialDay: null, weeklyStats: { correct: 0, incorrect: 0, gifts: [], events: [], lastReset: Date.now() }, profile: { name: null, house: null },currentBook: 'cet4', pomoLog: [], pomoDailyReviewDone: false }; }

function saveState() { try { state.lastSeen = Date.now(); const stateToSave = { ...state, idleTimer: null, eventTimer: null, stateTimer: null, weatherTimer: null, currentWord: null }; localStorage.setItem(SAVE_KEY, JSON.stringify(stateToSave)); } catch (e) { console.error("无法保存契约。", e); } }
function loadState() { const savedState = localStorage.getItem(SAVE_KEY); if (savedState) { try { const loaded = JSON.parse(savedState); state = { ...getDefaultState(), ...loaded };
 state.noahState = { ...getDefaultState().noahState, ...loaded.noahState }; state.gameStats = { ...getDefaultState().gameStats, ...loaded.gameStats }; state.usableItems = { ...getDefaultState().usableItems, ...loaded.usableItems }; state.unlockedFeatures = { ...getDefaultState().unlockedFeatures, ...loaded.unlockedFeatures }; state.achievements = { ...getDefaultState().achievements, ...loaded.achievements }; state.weather = { ...getDefaultState().weather, ...loaded.weather }; state.specialDay = loaded.specialDay || null; state.weeklyStats = { ...getDefaultState().weeklyStats, ...loaded.weeklyStats }; state.profile = { ...getDefaultState().profile, ...loaded.profile }; state.pomoLog = loaded.pomoLog || []; state.pomoDailyReviewDone = loaded.pomoDailyReviewDone || false; if (!Array.isArray(state.words) || state.words.length !== initialWordsData.length) { console.warn("词库结构已更新，重置单词进度。"); state.words = getDefaultState().words; } } catch (e) { console.error("加载契约失败，将重新开始。", e); state = getDefaultState(); } } else { state = getDefaultState(); } }
// --- 新增：显示浮动文字特效 ---
function showFloatingText(text, color, x, y) {
    const el = document.createElement('div');
    el.className = 'floating-popup';
    el.textContent = text;
    el.style.color = color || '#FFD54F'; // 默认金色
    
    // 如果没有指定坐标，就默认显示在屏幕中央偏上
    if (x === undefined || y === undefined) {
        el.style.left = '50%';
        el.style.top = '40%';
        el.style.transform = 'translate(-50%, -50%)'; // 居中修正会和动画冲突，这里简单处理
    } else {
        el.style.left = x + 'px';
        el.style.top = y + 'px';
    }

    document.body.appendChild(el);

    // 动画结束后删除元素，防止内存泄漏
    setTimeout(() => {
        el.remove();
    }, 1500);
}

function init() {
    loadState();
    document.body.innerHTML = `
    <div class="main-container">
        <div class="character-container">
         <!-- ✅ 粘贴这段新代码 --> <!-- 这是一个横向排列的容器 --> <div style="display: flex; gap: 10px; align-items: flex-start; margin-bottom: 5px;">          <!-- 左边：放按钮和隐藏的文件输入框 -->     <div style="display: flex; flex-direction: column; justify-content: flex-start;">         <input type="file" id="photo-upload" accept="image/*" style="display: none;">         <!-- 我把按钮样式改了一下，让它变成竖着的长条，或者小图标，放在左边不占地方 -->         <button id="change-photo-btn" style="             background: rgba(0,0,0,0.3);              border: 1px dashed var(--accent-color);              color: var(--accent-color);              border-radius: 5px;              cursor: pointer;              padding: 10px 5px;              font-size: 1.2rem;              opacity: 0.7;              height: 320px; /* 让按钮高度和照片一样，看起来整齐 */             width: 15px;   /* 宽度固定 */             display: flex;              align-items: center;              justify-content: center;             transition: all 0.2s;         " title="点击更换照片"> </button>     </div> 
     <!-- 右边：放照片 -->     <div style="flex-grow: 1;">         <a href="#" id="character-image-link">             <!-- 注意：我把照片原本的 margin-bottom 去掉了，因为外层容器已经加了 -->             <img id="character-image" src="https://youke1.picui.cn/s1/2025/11/04/6909970919b92.jpg" alt="Noah Sidrian" style="margin-bottom: 0;">         </a>      </div> </div><h2 id="character-name">诺亚·司德里安</h2>
            <div id="time-display-container"><div id="date-display"></div><div id="time-display"></div></div>
            <div class="environment-status">场景: <span id="current-scene"></span> | 天气: <span id="current-weather"></span></div>
            <div id="relationship-status">当前关系: <span id="relationship-level"></span><div class="progress-bar"><div id="relationship-progress" class="progress-bar-inner"></div></div><div class="stat-bar-label">心情: <span id="mood-value"></span></div><div class="progress-bar"><div id="mood-progress" class="progress-bar-inner"></div></div><div class="stat-bar-label">专注: <span id="focus-value"></span></div><div class="progress-bar"><div id="focus-progress" class="progress-bar-inner"></div></div></div>
            <div class="dialogue-box"><p id="dialogue-text"></p><p id="streak-counter"></p></div>
                       <!-- --- 修改开始：将数据包在一行 --- -->             <div class="stats">                 <div class="stats-info-row">                     <div>专注点: <span id="focus-points">0</span></div>                     <p style="margin:0;">已掌握: <span id="mastered-count">0</span> / <span id="total-count">0</span></p>                 </div>                 <!-- 下面是按钮区域，保持原样连接在后面 -->                 <div id="action-buttons-container" class="action-buttons"><button id="shop-btn" class="action-btn">对角巷</button><button id="review-btn" class="action-btn">错题回顾</button><button id="scene-btn" class="action-btn" disabled>场景切换</button><button id="achievement-btn" class="action-btn">秘密成就</button><button id="log-btn" class="action-btn">诺亚的日记</button><button id="reset-btn" class="action-btn">重置契约</button><button id="book-btn" class="action-btn">切换词书</button> <button id="export-btn" class="action-btn">导出存档</button>  <button id="import-btn" class="action-btn">导入存档</button>  <input type="file" id="import-file-input" style="display: none;" accept=".json"></div>             </div>             <!-- --- 修改结束 --- -->
        </div>
        <div class="game-container">
            <button id="mode-switch-btn">切换模式</button>
            <div id="word-learning-interface">
                <h1 id="game-title">备考契约</h1>
                <div class="word-display"><div id="noah-thought"></div><h2 id="word" class="hidden">Word</h2><p id="phonetic" class="hidden"></p><p id="meaning-prompt" class="hidden"></p></div>
                <div class="game-area"><div id="multiple-choice-container" class="options-container hidden"></div><div id="spelling-container" class="spelling-container hidden"><input type="text" id="spelling-input" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"><button id="spelling-submit-btn">确认</button></div><div id="feedback-container" class="feedback-container"></div></div>
            </div>
            <div id="pomodoro-container">
                <h1 style="color: var(--accent-color);">永恒守望</h1>
                <div class="pomo-settings">
                    <div class="pomo-setting-row">
                        <label>专注类型</label>
                        <div class="pomo-type-grid">
                            <button class="pomo-type-btn active" data-type="reading">📖 魔法史</button>
                            <button class="pomo-type-btn" data-type="writing">✍️ 魔文撰写</button>
                            <button class="pomo-type-btn" data-type="alchemy">🧪 魔药调配</button>
                            <button class="pomo-type-btn" data-type="meditation">🧘 大脑封闭术</button>
                        </div>
                    </div>
                    <div class="pomo-setting-row">
                        <label>专注时长: <span id="pomo-duration-val">25</span> 分钟</label>
                        <input type="range" id="pomo-duration-slider" min="5" max="120" step="5" value="25">
                    </div>
                </div>
                <div class="timer-circle-container">
                    <svg class="timer-svg" viewBox="0 0 250 250">
                        <circle class="timer-circle-bg" cx="125" cy="125" r="112"></circle>
                        <circle id="timer-progress-bar" class="timer-circle-fg" cx="125" cy="125" r="112"></circle>
                    </svg>
                    <div id="timer-display">25:00</div>
                </div>
                <div id="timer-status">准备专注了吗？</div>
                <div class="timer-controls">
                    <button id="start-timer" class="timer-btn">开始</button>
                    <button id="pause-timer" class="timer-btn" disabled>暂停</button>
                    <button id="reset-timer" class="timer-btn">重置</button>
                </div>
                <button id="pomo-log-btn" class="timer-btn">专注日志</button>
            </div>
        </div>
    </div>
    <div id="generic-modal" class="modal"><div class="modal-content"><h2 id="modal-title"></h2><div class="modal-body" id="modal-body"></div><div id="modal-choices"></div><button id="modal-close-btn" class="close-btn">关闭</button></div></div>`;
    
    Object.assign(el, { body: document.body, characterName: document.getElementById('character-name'), gameTitle: document.getElementById('game-title'), noahThought: document.getElementById('noah-thought'), word: document.getElementById('word'), phonetic: document.getElementById('phonetic'), meaningPrompt: document.getElementById('meaning-prompt'), mcqContainer: document.getElementById('multiple-choice-container'), spellContainer: document.getElementById('spelling-container'), spellInput: document.getElementById('spelling-input'), spellBtn: document.getElementById('spelling-submit-btn'), feedbackContainer: document.getElementById('feedback-container'), dialogue: document.getElementById('dialogue-text'), streak: document.getElementById('streak-counter'), relLevel: document.getElementById('relationship-level'), relProgress: document.getElementById('relationship-progress'), moodProgress: document.getElementById('mood-progress'), moodValue: document.getElementById('mood-value'), focusProgress: document.getElementById('focus-progress'), focusValue: document.getElementById('focus-value'), masteredCount: document.getElementById('mastered-count'), totalCount: document.getElementById('total-count'), charImgLink: document.getElementById('character-image-link'), shopBtn: document.getElementById('shop-btn'), reviewBtn: document.getElementById('review-btn'), sceneBtn: document.getElementById('scene-btn'), achievementBtn: document.getElementById('achievement-btn'), logBtn: document.getElementById('log-btn'), focusPoints: document.getElementById('focus-points'), dateDisplay: document.getElementById('date-display'), timeDisplay: document.getElementById('time-display'), modal: document.getElementById('generic-modal'), modalTitle: document.getElementById('modal-title'), modalBody: document.getElementById('modal-body'), modalChoices: document.getElementById('modal-choices'), modalCloseBtn: document.getElementById('modal-close-btn'), currentScene: document.getElementById('current-scene'), currentWeather: document.getElementById('current-weather'), envStatus: document.querySelector('.environment-status'), actionButtonsContainer: document.getElementById('action-buttons-container'), resetBtn: document.getElementById('reset-btn') });
    
    // Pomo Element Refs
    el.wordInterface = document.getElementById('word-learning-interface');
    el.pomoInterface = document.getElementById('pomodoro-container');
    el.modeSwitchBtn = document.getElementById('mode-switch-btn');
    el.timerDisplay = document.getElementById('timer-display');
    el.timerProgress = document.getElementById('timer-progress-bar');
    el.startTimerBtn = document.getElementById('start-timer');
    el.pauseTimerBtn = document.getElementById('pause-timer');
    el.resetTimerBtn = document.getElementById('reset-timer');
    el.timerStatus = document.getElementById('timer-status');
    el.pomoSlider = document.getElementById('pomo-duration-slider');
    el.pomoVal = document.getElementById('pomo-duration-val');
    el.pomoLogBtn = document.getElementById('pomo-log-btn');
el.bookBtn = document.getElementById('book-btn');
    el.pomoSettings = document.querySelector('.pomo-settings');

    el.totalCount.textContent = initialWordsData.length;
    // --- 诺亚照片更换功能 START ---
    const photoUpload = document.getElementById('photo-upload');
    const changePhotoBtn = document.getElementById('change-photo-btn');
    const charImage = document.getElementById('character-image');
    const PHOTO_SAVE_KEY = 'noah_custom_photo_v1'; // 专门用来存照片的钥匙

    // 1. 尝试加载之前保存的照片
    const savedPhoto = localStorage.getItem(PHOTO_SAVE_KEY);
    if (savedPhoto) {
        charImage.src = savedPhoto;
    }

    // 2. 点击按钮时，触发文件选择
    changePhotoBtn.addEventListener('click', (e) => {
        // 阻止冒泡，防止触发原本的点图片对话逻辑
        e.stopPropagation(); 
        photoUpload.click();
    });

    // 3. 选好图片后，替换并保存
    photoUpload.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = (event) => {
                const newPhotoUrl = event.target.result;
                charImage.src = newPhotoUrl; // 替换图片
                localStorage.setItem(PHOTO_SAVE_KEY, newPhotoUrl); // 保存到手机本地
                
                // 诺亚给个小反馈 (可选)
                if(typeof showDialogue === 'function') {
                    showDialogue(null, "换了新照片？希望是你喜欢的样子。");
                }
            };
            reader.readAsDataURL(file);
        }
    });
    // --- 诺亚照片更换功能 END ---

    el.charImgLink.addEventListener('click', (e) => { 
        e.preventDefault(); 
        if (currentGameMode === 'word') showDialogue('touch');
        else if (currentGameMode === 'pomo') {
            const pool = isRunning && isWorkSession ? noah.dialogue.pomodoro.touch_work : ['别说话。'];
            showDialogue(null, getRandomItem(pool));
        }
    });
    el.spellBtn.addEventListener('click', handleSpellAnswer);
    el.spellInput.addEventListener('keydown', e => { if (e.key === 'Enter') handleSpellAnswer(); });
    el.shopBtn.addEventListener('click', openShop);
    el.reviewBtn.addEventListener('click', startReviewSession);
    el.sceneBtn.addEventListener('click', openSceneSelector);
    el.achievementBtn.addEventListener('click', openAchievements);
    el.logBtn.addEventListener('click', openEventLog);
    el.bookBtn.addEventListener('click', openBookSelector);
el.resetBtn.addEventListener('click', resetGame);
    document.getElementById('export-btn').addEventListener('click', exportSaveData);
    document.getElementById('import-btn').addEventListener('click', triggerImport);
    document.getElementById('import-file-input').addEventListener('change', handleFileImport);

    el.pomoLogBtn.addEventListener('click', openPomoLog);
    el.modalCloseBtn.addEventListener('click', () => { el.modal.style.display = 'none'; if(state.isWaitingForNext) { state.isWaitingForNext = false; state.reviewMode ? nextReviewWord() : showNextButton(); } });
    el.modeSwitchBtn.addEventListener('click', toggleGameMode);
    document.querySelectorAll('.pomo-type-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            if(isRunning) return;
            document.querySelectorAll('.pomo-type-btn').forEach(b => b.classList.remove('active'));
            e.target.classList.add('active');
            selectedPomoType = e.target.dataset.type;
            showDialogue(null, `准备进行${pomoTypes[selectedPomoType]}吗？好选择。`);
        });
    });
    el.pomoSlider.addEventListener('input', (e) => {
        if(isRunning) return;
        el.pomoVal.textContent = e.target.value;
        pomoTimeLeft = parseInt(e.target.value) * 60;
        pomoDurationTotal = pomoTimeLeft;
        updatePomodoroDisplay();
    });
    el.startTimerBtn.addEventListener('click', startPomodoro);
    el.pauseTimerBtn.addEventListener('click', pausePomodoro);
    el.resetTimerBtn.addEventListener('click', resetPomodoro);
    if (!state.profile.name) setupProfile(); else runGame();
}

function runGame() {
    applyLoadedState();
    state.isWaiting = false; // <--- 【在这里加上这一行！】强制解除等待状态
    checkWeeklySummary();
    checkDailyPomoReview();
    handleSeasonalAndHolidayChanges();
    welcomeBackMessage(); 
    nextWord();
    // ... 后面的保持不变

    updateTime(); setInterval(updateTime, 1000);
    state.stateTimer = setInterval(updateNoahState, 60000);
    state.eventTimer = setInterval(triggerRandomEvent, 120 * 1000);
    state.weatherTimer = setInterval(updateWeather, 10 * MINUTE);
    pomoTimeLeft = parseInt(el.pomoSlider.value) * 60;
    pomoDurationTotal = pomoTimeLeft;
    updatePomodoroDisplay();
}

function resetGame() {
    if(confirm("【警告】你正在试图解除契约。\n\n重置将永久清除你的名字、学院、生日、所有回忆、礼物和进度。\n诺亚·司德里安将遗忘一切。\n\n你确定要重新开始吗？")) {
        // FORCE RESET LOGIC: Clear EVERYTHING and reload immediately
        localStorage.clear(); 
        // Add a timestamp to force cache busting
        location.replace(location.pathname + '?t=' + new Date().getTime());
    }
}

function toggleGameMode() {
    if (currentGameMode === 'word') {
        currentGameMode = 'pomo';
        el.wordInterface.style.display = 'none';
        el.pomoInterface.style.display = 'flex';
        el.modeSwitchBtn.textContent = "返回背词";
        showDialogue(null, "进入静谧领域。调整好你的状态。");
    } else {
        currentGameMode = 'word';
        el.pomoInterface.style.display = 'none';
        el.wordInterface.style.display = 'flex'; // <--- 【改成 flex】！恢复弹性布局
        el.modeSwitchBtn.textContent = "切换模式";
        // ...
    }
}

function updatePomodoroDisplay() {
    const m = Math.floor(pomoTimeLeft / 60).toString().padStart(2, '0');
    const s = (pomoTimeLeft % 60).toString().padStart(2, '0');
    el.timerDisplay.textContent = `${m}:${s}`;
    el.startTimerBtn.disabled = isRunning;
    el.pauseTimerBtn.disabled = !isRunning;
    el.pomoSlider.disabled = isRunning;
    const maxDash = 707; 
    let progress = 0;
    if (pomoDurationTotal > 0) progress = ((pomoDurationTotal - pomoTimeLeft) / pomoDurationTotal);
    el.timerProgress.style.strokeDashoffset = maxDash - (progress * maxDash);
}

function startPomodoro() {
    if (isRunning) return;
    isRunning = true;
    el.pomoSettings.style.opacity = '0.5';
    el.pomoSettings.style.pointerEvents = 'none';
    el.timerStatus.textContent = isWorkSession ? `${pomoTypes[selectedPomoType]}中... 保持专注。` : "休息时间。";
    
    const typePool = noah.dialogue.pomodoro[selectedPomoType] || noah.dialogue.pomodoro.default;
    const startDialogue = isWorkSession ? getRandomItem(typePool.start || noah.dialogue.pomodoro.default.start) : getRandomItem(typePool.break || noah.dialogue.pomodoro.default.break);
    showDialogue(null, startDialogue);

    pomoTimer = setInterval(() => {
        pomoTimeLeft--;
        updatePomodoroDisplay();
        if (pomoTimeLeft <= 0) {
            completePomodoroPhase();
        } else {
            const progress = 1 - (pomoTimeLeft / pomoDurationTotal);
            // Dynamic whisper logic
            if (isWorkSession && Math.random() < 0.05) {
                const pool = noah.dialogue.pomodoro[selectedPomoType] || noah.dialogue.pomodoro.default;
                let whisper = "";
                if (progress > 0.8) whisper = getRandomItem(pool.end || noah.dialogue.pomodoro.default.end);
                else whisper = getRandomItem(pool.mid || noah.dialogue.pomodoro.default.mid);
                showDialogue(null, whisper);
            }
        }
    }, 1000);
}

function pausePomodoro() {
    if (!isRunning) return;
    clearInterval(pomoTimer);
    isRunning = false;
    el.pomoSettings.style.opacity = '1';
    el.pomoSettings.style.pointerEvents = 'auto';
    el.timerStatus.textContent = "已暂停。别停太久。";
    showDialogue(null, getRandomItem(noah.dialogue.pomodoro.pause));
    updatePomodoroDisplay();
}

function resetPomodoro() {
    clearInterval(pomoTimer);
    isRunning = false;
    isWorkSession = true;
    el.pomoSettings.style.opacity = '1';
    el.pomoSettings.style.pointerEvents = 'auto';
    pomoTimeLeft = parseInt(el.pomoSlider.value) * 60;
    pomoDurationTotal = pomoTimeLeft;
    el.timerStatus.textContent = "准备好了吗？";
    showDialogue(null, "重置了。这一次，希望能看到终点。");
    updatePomodoroDisplay();
}

function completePomodoroPhase() {
    clearInterval(pomoTimer);
    isRunning = false;
    el.pomoSettings.style.opacity = '1';
    el.pomoSettings.style.pointerEvents = 'auto';
    
    if (isWorkSession) {
        const durationMins = parseInt(el.pomoSlider.value);
        const points = durationMins * 2;
        state.focusPoints += points;
        const today = new Date().toLocaleDateString();
        state.pomoLog.unshift({ date: today, timestamp: Date.now(), type: selectedPomoType, duration: durationMins });
        if(state.pomoLog.length > 500) state.pomoLog.pop();
        logEvent('simple', {message: `${state.profile.name}完成了一次 ${durationMins} 分钟的 ${pomoTypes[selectedPomoType]}。诺亚看着我的侧脸，在日记里写下：“她专注的样子，比任何复杂的魔纹都要迷人。”`});
        showEvent("专注完成", `${durationMins}分钟的${pomoTypes[selectedPomoType]}结束了。<br>做得很好。<br><i>(+${points} 专注点)</i>`, true);
        isWorkSession = false;
        pomoTimeLeft = 5 * 60;
        pomoDurationTotal = pomoTimeLeft;
        el.timerStatus.textContent = "休息时间。";
        changeNoahState({mood: 5, focus: 10});
    } else {
        showDialogue(null, "休息结束。该回到工作中了。");
        isWorkSession = true;
        pomoTimeLeft = parseInt(el.pomoSlider.value) * 60;
        pomoDurationTotal = pomoTimeLeft;
        el.timerStatus.textContent = "准备开始下一轮。";
    }
    updatePomodoroDisplay();
    updateStats();
    saveState();
}

// --- Calendar View Logic ---
let calCurrentDate = new Date();
function openPomoLog() {
    el.modalTitle.textContent = "专注日历";
    renderCalendar(calCurrentDate);
    el.modalChoices.innerHTML = '';
    el.modalCloseBtn.style.display = 'block';
    el.modal.style.display = 'flex';
}

function renderCalendar(date) {
    const year = date.getFullYear();
    const month = date.getMonth();
    const daysInMonth = new Date(year, month + 1, 0).getDate();
    const firstDay = new Date(year, month, 1).getDay();
    
    let content = `
        <div id="pomo-log-intro">铭刻的时间: ${state.pomoLog.reduce((acc, l) => acc + l.duration, 0)} 分钟</div>
        <div class="calendar-container">
            <div class="calendar-header">
                <button class="cal-nav-btn" onclick="changeCalMonth(-1)">&#10094;</button>
                <span>${year}年 ${month + 1}月</span>
                <button class="cal-nav-btn" onclick="changeCalMonth(1)">&#10095;</button>
            </div>
            <div class="calendar-grid">
                <div class="cal-day-label">日</div><div class="cal-day-label">一</div><div class="cal-day-label">二</div>
                <div class="cal-day-label">三</div><div class="cal-day-label">四</div><div class="cal-day-label">五</div><div class="cal-day-label">六</div>
    `;

    for (let i = 0; i < firstDay; i++) { content += `<div class="cal-day empty"></div>`; }

    for (let d = 1; d <= daysInMonth; d++) {
        const dayStr = new Date(year, month, d).toLocaleDateString();
        const isToday = dayStr === new Date().toLocaleDateString();
        const logs = state.pomoLog.filter(l => l.date === dayStr);
        const totalMins = logs.reduce((acc, l) => acc + l.duration, 0);
        
        let level = 'level-0';
        if (totalMins > 0) level = 'level-1';
        if (totalMins >= 30) level = 'level-2';
        if (totalMins >= 60) level = 'level-3';
        if (totalMins >= 120) level = 'level-4';

        content += `<div class="cal-day ${level} ${isToday ? 'today' : ''}" onclick="showCalDayDetails('${dayStr}')">${d}</div>`;
    }

    content += `
            </div>
            <div id="cal-detail-view">
                <div id="cal-detail-date">点击日期查看详情</div>
                <div id="cal-detail-content">这里记录着你每一次的努力。</div>
            </div>
        </div>`;
    
    el.modalBody.innerHTML = content;
    // Re-attach events since innerHTML wiped them
    window.changeCalMonth = (delta) => { calCurrentDate.setMonth(calCurrentDate.getMonth() + delta); renderCalendar(calCurrentDate); };
    window.showCalDayDetails = (dateStr) => {
        const logs = state.pomoLog.filter(l => l.date === dateStr);
        const detailDate = document.getElementById('cal-detail-date');
        const detailContent = document.getElementById('cal-detail-content');
        
        detailDate.textContent = dateStr;
        if (logs.length === 0) {
            detailContent.innerHTML = "这一天，时间未被铭刻。";
        } else {
            const total = logs.reduce((acc, l) => acc + l.duration, 0);
            let html = `总专注: ${total} 分钟 | ${logs.length} 次<br><br>`;
            logs.forEach(l => {
                const time = new Date(l.timestamp).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                html += `• ${time} - ${pomoTypes[l.type]} (${l.duration}m)<br>`;
            });
            detailContent.innerHTML = html;
        }
    };
}

function checkDailyPomoReview() {
    const now = new Date();
    const hour = now.getHours();
    const todayStr = now.toLocaleDateString();
    
    if ((hour >= 22 || hour < 4) && state.pomoDailyReviewDate !== todayStr) {
        const todayLogs = state.pomoLog.filter(l => l.date === todayStr);
        if (todayLogs.length === 0) return;
        state.pomoDailyReviewDate = todayStr;
        const totalMins = todayLogs.reduce((sum, l) => sum + l.duration, 0);
        
        let reviewText = "";
        if (totalMins > 120) {
            reviewText = `这么晚了，${state.profile.name}。我看了一下记录，你今天专注了 ${totalMins} 分钟。令人印象深刻的毅力。你是想把自己逼成第二个格兰杰吗？不过……做得很好。早点休息。`;
            changeNoahState({mood: 10, affection: 10}, false);
        } else if (totalMins > 60) {
            reviewText = `今天你花了 ${totalMins} 分钟在专注上。不错，保持这个节奏。这种稳定的积累，比突击更有价值。`;
            changeNoahState({mood: 5, focus: 5}, false);
        } else {
            reviewText = `只有 ${totalMins} 分钟的记录。看来你今天有点心不在焉，或者是太忙了？明天希望能看到你更多的时间。`;
        }
        
        logEvent('simple', {message: `诺亚在深夜整理了今天的记录。"${state.profile.name}今天努力了 ${totalMins} 分钟。我看着她睡着的样子，希望她梦里没有考试，只有...好吧，只有快乐。"`});
        showEvent("诺亚的夜间点评", reviewText);
        saveState();
    }
}

function setupProfile() {
    el.modalTitle.textContent = "签订我们的契约";
    el.modalBody.innerHTML = `
        <p id="setup-intro">在开始之前，我需要知道一些关于你的事。这将成为我们之间永恒的烙印。</p>
        <div id="setup-form">
            <div class="setup-field">
                <label for="playerName">你的名字:</label>
                <input type="text" id="playerName" value="" placeholder="请输入你的名字">
            </div>
            <div class="setup-field">
                <label for="playerHouse">你的学院:</label>
                <select id="playerHouse">
                    <option value="赫奇帕奇" selected>赫奇帕奇</option>
                    <option value="格兰芬多">格兰芬多</option>
                    <option value="拉文克劳">拉文克劳</option>
                    <option value="斯莱特林">斯莱特林</option>
                </select>
            </div>
            <div class="setup-field">
                <label for="specialDay">你们的纪念日 (MM-DD):</label>
                <input type="text" id="specialDay" placeholder="例如: 12-25">
            </div>
        </div>
    `;
    const choicesDiv = el.modalChoices;
    choicesDiv.innerHTML = ''; 
    const confirmBtn = document.createElement('button');
    confirmBtn.className = 'choice-btn';
    confirmBtn.textContent = '铭刻烙印';
    confirmBtn.onclick = () => {
        const name = document.getElementById('playerName').value.trim();
        const house = document.getElementById('playerHouse').value;
        let day = document.getElementById('specialDay').value.trim();

        if (!name) { alert("我需要知道你的名字。"); return; }
        if (day && !/^(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/.test(day)) {
            alert("纪念日格式不正确，请输入 MM-DD 格式，例如 03-15。如果不想设置，可以留空。");
            return;
        }
        if (!day) day = 'none';

        state.profile.name = name;
        state.profile.house = house;
        state.specialDay = day;
        
        el.gameTitle.textContent = `${name}的备考契约`;
        let reactionText = "";
        if (house === "拉文克劳") reactionText = "和我同院。很好，这意味着我们可以在公共休息室讨论学术直到深夜。但我不会对你手软，竞争会让思维更敏锐。";
        else if (house === "赫奇帕奇") reactionText = "赫奇帕奇……勤劳，忠诚。也许有点迟钝，但我不讨厌这种纯粹的品质。我会帮你弥补逻辑上的短板。";
        else if (house === "格兰芬多") reactionText = "格兰芬多？希望能少一点鲁莽，多一点思考。我会盯着你的，免得你在城堡里闯祸。";
        else if (house === "斯莱特林") reactionText = "斯莱特林。野心勃勃。我们都有混血的背景，希望你能明白，真正的力量来自知识，而非血统。";
        
        logEvent('simple', {message: `契约成立。从今天起，我的世界里有了一个叫 ${name} 的${house}。${reactionText}`});
        
        saveState();
        el.modal.style.display = 'none';
        runGame();
    };
    choicesDiv.appendChild(confirmBtn);
    el.modalCloseBtn.style.display = 'none';
    el.modal.style.display = 'flex';
}
// --- 新增：万能文本格式化工具 ---
// 这个函数负责把所有的“乐乐”和特定的“学院”替换成用户自己的
function formatText(text) {
    if (!text) return "";
    
    // 1. 获取用户现在的名字和学院，如果还没设置，就用默认的
    const playerName = state.profile.name || "乐乐";
    const playerHouse = state.profile.house || "赫奇帕奇";

    // 2. 替换名字：把文本里所有的 "乐乐" 和 "[PLAYER_NAME]" 都换成你的名字
    let formatted = text.replace(/乐乐/g, playerName).replace(/\[PLAYER_NAME\]/g, playerName);

    // 3. 替换学院：把文本里写死的 "赫奇帕奇" 换成你的学院
    // 注意：这里我们只替换对话中特指你学院的部分。
    // 如果你不想让道具名（如赫奇帕奇壁炉）也变，可以去掉 .replace(/赫奇帕奇/g, playerHouse)
    // 但为了彻底改名，建议保留：
    formatted = formatted.replace(/赫奇帕奇/g, playerHouse).replace(/\[PLAYER_HOUSE\]/g, playerHouse);

    return formatted;
}

// --- Core Functions ---
function applyLoadedState() {
    updateStats(); updateStreakCounter(); updateSceneButton(); updateWeatherUI(); updateReviewButton();
    if(state.currentScene) el.body.className = `scene-${state.currentScene}`;
    el.gameTitle.textContent = `${state.profile.name}的备考契约`;
    Object.entries(state.unlockedDialogues).forEach(([key, value]) => { if(value) noah.dialogue[key] = true; });
    if(state.purchasedItems.includes('magic_rose')) { document.querySelector('#character-name').innerHTML = '诺亚·司德里安 🌹'; }
    if(state.activeEffects.visual_effect === 'mood_ink') updateDialogueColor();
    updateFeatureButtons();
}
function welcomeBackMessage() { const timeDiff = Date.now() - state.lastSeen; const reviewCount = getDueWords().length; let msg = ""; const playerName = state.profile.name; if (timeDiff < MINUTE * 5) { const now = new Date(); const hours = now.getHours(); if (hours >= 5 && hours < 12) msg = noah.dialogue.timeBased.morning; else if (hours >= 12 && hours < 18) msg = noah.dialogue.timeBased.afternoon; else if (hours >= 18 && hours < 22) msg = noah.dialogue.timeBased.evening; else msg = noah.dialogue.timeBased.late_night; } else { const hoursGone = Math.round(timeDiff / HOUR); if (reviewCount > 0) { if (hoursGone > 24) { msg = `${playerName}，你总算回来了。你不在的这${Math.round(hoursGone/24)}天里，有 ${reviewCount} 个单词的记忆已经变得模糊。我们得抓紧了。`; } else { msg = `${playerName}，你回来了。你不在的这 ${hoursGone} 个小时里，我标记了 ${reviewCount} 个你可能已经遗忘的单词。准备好了吗？`; } } else { msg = `欢迎回来，${playerName}。看来你的记忆力还不错，目前没有需要紧急复习的单词。`; } } showDialogue(null, msg); }
function getDueWords() { const now = Date.now(); return state.words.filter(w => !w.isNew && w.dueDate <= now); }
function getNewWords() { return state.words.filter(w => w.isNew); }
function nextWord(forceSkip = false) {
    if (state.isWaiting && !forceSkip) return;
    if (state.reviewMode) { nextReviewWord(); return; }
    state.isWaiting = true;
    el.feedbackContainer.innerHTML = ''; el.noahThought.innerHTML = '';
    if (state.gameStats.wordsSinceBreak >= 20) { showBreakButton(); return; }
    let pool = getDueWords();
    if (pool.length === 0) { pool = getNewWords(); if (pool.length === 0) { endSession(); return; } el.noahThought.textContent = "（这是一个全新的挑战。）";
    } else { el.noahThought.textContent = `（我感觉${state.profile.name}快忘了这个...）`; if (state.activeEffects.memory_flashback_chance > 0 && Math.random() < state.activeEffects.memory_flashback_chance) { showDialogue(null, "等等...这个词，我们是不是错过一次？记忆球变红了。"); } }
    pool.sort((a, b) => a.dueDate - b.dueDate); state.currentWord = pool[0];
    if(state.unlockedFeatures.thought_sharing && state.currentWord.noahWhisper && Math.random() < 0.2) {
        const whisperSpan = document.createElement('span'); whisperSpan.className = 'noah-whisper'; whisperSpan.textContent = state.currentWord.noahWhisper; el.noahThought.appendChild(whisperSpan);
    }
    state.mode = state.currentWord.isNew ? 'mcq' : 'spell';
    if(forceSkip) { processAnswer(true, true); return; }
    state.mode === 'mcq' ? displayMCQ() : displaySpell();
    state.isWaiting = false; saveState();
}
// --- 核心判题逻辑修改版 ---
function processAnswer(isCorrect, isSkip = false) {
    const word = state.currentWord;
    const now = Date.now();

    // --- 逻辑 1: 自动校正羽毛笔 (Auto-Correct Quill) ---
    // 如果答错了，不是跳过，且拥有校正几率
    if (!isSkip && !isCorrect && state.activeEffects.auto_correct_chance > 0) {
        // 随机判定是否触发
        if (Math.random() < state.activeEffects.auto_correct_chance) {
            isCorrect = true; // 强行改成正确！
            // 特效反馈
            showDialogue(null, "你的羽毛笔突然抖动了一下，把错误的字母涂改成了正确的。……下不为例。");
            showFloatingText("自动校正触发!", "#89D9A2");
        }
    }

    // --- 逻辑 2: 自动书写羽毛笔 (Auto-Writing Quill) ---
    // 如果还是错的（没被校正），检查是否有自动书写几率
    if (!isSkip && !isCorrect && state.activeEffects.auto_complete_chance > 0) {
        if (Math.random() < state.activeEffects.auto_complete_chance) {
            el.spellInput.value = state.currentWord.word; // 帮你在输入框填上对的词
            isCorrect = true; // 强行改成正确！
            showDialogue(null, "羽毛笔自己动了起来，帮你写完了这个词。它似乎比你要聪明一点？");
            showFloatingText("自动书写触发!", "#F2B3C4");
        }
    }

    // --- 逻辑 3: 处理正确答案 ---
    if (isCorrect) {
        state.gameStats.consecutiveCorrect++; 
        state.gameStats.wordsSinceBreak++;
        state.weeklyStats.correct++;

        // 计算得分：如果是跳过得0分，否则基础分3分 + 连对奖励
        let pointsEarned = isSkip ? 0 : 3 + Math.floor(state.streak / 2);

        // --- 逻辑 4: 福灵剂 (Double Points) ---
        if (state.activeEffects.double_points_duration > 0) { 
            pointsEarned *= 2; // 分数翻倍
            state.activeEffects.double_points_duration--; // 消耗一次次数
            if(state.activeEffects.double_points_duration <= 0) delete state.activeEffects.double_points_duration;
        }

        // --- 逻辑 5: 速效逃课糖副作用 ---
        if (isSkip) { 
            changeNoahState({mood: -2, focus: -2}); 
            logEvent('item_used', {itemName: '速效逃课糖/诱饵炸弹'}); 
        }

        // 记忆曲线算法 (保持原样)
        if (word.isNew) { word.isNew = false; word.interval = 4 * HOUR; } 
        else { word.interval = Math.min(word.interval * word.easeFactor, 180 * DAY); }
        word.dueDate = now + word.interval; 
        word.easeFactor = Math.min(3.0, word.easeFactor + 0.1);

        // 处理对话反馈
        let dialogueType = 'correct';
        if (state.activeEffects.silly_feedback_duration > 0) { 
            dialogueType = 'silly'; 
            state.activeEffects.silly_feedback_duration--; 
        }

        // 加分与显示
        state.focusPoints += pointsEarned;         
        const focusRect = document.getElementById('focus-points').getBoundingClientRect();
        showFloatingText(`+${pointsEarned}`, '#FFD54F', focusRect.left, focusRect.top - 20);
        
        state.gameStats.totalPoints += pointsEarned; 
        state.streak++; 
        state.sessionMistakes = Math.max(0, state.sessionMistakes - 0.5);
        
        if (!isSkip) changeNoahState({mood: 1}, false);
        if (dialogueType && !isSkip) showDialogue(dialogueType);
        
        // 词源学彩蛋
        if (!isSkip && state.streak === 7 && word.etymology && Math.random() < 0.5) { 
            showEtymologyCorner(); 
        } else { 
            showNextButton(); 
        }

    } else {
        // --- 逻辑 6: 处理错误答案 ---
        
        // 蛇怪鳞片护盾
        if(state.usableItems.fatal_shield > 0 && state.streak <= -5) { 
            state.usableItems.fatal_shield--; 
            logEvent('item_used', {itemName: '石化的蛇怪鳞片'}); 
            showDialogue(null, "你身上的蛇怪鳞片发烫碎裂了，它为你抵挡了一次严重的失误惩罚。"); 
            state.streak = 0; 
            showNextButton(); 
            return; 
        }

        // 安神水护盾 (Streak Shield)
        if (state.activeEffects.streak_shield) { 
            delete state.activeEffects.streak_shield; 
            logEvent('effect_triggered', {effectName: '安神水'}); 
            showEvent("安神水生效", `你的失误被安神水的效果抵消了。连对未中断。呼...深呼吸。`); 
            showNextButton(); 
            return; 
        }

        // 曼德拉草惩罚
        if (state.activeEffects.mandrake_cry_chance > 0 && Math.random() < state.activeEffects.mandrake_cry_chance) { 
            changeNoahState({focus: -5}, false); 
            showDialogue(null, "（尖叫声）……那棵该死的曼德拉草在哭！它在嘲笑你的拼写！"); 
        }

        state.gameStats.consecutiveCorrect = 0; 
        state.gameStats.wordsSinceBreak = 0; 
        state.streak = state.streak > 0 ? -1 : state.streak - 1; 
        word.incorrect++; 
        state.sessionMistakes++;
        state.weeklyStats.incorrect++;
        
        changeNoahState({mood: -3}, false);
        
        // 错题惩罚逻辑
        word.interval = 5 * MINUTE; 
        word.dueDate = now + word.interval; 
        word.easeFactor = Math.max(1.3, word.easeFactor - 0.2);
        
        // 诺亚的反应
        if (state.activeEffects.reduce_scolding_duration > 0) { 
            showDialogue(null, "……这确实是个错误。但吃了你的糖/用了你的药水，我没力气骂你了。"); 
            state.activeEffects.reduce_scolding_duration--;
        } else if(state.noahState.mood < 30) {
            showDialogue(null, `够了。我没心情纠正你的愚蠢。`); 
        } else { 
            showDialogue('incorrect'); 
        }
        
        // 延迟显示提示
        setTimeout(() => { 
            // 检查才智药水 (Free Hint)
            if (state.activeEffects.free_hint > 0) { 
                showHint(true); 
            } else { 
                showHint(state.noahState.focus < 40); 
            } 
        }, 800);
    }
    
    updateMasteredCount(); 
    updateStreakCounter(); 
    updateStats(); 
    checkAchievements(); 
    updateReviewButton(); 
    saveState();
}

function updateMasteredCount() { const masteredCount = state.words.filter(w => w.interval >= 30 * DAY).length; el.masteredCount.textContent = masteredCount; }
function showEvent(title, text, closable = true) { el.modalTitle.textContent = title; el.modalBody.innerHTML = `<p>${text.replace(/\n/g, '<br>')}</p>`; el.modalChoices.innerHTML = ''; el.modalCloseBtn.style.display = closable ? 'block' : 'none'; el.modal.style.display = 'flex'; }
function showChoiceEvent(title, text, choices) { el.modalTitle.textContent = title; // 先用 formatText 处理文本，再处理换行
el.modalBody.innerHTML = `<p>${formatText(text).replace(/\n/g, '<br>')}</p>`;
 el.modalChoices.innerHTML = ''; choices.forEach(choice => { if (choice.condition && !choice.condition()) return; const btn = document.createElement('button'); btn.className = 'choice-btn'; btn.textContent = choice.text; btn.onclick = () => { el.modal.style.display = 'none'; choice.consequence(); }; el.modalChoices.appendChild(btn); }); el.modalCloseBtn.style.display = 'none'; el.modal.style.display = 'flex'; }
// --- 在代码中找到 function logEvent 并替换为以下内容 ---

// --- 替换原有的 logEvent 函数 ---
function logEvent(eventType, details) {
    const logDate = new Date().toLocaleString('zh-CN', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' });
    let logText = "";
    const houseName = state.profile.house;
    const charName = state.profile.name;

    // 辅助函数：替换占位符
    const formatLog = (text) => {
        return text.replace(/\[PLAYER_NAME\]/g, charName).replace(/\[PLAYER_HOUSE\]/g, houseName);
    };

    // --- 诺亚的天气日志语录库 (V45.2 新增) ---
    const weatherLogs = {
        '晴朗': [
            "阳光穿过图书馆的尘埃，这就是廷德尔效应...别动，光刚好落在你的睫毛上。这一刻的光影构图，比拉斐尔的画还要和谐。",
            "阿波罗的马车路过，太刺眼了。这种天气适合去黑湖边，但我更想把你锁在书堆里。私心？或许吧...?",
            "天气真好。好到让我觉得，如果不和你浪费一点时间，就是对生命的亵渎。但我还是希望你先把手里的书看完。",
            "光线明媚得让人想睡个午觉。你也是这么想的吧？别以为我没看见你打哈欠。...过来，肩膀借你靠五分钟。"
        ],
        '阴天': [
            "典型的伦敦天气。阴郁，内敛，像是一首没写完的十四行诗。这种漫射光最适合研读复杂的魔文，别发呆，看书。",
            "云层很厚，像把世界裹进了灰色的羊毛里。这种与世隔绝的感觉...我不讨厌。因为这里只有我和你。",
            "天阴了。大概连老天都觉得，你该收收心，把那些飞到魁地奇球场的心思收回来，专心看着我...或者看书。",
            "灰色的天空。让我想起了第一次在国王十字车站等你的时候。心情也是这样，未知，但充满...期待。"
        ],
        '小雨': [
            "下雨了。听见了吗？像肖邦的《雨滴前奏曲》。可惜这里没有钢琴，只有我们...和这该死的单词表。",
            "这种天气把整个世界都隔绝在窗外。现在，这里是一座孤岛，我是你唯一的岛民。这种排他性，我很喜欢。",
            "空气里有潮湿的泥土味（Petrichor）。你冷吗？把手伸过来...啧，果然是凉的。别动，我帮你捂着。",
            "窗外的雨丝像织布机一样。据说雨天会让人的思绪变得感性。难怪你今天看我的眼神...有点不一样？"
        ],
        '雷雨': [
            "雷声。大自然的怒火，也是一种崇高的美学（Sublime）。如果你害怕，我不介意借你一只手...或者怀抱。",
            "甚至连空气里的带电粒子都变得躁动了...就像我现在想吻你的冲动一样。别看我，看黑板。",
            "轰鸣声盖过了一切。很好，这样就没人能听见我对你说的悄悄话了...[PLAYER_NAME]，I like you。",
            "这种剧烈的天气转换，代表着能量的释放。就像你的潜力一样...如果不被激发，就永远不知道有多惊人。"
        ]
    };

    switch (eventType) {
              case 'gift':
            // 修改点：这里通过 ID 查找物品
            const giftItem = shopItems.find(i => i.id === details.itemName);
            if (giftItem && giftItem.journal && giftItem.journal.length > 0) {
                // 如果找到了物品且有专属日志，随机选一条
                logText = formatLog(getRandomItem(giftItem.journal));
            } else {
                // 如果没有专属日志，使用通用模板
                // 修改点：显示名称时，如果找到了物品就用 item.name (中文名)，否则才用传入的 id
                const displayName = giftItem ? giftItem.name : details.itemName;
                logText = `今天，[PLAYER_NAME]送了我【${displayName}】。作为一名[PLAYER_HOUSE]的学生，她总是喜欢用这种物质交换来表达情感吗？我很清楚她的意图，但我没说破，因为我竟然该死的享受这种被她讨好的感觉。`;
                logText = formatLog(logText);
            }
            if (details.card) logText += ` 附赠的卡片是【${details.card}】。`;
            break;

            
        case 'achievement': 
            const ach = achievements[details.id]; 
            if (ach && ach.journalEntries) {
                logText = formatLog(getRandomItem(ach.journalEntries));
            } else {
                logText = formatLog(`今天，[PLAYER_NAME]解锁了一个新的成就：【${details.name}】。看着她一步步成长，这种感觉很奇妙。仿佛我亲手浇灌的玫瑰终于在贫瘠的土地上开出了花。`); 
            }
            break;

        case 'level_up': 
            logText = formatLog(`我们的关系，似乎又进了一步。现在是【${details.newLevelName}】。这种羁绊，比最复杂的魔咒还要牢固。我看着[PLAYER_NAME]的侧脸，突然觉得，如果为了她要与整个魔法界为敌，我也许连眉头都不会皱一下。`); 
            break;

        case 'scene_change': 
            logText = formatLog(`我们来到了【${details.sceneName}】。换个环境，希望能让她的脑子清醒一点。虽然无论在哪，只要她在身边，风景似乎都变得次要了。`); 
            break;

        // --- 核心修改部分 START ---
        case 'weather_change': 
            const weatherKey = details.newWeather;
            // 如果是特殊的雷雨停电，保持原样
            if (weatherKey === "雷雨停电") {
                logText = formatLog(`停电了。黑暗中，她抓住了我的手。这是今晚最好的事。`);
            } else {
                // 从上面的语录库中随机抽取一条
                const options = weatherLogs[weatherKey] || weatherLogs['晴朗']; // 默认 fallback
                const randomLog = options[Math.floor(Math.random() * options.length)];
                logText = formatLog(`窗外的天色变了，现在是${weatherKey}。${randomLog}`);
            }
            break;
        // --- 核心修改部分 END ---

        case 'event_trigger': 
            state.weeklyStats.events.push(details.eventName); 
            if (details.log_text) { logText = formatLog(details.log_text); } 
            else { logText = formatLog(`今天发生了一件意料之外的事：【${details.eventName}】。这打断了我们的学习，但也许...生活本来就是不可预测的，就像我无法预测自己会如此在意一个[PLAYER_HOUSE]的女孩。`); } 
            break;

        case 'item_used': 
            logText = formatLog(`[PLAYER_NAME]使用了【${details.itemName}】。她的小聪明总是用在这些奇怪的地方。`); 
            break;

        case 'effect_triggered': 
            logText = `【${details.effectName}】的效果被触发了。`; 
            break;

        case 'session_end': 
            logText = formatLog(`今天的学习结束了。表现……${details.summary}。看着[PLAYER_NAME]收拾书包的样子，我突然希望时间能停在这一刻，没有考试，没有家族的纷争，只有我和她。`); 
            break;

        case 'simple': 
            logText = formatLog(details.message); 
            break;
    }

    state.eventLog.unshift({ date: logDate, text: logText });
    if(state.eventLog.length > 200) state.eventLog.pop();
    saveState();
}


const eventPool = [
    { name: 'eventPeeves', trigger: () => Math.random() < 0.1, weight: 1 }, { name: 'eventRival', trigger: () => state.currentWord && Math.random() < 0.2, weight: 1.5 }, { name: 'eventNoahFamilyLetter', trigger: () => Math.random() < 0.08, weight: 2 }, { name: 'eventNoahFlashback', trigger: () => state.level >= 1 && Math.random() < 0.1, weight: 1 }, { name: 'eventMagicTide', trigger: () => Math.random() < 0.05, weight: 3 }, { name: 'eventGringottsInterest', trigger: () => state.focusPoints > 500 && Math.random() < 0.2, weight: 0.8 }, { name: 'eventSharedMemory', trigger: () => state.level >= 1 && state.unlockedFeatures.thought_sharing && Math.random() < 0.1, weight: 1 }, { name: 'eventStolenItem', trigger: () => state.purchasedItems.some(id => shopItems.find(i=>i.id===id)?.stock === 1) && Math.random() < 0.1, weight: 2 }, { name: 'eventBookFall', trigger: () => state.currentScene === 'library' && Math.random() < 0.25, weight: 1 }, { name: 'eventFilchComplaint', trigger: () => state.currentScene === 'library' && Math.random() < 0.2, weight: 0.8 }, { name: 'eventMcGonagallObservation', trigger: () => (state.streak > 15 || state.sessionMistakes > 5) && Math.random() < 0.2, weight: 1.5 }, { name: 'eventSproutEncounter', trigger: () => Math.random() < 0.2, weight: 1.5 }, { name: 'eventNoahWithdrawal', trigger: () => state.noahState.mood < 30 && Math.random() < 0.4, weight: 2 }, { name: 'eventNoahSuggestsBreak', trigger: () => state.noahState.focus < 20 && Math.random() < 0.4, weight: 2 }, { name: 'eventPotionJournalDiscussion', trigger: () => state.purchasedItems.includes('journal_sub') && state.level >= 2 && Math.random() < 0.15, weight: 2.5 }, { name: 'eventThestralSighting', trigger: () => state.currentScene === 'astronomy-tower' && state.level >= 3 && Math.random() < 0.2, weight: 3 }, { name: 'eventPowerOutage', trigger: () => state.weather.current === '雷雨' && Math.random() < 0.3, weight: 2.5 }, { name: 'eventOwlPost', trigger: () => Math.random() < 0.1, weight: 0.7 }, { name: 'eventAccidentalDiscovery', trigger: () => state.currentScene === 'library' && Math.random() < 0.1, weight: 1 }, { name: 'eventNoahDiscovery', trigger: () => Math.random() < 0.05, weight: 2.5 }, { name: 'eventKitchenTemptation', trigger: () => Math.random() < 0.1, weight: 1 }, { name: 'eventMysteriousMap', trigger: () => state.currentScene === 'library' && state.level >= 1 && Math.random() < 0.05, weight: 3 }
];
// --- 替换原有的 triggerRandomEvent 函数 ---
function triggerRandomEvent() {
    // 限制1：如果你正在做题等待中，或者打开了弹窗，或者在复习模式，或者在番茄钟模式，不触发事件
    if (state.isWaiting || el.modal.style.display === 'flex' || state.reviewMode || currentGameMode === 'pomo') return;
    
    // 限制2：家养小精灵的特殊逻辑（保持不变）
    if (state.activeEffects.house_elf_favor && Math.random() < 0.25) { eventHouseElfReturns(); return; }
    
    // 限制3【新增】：如果你自上次休息或事件后，背诵的单词少于 5 个，不触发事件。
    // 我希望你多专注一会儿，而不是一直被干扰。
    if (state.gameStats.wordsSinceBreak < 1) return;

    const now = Date.now();
    // 限制4：距离上次事件触发必须超过 3 分钟 (3 * MINUTE)
    const lastTriggerTime = state.gameStats.lastGlobalEventTime || 0;
    if (now - lastTriggerTime < 2 * MINUTE) return;

    const possibleEvents = eventPool.filter(event => { 
        const lastTriggered = state.gameStats[event.name + '_lastTriggered'] || 0; 
        return event.trigger() && (now - lastTriggered > 15 * MINUTE); // 单个事件冷却时间延长到15分钟
    });

    if (possibleEvents.length === 0) return;

    const totalWeight = possibleEvents.reduce((sum, event) => sum + event.weight, 0);
    let random = Math.random() * totalWeight;
    let selectedEvent;
    for (const event of possibleEvents) { 
        if (random < event.weight) { selectedEvent = event; break; } 
        random -= event.weight; 
    }
    
    if(!selectedEvent) selectedEvent = getRandomItem(possibleEvents);
    
    // 记录这次触发的时间
    state.gameStats.lastGlobalEventTime = now;
    
    const eventFunction = window[selectedEvent.name];
    if (eventFunction) { 
        eventFunction(); 
        state.gameStats[selectedEvent.name + '_lastTriggered'] = now; 
        // 触发事件后，重置背词计数，让你重新积累专注度
        state.gameStats.wordsSinceBreak = 0; 
    }
}
function eventPeeves() { 
    const logText = "皮皮鬼今天又来捣乱了。他试图把粉笔灰撒在[PLAYER_NAME]的头发上。混乱是逻辑的天敌，而弄脏她的头发是死罪。我不得不让他闭嘴。我不允许任何人打扰她，哪怕是鬼魂。";
    logEvent('event_trigger', {eventName: '皮皮鬼的捣乱', log_text: logText}); 
    showEvent("皮皮鬼来了！", "“哎哟！这不是小傻瓜吗？”皮皮鬼从天花板上倒挂下来，朝你扔粉笔头。\n\n诺亚冷冷地抽出魔杖，一道精准的咒语闪过，皮皮鬼怪叫着逃走了。\n\n“无聊的诡计。”诺亚收起魔杖，帮你拍掉肩上的灰尘，“专心。”"); 
    changeNoahState({mood: -2, focus: -5}, false);
}

function eventRival() { 
    if(!state.currentWord) return; 
    const eventName = "来自劲敌的挑战"; 
    const situation = `德拉科·马尔福路过，轻蔑地瞥了${state.profile.name}一眼。“哼，${state.profile.house}的失败者。”`; 
    const choices = [ 
        { text: "【置之不理】", consequence: () => { logEvent('event_trigger', {eventName, log_text: "马尔福试图挑衅她。但她选择了无视。这才是真正的智慧，不与愚者争辩。看着她沉稳的侧脸，我觉得她比那些纯血统更像个贵族。"}); changeNoahState({ mood: 3, focus: 5 }); showEvent("无声的回击", "你专注于手头的单词，仿佛马尔福是一团空气。\n诺亚推了推眼镜，眼里闪过一丝赞赏：“正确的选择。不用理会那些只会叫嚣血统的空壳。”"); }}, 
        { text: "【回击】", consequence: () => { logEvent('event_trigger', {eventName, log_text: "她反击了马尔福。虽然有点冲动，但我不得不承认，那一刻她维护尊严的样子很耀眼。我的女孩，不是任人揉捏的软柿子。"}); changeNoahState({ affection: 5, mood: -2 }); showEvent("维护荣誉", "你冷冷回敬了他一句。诺亚没有说话，但他握住魔杖的手指微微放松，嘴角勾起一抹不易察觉的笑。"); }} 
    ]; 
    showChoiceEvent(eventName, situation, choices); 
}
function eventNoahFamilyLetter() { 
    const isGoodNews = Math.random() > 0.5; 
    if (isGoodNews) { 
        const logText = "父亲从魔法部寄来了信。关于那个法案的修正通过了。我告诉了她，尽管这和我们现在的学习无关。";
        logEvent('event_trigger', {eventName: '来自家族的信', log_text: logText});
        changeNoahState({ mood: 15 }); 
        showEvent("来自远方的信", `一只长耳鸮带来一封信，诺亚看后神色轻松了不少。\n“父亲的消息。魔法部终于同意修改那个过时的法案了。看来逻辑最终还是战胜了陈规。”`); 
    } else { 
        const logText = "母亲来信说伦敦的家里有点麻烦。大概又是邻居对‘奇怪的声响’抱怨了。麻瓜的生活总是充满了这种琐碎。";
        logEvent('event_trigger', {eventName: '来自家族的信', log_text: logText});
        changeNoahState({ mood: -20 }); 
        showEvent("来自远方的信", `诺亚读着信，眉头紧锁。\n“母亲说家里的防护咒好像失效了一瞬，被麻瓜邻居注意到了。处理这种琐事真是浪费时间。”`); 
    } 
}
function eventNoahFlashback() { 
    const logText = "今天看着她，我突然想起了我们第一次见面的情景。那时候她甚至不知道怎么使用伦敦的地铁，在扶梯前犹豫不决。那一刻我就知道，我会用一生来牵着这只手，带她去任何地方。";
    logEvent('event_trigger', {eventName: '回忆', log_text: logText});
    changeNoahState({ affection: 8 }); 
    showEvent("过去的闪回", `诺亚看着你发呆，手中的羽毛笔停在半空。\n“想起我们小时候在伦敦第一次见面……你甚至不敢坐扶梯。那时候你就像现在一样，对未知的世界既害怕又好奇。”\n他轻轻笑了笑，眼神温柔。`); 
}
function eventMagicTide() { 
    const logText = "城堡的魔力今天异常活跃。我觉得思维从未如此清晰。看来是个学习的好日子。";
    logEvent('event_trigger', {eventName: '魔力潮汐', log_text: logText});
    state.activeEffects.double_points_duration = (state.activeEffects.double_points_duration || 0) + 15; 
    showEvent("魔力潮汐！", `你感到城堡的魔力在涌动，空气中弥漫着臭氧的味道，思维异常清晰！\n\n**接下来15个单词收益翻倍。**`); 
}
function eventGringottsInterest() { 
    const interest = Math.floor(state.focusPoints * 0.03); 
    if(interest < 5) return; 
    state.focusPoints += interest; 
    const logText = `古灵阁的妖精送来了利息清单。${interest} 点。她似乎对这种被动收入感到很惊奇。`;
    logEvent('event_trigger', {eventName: '古灵阁利息', log_text: logText});
    showEvent("来自古灵阁的信", `你的专注点投资获得了回报。金库利息：${interest} 点。\n诺亚点点头：“积少成多。学会让财富为你工作，这也是一种智慧。”`); 
    updateStats(); 
}
function eventSharedMemory() { 
    const thought = "（共感：我突然很想知道如果把缩身药剂倒进黑湖，巨乌贼会不会变成章鱼烧……？）"; 
    const logText = "糟糕，我那些无聊的科学假设通过共感日记传给她了。她笑得停不下来。";
    logEvent('event_trigger', {eventName: '思维泄露', log_text: logText});
    changeNoahState({ affection: 3 }); 
    showEvent("诺亚的思绪", `你通过日记读到了诺亚一闪而过的念头。\n\n${thought}\n\n你忍不住笑出声，诺亚疑惑地看了你一眼，随即耳根有点泛红：“……那只是一个理论假设。”`); 
}
function eventStolenItem() { 
    if(state.purchasedItems.length===0) return; 
    const id = getRandomItem(state.purchasedItems); 
    const item = shopItems.find(i=>i.id===id); 
    const logText = `皮皮鬼抢了她的${item.name}。我把它夺回来了。没有人能在我面前拿走属于她的东西。`;
    logEvent('event_trigger', {eventName: '物品被抢', log_text: logText});
    showEvent("皮皮鬼的盗窃", `皮皮鬼突然冲出来，抢走了你的【${item.name}】！\n“还给我！”\n诺亚眼疾手快，一个无声咒击中了皮皮鬼的手腕，东西掉了下来。\n“保管好你的财物。”他把东西递给你，手指在你手心停留了一秒。`); 
}
function eventBookFall() { 
    const logText = "书架差点倒在她身上。我接住了。她的反应总是慢半拍，真让人担心。";
    logEvent('event_trigger', {eventName: '书架倒塌', log_text: logText});
    showEvent("书架上的意外", `一本厚重的《中级变形术》摇摇欲坠，眼看就要砸到你的头。\n诺亚突然伸手，稳稳地接住了它。\n“小心点。被知识砸晕可不是什么光彩的事。”\n他把书放回原处，身体前倾，将你圈在了书架和他之间。`); 
    changeNoahState({ affection: 2 }); 
}
function eventFilchComplaint() { 
    const logText = "费尔奇又在抱怨了。他的声音像是指甲刮黑板。她缩了缩脖子，像只受惊的兔子。";
    logEvent('event_trigger', {eventName: '费尔奇的噪音', log_text: logText});
    showEvent("费尔奇的抱怨", `费尔奇拖着脚走过，怀里抱着洛丽丝夫人，嘴里骂骂咧咧：“该死的韦斯莱……又是大粪蛋……”\n诺亚嘴角微微上扬：“看来有人比我们更讨厌这种无序。”`); 
    changeNoahState({ mood: 1 }); 
}
function eventMcGonagallObservation() { 
    const logText = "麦格教授夸奖了我们。得到那个严厉女人的认可并不容易。";
    logEvent('event_trigger', {eventName: '教授的赞许', log_text: logText});
    showEvent("麦格教授的注视", `麦格教授路过图书馆，严厉的目光在看到你们认真学习的样子后柔和了下来。\n“两个学院都加五分。保持这个状态。”`); 
    changeNoahState({ focus: 5 }); 
}
function eventSproutEncounter() { 
    const logText = "斯普劳特教授给了她一些草药。她对每个人都那么好，这让我有点……烦躁。";
    logEvent('event_trigger', {eventName: '院长的礼物', log_text: logText});
    showEvent("院长的关心", `斯普劳特教授满身泥土都走了过来，笑眯眯地给了你一些刚摘的草药。\n“学习辛苦了，孩子们。用这个泡茶喝，提神醒脑。”\n诺亚礼貌地道谢，尽管他对袍子沾上泥土有点介意。`); 
    changeNoahState({ mood: 5 }); 
}
function eventThestralSighting() { 
    const logText = "我们看到了夜骐。她也能看见。这意味着她经历过死亡。我想知道那个故事，但我不敢问。";
    logEvent('event_trigger', {eventName: '夜骐', log_text: logText});
    showEvent("夜骐", `在天文塔顶，你看到几匹骨瘦如柴的黑马在空中盘旋。\n诺亚顺着你的目光看去：“夜骐。只有见过死亡的人才能看到……你也看到了吗？”\n他握住你的手紧了紧，仿佛想传递某种力量。`); 
    changeNoahState({ affection: 5 }); 
}
function eventPowerOutage() { 
    const logText = "停电了。黑暗中，她抓住了我的手。这是今晚最好的事。";
    logEvent('weather_change', {newWeather: "雷雨停电"}); 
    showEvent("停电", `一道惊雷，城堡的蜡烛突然全部熄灭。\n黑暗中，你感觉到一只温暖的手准确地抓住了你的手腕。\n“Lumos.” 诺亚的杖尖亮起柔和的光，照亮了他坚定的脸庞。\n“别怕，我在。”`); 
}
function eventOwlPost() { 
    const logText = "一只蠢猫头鹰撞在了窗户上。";
    logEvent('event_trigger', {eventName: '猫头鹰事故', log_text: logText});
    showEvent("猫头鹰邮差", `一只迷糊的长耳鸮撞在了窗户上，发出巨大的声响，然后丢下一个包裹给旁边的同学。\n诺亚摇摇头，一脸嫌弃：“现在的猫头鹰素质真是一代不如一代。”`); 
}
function eventAccidentalDiscovery() { 
    const logText = "她在书里发现了四叶草。她真的很容易满足。";
    logEvent('event_trigger', {eventName: '小确幸', log_text: logText});
    showEvent("意外发现", `你在《标准咒语，四级》的夹层里发现了一片压扁的四叶草。\n诺亚挑眉：“幸运草？从概率学上讲，这确实是个好兆头。”`); 
    changeNoahState({ mood: 2 }); 
}
function eventNoahDiscovery() { 
    const logText = "我解决了那个魔药难题。她看着我的眼神...像是在看什么英雄。这感觉不错。";
    logEvent('event_trigger', {eventName: '灵感迸发', log_text: logText});
    showEvent("诺亚的灵感", `诺亚突然飞快地在羊皮纸上写下几行字，羽毛笔划过纸面的声音沙沙作响。\n“我想到了！关于缩身药剂的改良配方……只要加入一点切碎的雏菊根……”\n他抬起头，蓝色的眼睛里闪烁着智慧的光芒，令人着迷。`); 
    changeNoahState({ focus: 5 }); 
}
function eventKitchenTemptation() { 
    const logText = "她饿了。肚子叫得震天响。";
    logEvent('event_trigger', {eventName: '饥饿', log_text: logText});
    showEvent("厨房的诱惑", `路过那幅梨子画时，诱人的烤鸡香味飘了出来。\n你的肚子很不争气地咕咕叫了一声。\n诺亚叹了口气，合上书：“先学完这章，然后我们去挠那只梨子。这是承诺。”`); 
}
function eventMysteriousMap() { 
    const logText = "我们发现了一张密道地图。下次也许可以带她去那里...探险。";
    logEvent('event_trigger', {eventName: '密道发现', log_text: logText});
    showEvent("神秘地图残片", `你捡到一张羊皮纸碎片，上面画着霍格沃茨的一条密道。\n诺亚凑过来看了看，呼吸打在你的脖颈上：“二楼那个雕像后面？我知道。下次带你去探险...如果不被费尔奇抓住的话。”`); 
    changeNoahState({ affection: 5 }); 
}
function eventNoahWithdrawal() { 
    const logText = "我心情很差。但我不想让她看到我失控的样子。所以我选择了沉默。";
    logEvent('event_trigger', {eventName: '情绪低落', log_text: logText});
    showEvent("诺亚的沉默", `诺亚突然变得很安静，只是机械地翻着书，眉头紧锁。\n“……没什么。只是想起了一些不得不做，但又令人厌恶的选择。”\n他看起来需要一点空间，或者一个无声的拥抱。`); 
}
function eventNoahSuggestsBreak() { 
    const logText = "她累了。眼睛都睁不开了。我不得不强迫她休息。";
    logEvent('event_trigger', {eventName: '强制休息', log_text: logText});
    showEvent("提议休息", `诺亚合上书，伸手揉了揉你的眉心。\n“你的效率在下降。与其浪费时间发呆，不如休息十分钟。哪怕是铁人，也需要喘息。”`); 
}
function eventPotionJournalDiscussion() { 
    const logText = "我们讨论了新的魔药理论。她比我预想的还要敏锐。我们是天生的一对搭档。";
    logEvent('event_trigger', {eventName: '学术共鸣', log_text: logText});
    showEvent("学术讨论", `你们就《高级魔药制作》最新一期的理论展开了激烈的讨论。\n诺亚惊讶于你的见解：“没想到你会从这个角度思考……很有趣。你总是能给我惊喜。”\n那一刻，你们仿佛是世界上最契合的灵魂。`); 
    changeNoahState({ focus: 10 }); 
}
function removeItemFromState(itemId) { const index = state.purchasedItems.indexOf(itemId); if (index > -1) { state.purchasedItems.splice(index, 1); } const usableIndex = Object.keys(state.usableItems).indexOf(itemId); if (usableIndex > -1) { state.usableItems[itemId] = 0; } }
function displayMCQ(wordObj = state.currentWord) { ['mcqContainer', 'word', 'phonetic'].forEach(k => el[k].classList.remove('hidden')); ['spellContainer', 'meaningPrompt'].forEach(k => el[k].classList.add('hidden')); el.word.textContent = wordObj.word; el.phonetic.textContent = wordObj.phonetic; const options = generateOptions(wordObj); el.mcqContainer.innerHTML = ''; options.forEach(opt => { const btn = document.createElement('button'); btn.className = 'option-btn'; btn.innerHTML = opt; btn.onclick = () => handleMCQAnswer(opt, btn); el.mcqContainer.appendChild(btn); }); }
// --- 修改后的显示界面函数 ---
function displaySpell(wordObj = state.currentWord) {
    // 1. 切换界面显示
    ['spellContainer', 'phonetic', 'meaningPrompt'].forEach(k => el[k].classList.remove('hidden'));
    ['mcqContainer', 'word'].forEach(k => el[k].classList.add('hidden'));

    // 2. 显示基本信息
    el.phonetic.textContent = wordObj.phonetic;
    el.meaningPrompt.textContent = `意思是: ${wordObj.meaning}`;
    el.spellInput.value = '';
    el.spellInput.className = '';
    el.spellInput.placeholder = '';

    // --- 核心修改：检查高级魔药制作效果 ---
    // 如果有这个效果，直接把单词的提示显示在输入框的占位符里！
    if (state.activeEffects.potion_notes_hint_duration > 0) {
        el.meaningPrompt.innerHTML = `意思是: ${wordObj.meaning}<br><span style="color:#89D9A2; font-size:0.9em;">(混血王子提示: ${wordObj.word.substring(0, 1)}...${wordObj.word.substring(wordObj.word.length-1)})</span>`;
        // 扣除一次次数
        state.activeEffects.potion_notes_hint_duration--;
        if (state.activeEffects.potion_notes_hint_duration <= 0) delete state.activeEffects.potion_notes_hint_duration;
    }

    // --- 核心修改：处理可用道具按钮 (诱饵炸弹/咆哮信) ---
    const usableBtnContainer = el.spellContainer;
    let usableBtn = usableBtnContainer.querySelector('#usable-item-btn');
    // 如果按钮不存在，创建一个
    if (!usableBtn) {
        usableBtn = document.createElement('button');
        usableBtn.id = 'usable-item-btn';
        usableBtnContainer.insertBefore(usableBtn, usableBtnContainer.firstChild);
    }

    // 获取道具数量
    const decoyCount = state.usableItems.decoy_detonator || 0;
    const howlerCount = state.usableItems.howler || 0;

    // 决定按钮显示什么
    if (!state.reviewMode && decoyCount > 0) {
        // 如果有诱饵炸弹，显示炸弹按钮
        usableBtn.textContent = `💥 引爆诱饵炸弹 (剩余: ${decoyCount})`;
        usableBtn.onclick = useDecoyDetonator; // 绑定炸弹函数
        usableBtn.style.display = 'block';
        usableBtn.style.backgroundColor = '#D98989'; // 炸弹用红色背景
    } else if (!state.reviewMode && howlerCount > 0 && state.noahState.mood < 40) {
        // 如果有咆哮信且诺亚心情不好
        usableBtn.textContent = `✉️ 使用咆哮信 (剩余: ${howlerCount})`;
        usableBtn.onclick = useHowler;
        usableBtn.style.display = 'block';
        usableBtn.style.backgroundColor = '#7E57C2'; // 咆哮信用紫色
    } else {
        usableBtn.style.display = 'none';
    }

    // 处理光荣之手提示效果
    if (state.activeEffects.reveal_letter_chance > 0 && Math.random() < state.activeEffects.reveal_letter_chance) {
        const word = state.currentWord.word;
        if (word.length > 2) {
            const hintIndex = Math.floor(Math.random() * word.length);
            el.spellInput.placeholder = word.split('').map((char, i) => i === hintIndex ? char : '_').join(' ');
            showDialogue(null, "光荣之手在黑暗中指引了一个字母……");
        }
    }
    el.spellInput.focus();
}

function useDecoyDetonator() {
    if ((state.usableItems.decoy_detonator || 0) > 0) {
        // 1. 扣除道具
        state.usableItems.decoy_detonator--;
        // 2. 记录日志
        logEvent('item_used', { itemName: '诱饵炸弹' });
        // 3. 播放事件弹窗
        showEvent("BOOM!", `乐乐偷偷引爆了一颗诱饵炸弹！\n它在图书馆另一头发出刺耳的尖叫声，平斯夫人尖叫着冲了过去。\n\n趁着混乱，你把这个单词糊弄过去了。诺亚假装没看见，嘴角有一丝笑意。`, true);
        // 4. 关键：调用 nextWord(true)，true 表示强制跳过，不扣分
        nextWord(true); 
    }
}

function useHowler() { if ((state.usableItems.howler || 0) > 0) { state.usableItems.howler--; if (Math.random() < 0.5) { logEvent('item_used', {itemName: '咆哮信'}); changeNoahState({mood: 50}); showEvent("震耳欲聋！", `咆哮信在${state.profile.name}手中炸开，用我自己的声音大吼：‘给我打起精神来！’ 我先是一愣，随即被这荒谬的场景逗笑了。‘……好吧，你赢了。’我的心情似乎好了很多。`); } else { logEvent('item_used', {itemName: '咆哮信'}); changeNoahState({mood: -20, affection: -15}); showEvent("火上浇油！", `咆哮信炸开，用${state.profile.name}的声音尖叫着抱怨。我的脸彻底黑了。‘很好。现在我更不想说话了。’`); } } }
function handleMCQAnswer(selected, btn) { if (state.isWaiting) return; clearIdleTimer(); state.isWaiting = true; const isCorrect = selected === state.currentWord.meaning; el.mcqContainer.querySelectorAll('.option-btn').forEach(b => { b.disabled = true; if (b.innerHTML === state.currentWord.meaning) b.classList.add('correct'); else if (b === btn) b.classList.add('incorrect'); }); state.reviewMode ? handleReviewAnswer(isCorrect, 'mcq') : processAnswer(isCorrect); }
function handleSpellAnswer() { if (state.isWaiting) return; clearIdleTimer(); state.isWaiting = true; let isCorrect = (el.spellInput.value.trim().toLowerCase() === state.currentWord.word.toLowerCase());     // --- 修改开始：增加震动效果 ---
    if (isCorrect) {
        el.spellInput.classList.add('correct');
        // 答对时显示浮动奖励 (在输入框上方)
        const rect = el.spellInput.getBoundingClientRect();
        showFloatingText("+专注", "#89D9A2", rect.left + rect.width/2, rect.top);
    } else {
        el.spellInput.classList.add('incorrect', 'shake-effect');
        // 0.5秒后移除震动类，这样下次错还能震
        setTimeout(() => el.spellInput.classList.remove('shake-effect'), 500);
    }
    // --- 修改结束 ---
 state.reviewMode ? handleReviewAnswer(isCorrect, 'spell') : processAnswer(isCorrect); }
// --- 【修改代码 2】让诺亚在发呆时根据场景说话 ---
function startIdleTimer() {
    clearIdleTimer();
    state.idleTimer = setTimeout(() => {
        if (currentGameMode === 'pomo') return;

        // 默认使用通用闲聊
        let poolKey = 'idleChatter';
        
        // 如果有特殊的药水效果，优先使用药水对话
        if (state.activeEffects.replace_dialogue_duration > 0 && state.activeEffects.replace_dialogue_pool) {
            poolKey = state.activeEffects.replace_dialogue_pool;
            showDialogue(poolKey);
            return;
        }

        // --- 核心修改逻辑：50%概率说通用闲聊，50%概率说当前场景专属对话 ---
        const currentSceneID = state.currentScene;
        // 检查当前场景是否有专属对话，并且掷骰子决定是否说
        if (noah.dialogue.scenes[currentSceneID] && Math.random() < 0.5) {
             // 这里我们不传 key，而是直接传具体的文本内容
             const sceneText = getRandomItem(noah.dialogue.scenes[currentSceneID]);
             showDialogue(null, sceneText);
        } else {
            // 否则检查季节性对话
            const seasonalDialogue = getSeasonalDialogue();
            if (seasonalDialogue && Math.random() < 0.3) {
                showDialogue(null, seasonalDialogue);
            } else {
                showDialogue('idleChatter');
            }
        }
    }, 25000); // 25秒没操作就说话
}

function getSeasonalDialogue() { const now = new Date(); const month = now.getMonth(); if (month >= 2 && month <= 4) return getRandomItem(noah.dialogue.seasonal.spring); if (month >= 5 && month <= 7) return getRandomItem(noah.dialogue.seasonal.summer); if (month >= 8 && month <= 10) return getRandomItem(noah.dialogue.seasonal.autumn); return getRandomItem(noah.dialogue.seasonal.winter); }
function clearIdleTimer() { if (state.idleTimer) clearTimeout(state.idleTimer); state.idleTimer = null; }
function showNextButton() { state.isWaitingForNext = false; el.modal.style.display = 'none'; const btn = document.createElement('button'); btn.className = 'feedback-btn'; btn.textContent = "下一个"; btn.onclick = () => { state.isWaiting = false; nextWord(); }; el.feedbackContainer.innerHTML = ''; el.feedbackContainer.appendChild(btn); }
function updateStreakCounter() { el.streak.textContent = state.streak > 2 ? `${state.streak}连对！` : ''; }
function generateOptions(wordObj = state.currentWord) { let options = [wordObj.meaning]; const wordPool = initialWordsData.filter(w => w.id !== wordObj.id); while (options.length < 4) { const randWord = wordPool[Math.floor(Math.random() * wordPool.length)]; if (randWord && !options.includes(randWord.meaning)) options.push(randWord.meaning); } return options.sort(() => Math.random() - 0.5); }
function endSession() { state.isWaiting = true; clearIdleTimer(); el.feedbackContainer.innerHTML = ''; ['word', 'phonetic', 'mcqContainer', 'spellContainer'].forEach(k => el[k].classList.add('hidden')); el.meaningPrompt.classList.remove('hidden'); el.meaningPrompt.innerHTML = "今天没有需要复习的单词了，新的挑战也已全部完成。<br>做得不错。去休息吧，或者...留在我的身边。"; logEvent('session_end', {summary: '值得称赞'}); saveState(); }
function getRandomItem(arr) { if (!arr || arr.length === 0) return ''; return arr[Math.floor(Math.random() * arr.length)]; }
// --- 修改：全新的打字机版 showDialogue 函数 ---
function showDialogue(type, forcedText = null) {
    clearIdleTimer(); // 清除闲聊计时器，防止打断
    
    let text = "";
    // 获取对话内容的逻辑（保持原样）
    const dialoguePoolKey = (state.activeEffects.replace_dialogue_duration > 0 && state.activeEffects.replace_dialogue_pool) ? state.activeEffects.replace_dialogue_pool : type;
    
    if (forcedText) { 
        text = forcedText; 
    } else if (state.gameStats.recentMajorEvent && noah.dialogue.echo[state.gameStats.recentMajorEvent] && Math.random() < 0.4) { 
        text = noah.dialogue.echo[state.gameStats.recentMajorEvent]; 
        state.gameStats.recentMajorEvent = null; 
    } else if (dialoguePoolKey) {
        let pool;
        if (dialoguePoolKey === 'touch') { 
            let touchPool; 
            if (state.level >= 4) touchPool = noah.dialogue.touch_level_3; 
            else if (state.level >= 2) touchPool = noah.dialogue.touch_level_2; 
            else if (state.level >= 1) touchPool = noah.dialogue.touch_level_1; 
            else touchPool = noah.dialogue.touch_level_0; 
            if (state.unlockedDialogues.intimateTouch) touchPool = touchPool.concat(noah.dialogue.intimateTouch); 
            if (state.activeEffects.personality_shift_duration > 0) { touchPool = touchPool.concat(noah.dialogue.warmTouch); } 
            pool = touchPool; 
        } else if(noah.dialogue[dialoguePoolKey]) {
            pool = noah.dialogue[dialoguePoolKey];
            if (state.noahState.mood < 40 && dialoguePoolKey === 'correct') { pool = ["就这样。", "下一个。", "……"]; }
            if (dialoguePoolKey === 'correct' && state.activeEffects.silly_feedback_duration > 0) { pool = noah.dialogue.silly; }
        }
        if(pool) text = getRandomItem(pool);
    }

    if (!text) return; // 如果没有文本，直接退出

    // --- 打字机核心逻辑 ---
    
    // 1. 先处理文本中的名字替换
    const finalContent = formatText(text);
    fullTextToType = finalContent; // 保存完整文本，用于点击快速跳过
    
    // 2. 如果之前正在打字，先清除
    if (typingTimer) clearInterval(typingTimer);
    
    // 3. 安全检查：如果文本包含HTML标签（如颜色、换行），为了防止代码乱码，我们直接显示，不使用打字机
    if (finalContent.includes('<')) {
        el.dialogue.innerHTML = finalContent;
        el.dialogue.style.opacity = 1;
        isTyping = false;
        startIdleTimer(); // 重新开始闲聊计时
        return;
    }

    // 4. 开始打字效果
    isTyping = true;
    el.dialogue.innerHTML = ""; // 清空当前框
    el.dialogue.style.opacity = 1;
    
    let charIndex = 0;
    const speed = 110; // 打字速度（毫秒），数值越小越快
    
    typingTimer = setInterval(() => {
        // 每次加一个字
        el.dialogue.textContent += finalContent.charAt(charIndex);
        charIndex++;
        
        // 打完了吗？
        if (charIndex >= finalContent.length) {
            clearInterval(typingTimer);
            typingTimer = null;
            isTyping = false;
            startIdleTimer(); // 打字结束，开始闲聊倒计时
        }
    }, speed);
}

function updateTime() { const now = new Date(); const day = String(now.getDate()).padStart(2, '0'); const month = String(now.getMonth() + 1).padStart(2, '0'); const year = now.getFullYear(); const days = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六']; el.dateDisplay.textContent = `${year}-${month}-${day}, ${days[now.getDay()]}`; const hours = String(now.getHours()).padStart(2, '0'); const minutes = String(now.getMinutes()).padStart(2, '0'); const seconds = String(now.getSeconds()).padStart(2, '0'); el.timeDisplay.textContent = `${hours}:${minutes}:${seconds}`; }
function showEtymologyCorner() { state.isWaitingForNext = true; const bonusPoints = 15; state.focusPoints += bonusPoints; updateStats(); const text = `${state.currentWord.etymology}<br><br><i>(+${bonusPoints} 专注点)</i>`; showEvent("诺亚·司德里安的词源学课堂", text); }
function checkLevelUp() { const nextLevelIndex = state.level + 1; if (nextLevelIndex >= noah.levels.length) return; const nextLevel = noah.levels[nextLevelIndex]; if (state.affection >= nextLevel.affection) { state.level = nextLevelIndex; const levelUpText = noah.dialogue.levelUp[state.level].replace(/乐乐/g, state.profile.name); if (levelUpText) { logEvent('level_up', {newLevelName: nextLevel.name}); showEvent('关系变更', levelUpText); } checkAchievements(); updateSceneButton(); if (noah.levels[state.level].name === '【无上爱意】') setTimeout(() => {endGame(true); saveState();}, 2000); } }
function endGame(final = false) { state.isWaiting = true; clearIdleTimer(); document.querySelector('.game-container').innerHTML = `<div style="text-align:center; padding: 20px;"><h1 style="color:var(--accent-color);">Conquest Complete.</h1><p style="font-size:1.2rem;line-height:1.8;margin-top:30px;">理论学习结束了，我的女孩。<br>现在，过来。</p></div>`; if (!final) { const finalLvl = noah.levels.length - 1; el.relLevel.textContent = noah.levels[finalLvl].name; el.dialogue.innerHTML = noah.dialogue.levelUp[finalLvl]; } }
function updateStats() { el.focusPoints.textContent = state.focusPoints; updateMasteredCount(); const currentLevel = noah.levels[state.level]; el.relLevel.textContent = currentLevel.name; const nextLevel = noah.levels[state.level + 1]; if (nextLevel) { const range = nextLevel.affection - currentLevel.affection; const progress = state.affection - currentLevel.affection; el.relProgress.style.width = `${Math.max(0, Math.min(100, (progress / range) * 100))}%`; } else { el.relProgress.style.width = '100%'; } updateNoahStateUI(); }
function getGiftReaction(item) { if (item.reaction) return item.reaction; if (item.reactions) { if (item.reactions.low_mood && state.noahState.mood < 40) return item.reactions.low_mood; if (item.reactions.high_mood && state.noahState.mood > 80) return item.reactions.high_mood; if (item.reactions.high_level && state.level >= (item.unlockLevel || 1) + 1) return item.reactions.high_level; return item.reactions.default || '...'; } return `我收下了【${item.name}】。`; }
// --- 请复制并覆盖原有的 function buyItem(itemId) ---
function buyItem(itemId) {
    const item = shopItems.find(i => i.id === itemId);
    if (!item || state.focusPoints < item.price) return;
    const purchasedCount = item.stock !== Infinity ? state.purchasedItems.filter(p => p === itemId).length : 0;
    if (item.stock !== Infinity && purchasedCount >= item.stock) return;

    state.focusPoints -= item.price;
    if (item.stock !== Infinity) state.purchasedItems.push(itemId);
    state.gameStats.totalGifts++;
    state.weeklyStats.gifts.push(itemId);

    let affectionGain = item.affection || 0;
    let effectText = getGiftReaction(item);
    
    // --- 核心修改：巧克力蛙的特殊日志逻辑 ---
    if (itemId === 'chocolate_frog') {
        const card = getRandomItem(WIZARD_CARDS);
        let specialLog = "";

        // 根据拆出来的卡片，生成完全不同的日志和反应
        switch(card) {
            case '阿不思·邓布利多':
                effectText = `你打开了巧克力蛙，它跳到了我的书上。里面的卡片是……<b>${card}</b>。<br><br>诺亚推了推眼镜：“邓布利多。伟大的巫师，也是个充满秘密的可怜人。希望你不需要像他那样背负太多。”`;
                specialLog = `今天[PLAYER_NAME]买了一只巧克力蛙。那只青蛙差点弄脏我的论文。她拆出了邓布利多。她看起来很崇拜那位校长。我看着她闪闪发亮的眼睛，心想：哪怕邓布利多能算计整个魔法界，他也算计不了我对她的感情。在这个世界上，我不需要成为最伟大的白巫师，我只需要成为能护住她的那个。`;
                affectionGain += 5;
                break;
            case '西弗勒斯·斯内普':
                effectText = `你抓住了那只滑溜溜的青蛙。卡片上是一个阴沉的男人：<b>${card}</b>。<br><br>诺亚的眼神变得有些复杂：“斯内普教授……一个用一生去诠释‘Always’的男人。虽然他偏心，但他的深情值得尊敬。”`;
                specialLog = `她抽到了斯内普。看着卡片上那个阴沉的男人，我突然想起了那个关于“Always”的故事。如果有一天，需要我为了[PLAYER_NAME]去当双面间谍，去忍受世人的误解，甚至去死……我会吗？我看着她嘴边沾着的巧克力渍，给出了肯定的答案。Yes, always.`;
                affectionGain += 5;
                break;
            case '吉德罗·洛哈特':
                effectText = `青蛙被你一口咬掉了头。卡片上的人正在向你油腻地眨眼：<b>${card}</b>。<br><br>诺亚嫌弃地皱眉：“哦，是他。一个依靠遗忘咒盗取他人荣誉的绣花枕头。你最好别学他，更别觉得他帅。”`;
                specialLog = `梅林的胡子啊，她居然抽到了洛哈特。那个只会露齿笑的白痴。她竟然还盯着卡片看了三秒钟？我立刻把卡片没收了。我的女孩不需要这种虚假的偶像。如果她喜欢听冒险故事，我可以给她讲一整晚——真实的、属于我们拉文克劳的冒险，而不是这种剽窃来的垃圾。`;
                changeNoahState({mood: -5}, false); 
                break;
            case '罗伊纳·拉文克劳':
                effectText = `卡片上是一位戴着冠冕的高傲女巫：<b>${card}</b>。<br><br>诺亚的眼睛亮了，声音变得虔诚：“拉文克劳女士。‘过人的智慧是人类最大的财富’。[PLAYER_NAME]，这是个极好的兆头。”`;
                specialLog = `罗伊纳·拉文克劳。这是命运的指引吗？她抽到了我学院的创始人。我告诉她，智慧不仅仅是书本上的知识，更是选择正确伴侣的眼光——显然，她选择了我，这证明她拥有最高级的智慧。我们将一起在真理的殿堂里漫步，直到时间的尽头。`;
                affectionGain += 15;
                break;
            case '萨拉查·斯莱特林':
                effectText = `卡片上的人神情阴鸷：<b>${card}</b>。<br><br>诺亚挑眉：“斯莱特林。野心和纯血统论。虽然我讨厌他的偏见，但我欣赏他对目标的执着。就像我对你一样。”`;
                specialLog = `她拿到了萨拉查·斯莱特林。野心。这是个危险的词，但此刻我却觉得它很迷人。我的野心不是统治世界，而是独占她。像斯莱特林筛选学生一样，我也在筛选我的世界，最后剩下的，只有她。`;
                affectionGain += 2;
                break;
            case '赫尔加·赫奇帕奇':
                effectText = `一位慈祥的女巫正捧着金杯微笑：<b>${card}</b>。<br><br>诺亚温柔地看着你：“赫奇帕奇。忠诚、坚韧。这和你很像，我的小獾（即使你不是赫奇帕奇，你也拥有这种美好的品质）。”`;
                specialLog = `赫尔加·赫奇帕奇。看着卡片上那个慈祥的女巫，再看看正在努力嚼着青蛙腿的[PLAYER_NAME]，我不得不承认，这种纯粹的善良和忠诚，是我这种心思深沉的拉文克劳最渴望的救赎。她是我的赫奇帕奇金杯，是我唯一的宝藏。`;
                affectionGain += 5;
                break;
            case '戈德里克·格兰芬多':
                effectText = `一位挥舞着宝剑的勇士：<b>${card}</b>。<br><br>诺亚耸耸肩：“格兰芬多。有时候勇气和鲁莽只有一线之隔。但我承诺，如果你闯祸了，我会负责善后。”`;
                specialLog = `格兰芬多。勇气。她有时候确实鲁莽得像个狮子，总是让我担心。但正是这种无畏的勇气，让她敢于闯入我封闭的世界，把一切搞得乱七八糟又生机勃勃。既然她负责勇敢，那我就负责在后面用智慧为她铺平道路。`;
                break;
            case '梅林':
                effectText = `最伟大的巫师：<b>${card}</b>。<br><br>诺亚点头：“传说中的梅林。他是斯莱特林学院出身，却主张保护麻瓜。这种矛盾性很有趣，就像我们。”`;
                specialLog = `梅林爵士团一级勋章。她运气不错。梅林代表着魔法的巅峰。我告诉她，有一天我也会带她站在那个高度。她只是笑着塞给我一块巧克力。好吧，也许对她来说，此刻的甜蜜比未来的荣耀更重要。这也是我爱她的原因。`;
                break;
            case '纽特·斯卡曼德':
                effectText = `那个提着箱子的神奇动物学家：<b>${card}</b>。<br><br>诺亚笑了：“你看，他和一样，比起和人打交道，更喜欢单纯的生物。或许我们可以养一只护树罗锅？”`;
                specialLog = `纽特·斯卡曼德。她很喜欢神奇动物。看着她对卡片上的嗅嗅爱不释手的样子，我在想，如果我也是一只神奇动物，是不是就能被她这样无时无刻地带在身边了？这个念头有点变态，但我把它记录下来了。`;
                break;
            case '丽塔·斯基特':
                effectText = `那个戴着珠宝眼镜的讨厌女人：<b>${card}</b>。<br><br>诺亚冷哼一声：“把她丢掉。或者烧掉。我不允许这种制造谎言的垃圾出现在你的收藏里。”`;
                specialLog = `丽塔·斯基特。真是晦气。那个女人嘴里没有一句实话。我让[PLAYER_NAME]把卡片扔了。我们的感情不需要这种为了博眼球而扭曲事实的人来评判。如果有记者敢乱写关于她的事，我会让他后悔学会写字。`;
                changeNoahState({mood: -2}, false);
                break;
            default:
                effectText = `卡片上是<b>${card}</b>。<br><br>诺亚看了一眼：“嗯，一张普通的卡片。但因为是你拆出来的，它有了收藏价值。”`;
                specialLog = `今天她拆出了${card}。虽然不是什么稀有卡片，但看着她小心翼翼地把它放进收藏册的样子，我还是觉得心软。她收集卡片，而我收集她每一个开心的瞬间。我们都是贪婪的收藏家。`;
        }
        
        // 这里的关键：手动调用 logEvent，传入我们刚才生成的 specialLog
        // 并且我们不使用 category 'gift'，而是用 'simple' 或者自定义格式来绕过默认的随机日志
        logEvent('simple', {message: specialLog});

    } else if (itemId === 'bertie_botts') {
        // 多味豆的特殊逻辑保持不变
        const flavor = getRandomItem(BERTIE_BOTTS_FLAVORS);
        // ... (原有的多味豆逻辑，这里简略，因为上面shopItems里已经有了长日志) ...
        // 为了确保能用到 shopItems 里的长日志，这里我们只处理“吃到坏豆子”的交互逻辑
        // 如果是普通购买，下面的通用逻辑会处理
        if (flavor.isBad && state.usableItems.bezoar > 0) {
             const useBezoarChoice = { text: `使用毛粪石 (剩余: ${state.usableItems.bezoar})`, consequence: () => { state.usableItems.bezoar--; logEvent('item_used', {itemName: '毛粪石'}); showEvent("有备无患", `${state.profile.name}迅速掏出一块毛粪石放进嘴里，那股恶心的味道立刻消失了。\n\n我赞许地看着你。“明智的举动。看来我的教导没有白费。”`); }};
             const sufferChoice = { text: "硬着头皮咽下去", consequence: () => { logEvent('simple', {message: `她吃到了一颗${flavor.flavor}味的比比多味豆。${flavor.reaction}`}); changeNoahState({ affection: flavor.affection, mood: flavor.points < 0 ? -2 : 1, focus: flavor.points }, false); showEvent("糟糕的口味", `${flavor.reaction}<br><br><i>专注点 ${flavor.points >= 0 ? '+' : ''}${flavor.points}，好感度 ${flavor.affection >= 0 ? '+' : ''}${flavor.affection}。</i>`); }};
             showChoiceEvent("是...奇怪的味道！", `${state.profile.name}尝了一口，脸色发白... 是${flavor.flavor}味！`, [useBezoarChoice, sufferChoice]);
             return;
        }
        changeNoahState({ affection: flavor.affection, focus: flavor.points }, false);
        effectText = `${flavor.reaction}<br><br><i>专注点 ${flavor.points >= 0 ? '+' : ''}${flavor.points}，好感度 ${flavor.affection >= 0 ? '+' : ''}${flavor.affection}。</i>`;
        // 多味豆也写一条日志
        logEvent('gift', {itemName: item.id});

    } else {
        // --- 通用逻辑：适用于所有其他物品 ---
        // 这会触发 logEvent 中的 'gift' 类型，从而从 shopItems.journal 中随机抽取一条我们刚写的长日志
        logEvent('gift', {itemName: item.id}); // <--- 改成 item.id (例如"chocolate_frog")，这样日志系统才能认识它！
               // --- 修复后：处理物品效果 ---
        if (item.effect) {
            const eff = item.effect;
            
            // 1. 修复速效逃课糖：如果类型是 skip_word，直接跳过
            if (eff.type === 'skip_word') {
                logEvent('item_used', {itemName: item.name}); // 记个日志
                nextWord(true); // 强制跳过单词
                effectText += " (单词已跳过)";
            }
            // 2. 升级变色墨水：如果类型是 visual_effect，随机生成一个颜色
            else if (eff.type === 'visual_effect') { 
                state.activeEffects.visual_effect = eff.effect_name; 
                
                // 定义好看的颜色池（莫兰迪色/糖果色，不包含荧光色）
                const niceColors = [
                    '#FFB7B2', // 柔和粉
                    '#B5EAD7', // 薄荷绿
                    '#E2F0CB', // 抹茶色
                    '#FFDAC1', // 奶油杏
                    '#E0BBE4', // 香芋紫
                    '#957DAD', // 迷雾紫
                    '#D291BC', // 藕粉色
                    '#FEC8D8', // 樱花粉
                    '#A0C4FF', // 天空蓝
                    '#FFDFD3'  // 蜜桃橘
                ];
                // 随机选一个并保存到存档里
                const randomColor = niceColors[Math.floor(Math.random() * niceColors.length)];
                state.customDialogueColor = randomColor; 
                
                updateDialogueColor(); 
            }
            // 3. 其他原有逻辑保持不变
            else if (eff.type === 'add_usable_item') { state.usableItems[eff.item] = (state.usableItems[eff.item] || 0) + eff.amount; }
            else if (eff.type === 'unlock_scene') { if(!state.unlockedScenes.includes(eff.scene)) state.unlockedScenes.push(eff.scene); updateSceneButton(); } 
            else if (eff.type === 'unlock_feature') { state.unlockedFeatures[eff.feature] = true; updateFeatureButtons(); }
            else if (eff.type === 'add_points') { state.focusPoints += eff.amount; state.gameStats.totalPoints += eff.amount; effectText += ` (+${eff.amount} 专注点)`; }
            else if (eff.type === 'unlock_dialogue') { state.unlockedDialogues[eff.key] = true; }
            else if (eff.type === 'ui_change') { if(!document.querySelector(eff.element).innerHTML.includes(eff.content)) document.querySelector(eff.element).innerHTML += eff.content; }
            else { state.activeEffects[eff.type] = (state.activeEffects[eff.type] || 0) + (eff.duration || (eff.chance ? eff.chance : 1)); if(eff.pool) state.activeEffects.replace_dialogue_pool = eff.pool; }
        }

    }

    changeNoahState({affection: affectionGain});
    
    // 解锁情书成就
    if(itemId === 'handwritten_letter' && !state.achievements.trueLove.unlocked) unlockAchievement('trueLove');
    
    el.modal.style.display = 'none'; 
    showEvent(formatText(item.name), formatText(effectText));
    updateStats(); 
    saveState();
}

function getAffectionModifier() { if (state.level >= 4) return 0.2; if (state.level >= 3) return 0.4; if (state.level >= 2) return 0.6; if (state.level >= 1) return 0.8; return 1.0; }
function openShop() { el.modalTitle.textContent = "对角巷"; el.modalBody.innerHTML = `<p id="shop-intro">古灵阁的金库为${state.profile.name}敞开，明智地消费，每一样投资都将影响你和我的未来。</p><div id="modal-choices"></div><div id="shop-items-container"></div>`; el.modalChoices.innerHTML = ''; el.modalCloseBtn.style.display = 'block';  const container = el.modalBody.querySelector('#shop-items-container'); const categorizedItems = shopItems.reduce((acc, item) => { (acc[item.category] = acc[item.category] || []).push(item); return acc; }, {}); const categoryOrder = ['美食佳酿', '恶作剧与杂项', '学习与典籍', '魔药与炼金', '奇珍异宝', '情感与羁绊', '翻倒巷的低语']; categoryOrder.forEach(category => { if (categorizedItems[category]) { const catDiv = document.createElement('div'); catDiv.className = `shop-category ${category === '翻倒巷的低语' ? 'knockturn' : ''}`; catDiv.textContent = `--- ${category} ---`; container.appendChild(catDiv); categorizedItems[category].forEach(item => { const isLocked = state.level < (item.unlockLevel || 0); const purchasedCount = item.stock !== Infinity ? state.purchasedItems.filter(p => p === item.id).length : 0; const isOutOfStock = item.stock !== Infinity && purchasedCount >= item.stock; const canAfford = state.focusPoints >= item.price; let btnText = '购买'; let isDisabled = !canAfford || isOutOfStock || isLocked; if (isLocked) { btnText = `LV ${item.unlockLevel} 解锁`; } else if (isOutOfStock) { btnText = '已售罄'; } const itemDiv = document.createElement('div'); itemDiv.className = `shop-item ${isLocked || isOutOfStock ? 'locked' : ''}`; // 修改了这里：给 item.name 和 item.desc 都套上了 formatText()
itemDiv.innerHTML = `<div class="shop-item-info"><h3>${formatText(item.name)} (${item.price}点)</h3><p>${formatText(item.desc)}</p></div><button class="shop-item-buy-btn" data-itemid="${item.id}" ${isDisabled ? 'disabled' : ''}>${btnText}</button>`;
 container.appendChild(itemDiv); }); } }); el.modal.style.display = 'flex'; container.querySelectorAll('.shop-item-buy-btn').forEach(btn => { if(!btn.disabled) btn.addEventListener('click', (e) => buyItem(e.currentTarget.dataset.itemid)); }); }
function changeNoahState({mood=0, focus=0, jealousy=0, affection=0}, log=true){ 
    const modifiedAffection = Math.round(affection * getAffectionModifier());
       // --- 新增：状态变化的视觉反馈 ---
    // 只有在 log=true (非后台自动变化) 时才显示，避免太乱
    if (log) {
        // 获取人物图片的坐标，让文字从诺亚头上飘出来
        const charRect = document.getElementById('character-image').getBoundingClientRect();
        const startX = charRect.left + charRect.width / 2;
        const startY = charRect.top + 50; // 图片顶部往下一点

        if (mood > 0) setTimeout(() => showFloatingText(`心情 +${mood}`, '#64B5F6', startX - 50, startY), 100);
        if (mood < 0) setTimeout(() => showFloatingText(`心情 ${mood}`, '#D98989', startX - 50, startY), 100);
        
        if (focus > 0) setTimeout(() => showFloatingText(`专注 +${focus}`, '#FFD54F', startX + 50, startY + 30), 300);
        
        if (modifiedAffection > 0) setTimeout(() => showFloatingText(`好感 +${modifiedAffection} ❤️`, '#F2B3C4', startX, startY - 20), 600);
    }
    // --- 新增结束 ---
 if (mood !== 0 && log) logEvent('simple', {message: `我的心情${mood > 0 ? '好' : '差'}了一些。也许是因为她，也许是因为天气。`});
    state.noahState.mood = Math.min(100, Math.max(0, state.noahState.mood + mood)); 
    state.noahState.focus = Math.min(100, Math.max(0, state.noahState.focus + focus)); 
    let jealousyIncrease = jealousy;
    if (state.activeEffects.jealousy_amplifier_duration > 0) jealousyIncrease *= 2;
    state.noahState.jealousy = Math.max(0, state.noahState.jealousy + jealousyIncrease); 
    state.affection += modifiedAffection;
    updateNoahStateUI(); checkLevelUp(); 
}
function updateNoahState() {
    // 【修改点1】基础专注不再减少，改为0（不掉也不涨）
    let focusChange = 0; 
    
    // 【修改点2】心情逻辑优化：只有心情太高(>95)才微调，太低(<60)会自动恢复
    let moodChange = 0;
    if (state.noahState.mood > 95) {
        moodChange = -0.5; // 只有爆表时才极慢回落
    } else if (state.noahState.mood < 60) {
        moodChange = 0.5;  // 心情不好时会自动慢慢恢复
    }

    // 【修改点3】番茄钟保护机制：如果正在专注模式，数值反涨！
    if (currentGameMode === 'pomo' && isRunning) {
        focusChange += 2; // 番茄钟期间专注度上升
        moodChange += 1;  // 番茄钟期间心情上升
    }

    // 保留原有的天气影响（但把负面影响去掉了）
    if (state.weather.current === '晴朗') { moodChange += 0.5; focusChange += 0.5; }
    else if (state.weather.current === '小雨') { focusChange += 1; } // 下雨天更专注
    // 删除了雷雨天扣心情的逻辑

    // 壁炉加成保留
    if(state.activeEffects.fireplace_active_duration > 0) { moodChange += 1; }

    // 计算最终结果
    state.noahState.focus = Math.max(0, state.noahState.focus + focusChange);
    state.noahState.mood += moodChange;
    
    // 确保数值不超出 0-100 的范围
    state.noahState.mood = Math.round(Math.min(100, Math.max(0, state.noahState.mood)));
    state.noahState.focus = Math.round(Math.min(100, Math.max(0, state.noahState.focus)));

    // 处理道具持续时间（保持不变）
    Object.keys(state.activeEffects).forEach(key => { if(key.endsWith('_duration')) { state.activeEffects[key]--; if(state.activeEffects[key] <= 0) { delete state.activeEffects[key]; if (key === 'fireplace_active_duration') updateFeatureButtons(); if(key === 'replace_dialogue_duration') delete state.activeEffects.replace_dialogue_pool; } } });
    
    updateNoahStateUI(); 
    saveState();
}
function updateNoahStateUI() { el.moodValue.textContent = state.noahState.mood; el.moodProgress.style.width = `${state.noahState.mood}%`; el.focusValue.textContent = Math.round(state.noahState.focus); el.focusProgress.style.width = `${state.noahState.focus}%`; if (state.activeEffects.visual_effect === 'mood_ink') updateDialogueColor(); }
function updateDialogueColor() { 
    // 如果有自定义颜色（买了墨水），优先使用自定义颜色
    if (state.activeEffects.visual_effect === 'mood_ink' && state.customDialogueColor) {
        el.dialogue.style.color = state.customDialogueColor;
        // 同时给文字加一点阴影，防止浅色看不清
        el.dialogue.style.textShadow = '0 0 2px rgba(0,0,0,0.5)';
        return;
    }

    // 否则还是按照心情变色（默认逻辑）
    const mood = state.noahState.mood; 
    el.dialogue.style.textShadow = 'none'; // 默认无阴影
    if(mood > 80) el.dialogue.style.color = '#FADADD'; // 害羞粉
    else if (mood < 40) el.dialogue.style.color = '#A5C9E2'; // 忧郁蓝
    else el.dialogue.style.color = '#FFFFFF'; // 默认白
}

function openSceneSelector() { el.modalTitle.textContent = "场景切换"; const scenes = [ { id: 'library', name: '霍格沃茨图书馆', desc: '我们故事开始的地方。安静，适合专注。' }, { id: 'common-room', name: '拉文克劳公共休息室', desc: '星空穹顶之下，智慧与宁静并存。', unlockLevel: 2 }, { id: 'dormitory', name: '诺亚·司德里安的私人宿舍', desc: '只属于我们的私密空间。', unlockAchievement: 'soulmate' }, { id: 'astronomy-tower', name: '天文塔顶', desc: '俯瞰整个霍格沃茨，适合思考未来。', unlockItem: 'astronomy_chart' } ]; let content = '<div id="scene-selection-container">'; scenes.forEach(scene => { let isLocked = true; let lockReason = ''; if (state.unlockedScenes.includes(scene.id)) { isLocked = false; } else if (scene.unlockLevel && state.level >= scene.unlockLevel) { isLocked = false; if(!state.unlockedScenes.includes(scene.id)) state.unlockedScenes.push(scene.id); } else if (scene.unlockAchievement && achievements[scene.unlockAchievement]?.unlocked) { isLocked = false; if(!state.unlockedScenes.includes(scene.id)) state.unlockedScenes.push(scene.id); } else if (scene.unlockItem && state.purchasedItems.includes(scene.unlockItem)) { isLocked = false; if(!state.unlockedScenes.includes(scene.id)) state.unlockedScenes.push(scene.id); } if(isLocked) { if(scene.unlockLevel) lockReason = `(关系达到 LV${scene.unlockLevel} 解锁)`; else if(scene.unlockAchievement) lockReason = `(达成成就'${achievements[scene.unlockAchievement].name}'解锁)`; else if(scene.unlockItem) lockReason = `(拥有'${shopItems.find(i=>i.id===scene.unlockItem).name}'解锁)`; } const sceneBtnHTML = `<button class="scene-select-btn" data-sceneid="${scene.id}" data-scenename="${scene.name}" ${isLocked || state.currentScene === scene.id ? 'disabled' : ''}>${state.currentScene === scene.id ? '当前场景' : '前往'}</button>`; content += `<div class="scene-item ${isLocked ? 'locked' : ''}"><div class="scene-item-info"><h3>${scene.name}</h3><p>${scene.desc} ${lockReason}</p></div>${sceneBtnHTML}</div>`; }); content += '</div>'; el.modalBody.innerHTML = content; el.modalChoices.innerHTML = ''; el.modalCloseBtn.style.display = 'block'; el.modal.style.display = 'flex'; document.querySelectorAll('.scene-select-btn').forEach(btn => { btn.addEventListener('click', e => changeScene(e.target.dataset.sceneid, e.target.dataset.scenename)); }); }
// --- 【修改代码 3】切换场景时立刻说话 ---
function changeScene(sceneId, sceneName) {
    logEvent('scene_change', { sceneName: sceneName });
    state.currentScene = sceneId;
    state.weather.sceneName = sceneName;
    el.body.className = `scene-${sceneId}`;
    el.modal.style.display = 'none';
    updateWeatherUI();
    
    // --- 新增：切换后立刻触发一句场景对话 ---
    if (noah.dialogue.scenes[sceneId]) {
        // 延迟 500毫秒说，给界面一点切换的时间
        setTimeout(() => {
            const text = getRandomItem(noah.dialogue.scenes[sceneId]);
            showDialogue(null, text);
        }, 500);
    }
    
    saveState();
}

function updateSceneButton() { if(state.unlockedScenes.length > 1) el.sceneBtn.disabled = false; }
function updateWeather() { const weathers = ['晴朗', '晴朗', '阴天', '阴天', '小雨', '雷雨']; const newWeather = getRandomItem(weathers); if(newWeather !== state.weather.current) { state.weather.current = newWeather; logEvent('weather_change', {newWeather}); updateWeatherUI(); } }
function updateWeatherUI() { el.currentScene.textContent = state.weather.sceneName; el.currentWeather.textContent = state.weather.current; }
function unlockAchievement(id) { if(!achievements[id] || state.achievements[id].unlocked) return; state.achievements[id].unlocked = true; const ach = achievements[id]; logEvent('achievement', {id: id, name: ach.name}); let rewardText = ''; if(ach.reward) { if(ach.reward.points) { state.focusPoints += ach.reward.points; rewardText += ` 专注点+${ach.reward.points}。`; } if(ach.reward.affection) { changeNoahState({affection: ach.reward.affection}); rewardText += ` 好感度+${ach.reward.affection}。`; } if(ach.reward.dialogue) { setTimeout(() => showDialogue(null, ach.reward.dialogue), 1000); } if(ach.reward.unlock_scene) { if(!state.unlockedScenes.includes(ach.reward.unlock_scene)) state.unlockedScenes.push(ach.reward.unlock_scene); updateSceneButton(); } } showEvent("成就解锁！", `<b>${ach.name}</b><br>${ach.desc}<br><i>${rewardText}</i>`); updateStats(); saveState(); }
function openAchievements() { el.modalTitle.textContent = "秘密成就"; let content = '<div id="achievement-intro">你走过的每一步，我都铭记于心。</div><div id="achievement-container">'; Object.keys(achievements).forEach(id => { const ach = achievements[id];// 修改了这里：给 ach.name 和 ach.desc 都套上了 formatText()
content += `<div class="achievement-item ${state.achievements[id].unlocked ? '' : 'locked'}"><div class="achievement-item-info"><h3>${state.achievements[id].unlocked ? formatText(ach.name) : '？？？'}</h3><p>${state.achievements[id].unlocked ? formatText(ach.desc) : '达成某个隐藏条件后解锁。'}</p></div></div>`;
 }); content += '</div>'; el.modalBody.innerHTML = content; el.modalChoices.innerHTML = ''; el.modalCloseBtn.style.display = 'block'; el.modal.style.display = 'flex'; }
function openEventLog() { el.modalTitle.textContent = "诺亚的日记"; let content = `<div id="log-intro">这些是...我为${state.profile.name}写下的记忆。字迹有些潦草，因为我总是在偷偷写。怕被她看见，又怕忘记哪怕一秒钟的悸动。</div><ul id="event-log-container">`; if(state.eventLog.length === 0) content += '书页还是空白的，我们的故事正等待书写。'; else state.eventLog.forEach(log => { content += `<li class="event-log-item"><span class="log-date">${log.date}</span><p class="log-text">${log.text}</p></li>`; }); content += '</ul>'; el.modalBody.innerHTML = content; el.modalChoices.innerHTML = ''; el.modalCloseBtn.style.display = 'block'; el.modal.style.display = 'flex'; }
function showHint(isPoorFocus=false) { 
    let hintText = state.currentWord.hint || "这个词没有特殊提示。"; 
    
    if(isPoorFocus) hintText = "我太累了，什么都想不起来……"; 
    
    // --- 核心修改：检查才智药水 ---
    if (state.activeEffects.free_hint > 0) { 
        state.activeEffects.free_hint--; // 消耗一次
        showEvent("才智药剂生效", hintText + `<br><br><i>(药效作用中，本次提示免费。剩余次数: ${state.activeEffects.free_hint})</i>`); 
        // 这里我们不设置 isWaitingForNext，允许用户看完提示后继续答题
        // 如果你想让提示出来后直接算这题“跳过”或者“已看提示”，逻辑会有所不同
        // 目前逻辑是：给你看提示，然后你需要点击“下一个”（或者你需要重新输入）
        // 为了方便，我们这里显示完提示，给一个按钮继续
        showNextButton(); 
    } else { 
        // 正常情况
        state.isWaitingForNext = true; 
        showEvent("诺亚·司德里安的提示", hintText); 
    } 
}

function checkAchievements() { Object.keys(achievements).forEach(id => { if (!state.achievements[id].unlocked) { const checkFunction = window['check_' + id]; if (checkFunction) checkFunction(); } }); function check_wordMaster10() { if(state.words.filter(w=>w.interval >= 30*DAY).length >= 10) unlockAchievement('wordMaster10');} function check_wordMaster100() { if(state.words.filter(w=>w.interval >= 30*DAY).length >= 100) unlockAchievement('wordMaster100');} function check_wordMasterAll() { if(state.words.every(w=>w.interval >= 30*DAY)) unlockAchievement('wordMasterAll');} function check_perfectStreak10() { if(state.gameStats.consecutiveCorrect >= 10) unlockAchievement('perfectStreak10');} function check_perfectStreak50() { if(state.gameStats.consecutiveCorrect >= 50) unlockAchievement('perfectStreak50');} function check_richAF() { if(state.gameStats.totalPoints >= 1000) unlockAchievement('richAF');} function check_superRich() { if(state.gameStats.totalPoints >= 5000) unlockAchievement('superRich');} function check_shopaholic() { if(new Set(state.purchasedItems).size >= 10) unlockAchievement('shopaholic');} function check_collector() { const rareItems = shopItems.filter(i=>i.category === '奇珍异宝' && i.stock === 1 && i.id !== 'hufflepuff_fireplace'); if (rareItems.every(i => state.purchasedItems.includes(i.id))) unlockAchievement('collector');} function check_knockturnRegular() { const knockturnCount = state.purchasedItems.filter(id => shopItems.find(i=>i.id===id)?.category === '翻倒巷的低语').length; if(knockturnCount >= 5) unlockAchievement('knockturnRegular');} function check_soulmate() { if(state.level >= noah.levels.findIndex(l=>l.name === '灵魂伴侣')) unlockAchievement('soulmate'); } }
function showBreakButton() { state.isWaiting = true; el.feedbackContainer.innerHTML = ''; const btn = document.createElement('button'); btn.id = 'take-break-btn'; btn.className = 'feedback-btn'; btn.textContent = "提议休息一下"; btn.onclick = takeABreak; el.feedbackContainer.appendChild(btn); }
function takeABreak() {
    state.gameStats.wordsSinceBreak = 0; const eventName = "一次短暂的休憩"; const situation = "连续学习了这么久，你觉得是时候休息一下了。你向我提议...";
    const choices = [
        { text: "【玩一会儿巫师棋】", consequence: () => { logEvent('event_trigger', {eventName, log_text: `她提议下巫师棋来放松一下。她下棋像个格兰芬多一样冲动。我毫不留情地赢了她。看她懊恼的样子，比赢得学院杯还有趣。`}); changeNoahState({ mood: 5, focus: 10 }); showEvent("棋盘上的惨败", "我轻而易举地赢了你。“你的棋路和你的拼写一样，漏洞百出。”我虽然在嘲讽，但心情似乎好了不少。\n\n（我的心情和专注度略微恢复）", true); showNextButton(); } },
        { text: "【聊点别的】", consequence: () => { logEvent('event_trigger', {eventName, log_text: `我们聊了些学习之外的事。这让我意识到，我们的世界不应该只有单词和咒语。她比我想象的更有趣。`}); changeNoahState({ affection: 5 }); showEvent("片刻的闲谈", getRandomItem([ "你们聊起了魁地奇。我坚持认为那是一项“野蛮的运动”，但还是承认了哈利·波特作为找球手的天赋。", "你问起了我的家庭。我只是淡淡地说“没什么好说的”，便转移了话题，但我们之间的气氛似乎柔和了一些。", `我问起了你在麻瓜世界的生活，对“手机”这种不用猫头鹰就能即时通讯的设备表现出了浓厚的兴趣。` ]), true); showNextButton(); } },
        { text: "【算了，继续学习】", consequence: () => { logEvent('simple', {message: '她提议休息，但又很快决定继续。这种决心……很好。她开始像个真正的拉文克劳了。'}); showDialogue(null, "很好，有上进心。那我们继续。"); state.isWaiting = false; nextWord(); } }
    ]; showChoiceEvent(situation.replace(/乐乐/g, state.profile.name), situation, choices);
}
function updateFeatureButtons() {
    let fireplaceBtn = document.getElementById('fireplace-btn');
    if (state.unlockedFeatures.fireplace && !fireplaceBtn) { fireplaceBtn = document.createElement('button'); fireplaceBtn.id = 'fireplace-btn'; fireplaceBtn.className = 'action-btn'; fireplaceBtn.innerHTML = '🔥'; fireplaceBtn.onclick = toggleFireplace; el.actionButtonsContainer.appendChild(fireplaceBtn); }
    if (fireplaceBtn) { fireplaceBtn.classList.toggle('active', state.activeEffects.fireplace_active_duration > 0); fireplaceBtn.disabled = state.activeEffects.fireplace_active_duration > 0; }
}
function toggleFireplace() { if (state.activeEffects.fireplace_active_duration > 0) return; state.activeEffects.fireplace_active_duration = 30; logEvent('simple', {message: getRandomItem(shopItems.find(i=>i.id==='hufflepuff_fireplace').journal)}); showDialogue(null, "壁炉的光很暖和...像你一样。"); updateFeatureButtons(); }
function startReviewSession() {
    if (state.reviewMode || state.isWaiting) return;
    const wrongWords = state.words.filter(w => w.incorrect > 0);
    if (wrongWords.length === 0) { showEvent("无可挑剔", "错题集是空的。看来你最近表现得不错，无可指摘。", true); return; }
    state.reviewMode = true; state.isWaiting = true; state.reviewQueue = wrongWords.sort(() => Math.random() - 0.5);
    el.gameTitle.textContent = "错题回顾"; el.gameTitle.classList.add('review-mode-title');
    showDialogue(null, `很好，敢于直面自己的错误。我们从第一个开始。`);
    nextReviewWord();
}
function endReviewSession() {
    state.reviewMode = false; state.isWaiting = false; state.reviewQueue = []; state.reviewStep = '';
    el.gameTitle.textContent = `${state.profile.name}的备考契约`; el.gameTitle.classList.remove('review-mode-title');
    showDialogue(null, "好吧，既然你坚持。我们回到正轨。");
    showNextButton();
}
function nextReviewWord() {
    el.feedbackContainer.innerHTML = ''; 
    const btn = document.createElement('button'); btn.id = 'exit-review-btn'; btn.className = 'feedback-btn'; btn.textContent = "返回主线"; btn.onclick = endReviewSession;
    el.feedbackContainer.appendChild(btn);
    if (state.reviewQueue.length === 0) {
        logEvent('simple', {message: `今天的错题回顾结束了。看着${state.profile.name}努力纠正错误的样子，我发现耐心似乎并没有那么难。也许是因为她，我变得不那么刻薄了。`});
        state.reviewMode = false; el.gameTitle.textContent = `${state.profile.name}的备考契约`; el.gameTitle.classList.remove('review-mode-title');
        showEvent("回顾结束", "所有的错题都已回顾完毕。希望你这次能真的记住。", true);
        return;
    }
    state.currentWord = state.reviewQueue[0];
    state.reviewStep = 'mcq';
    el.noahThought.textContent = `（回顾中：这曾是${state.profile.name}的绊脚石。）`;
    displayMCQ();
    state.isWaiting = false;
}
function handleReviewAnswer(isCorrect, step) {
    if (step === 'mcq') {
        setTimeout(() => {
            state.reviewStep = 'spell';
            el.noahThought.textContent = `（回顾中：现在，拼写它。）`;
            displaySpell();
        }, 1500);
    } else if (step === 'spell') {
        const word = state.currentWord;
        if(isCorrect) {
            word.incorrect = 0;
            state.focusPoints += 5;
            showDialogue('reviewCorrect');
        } else {
            showDialogue('reviewIncorrect');
        }
        state.reviewQueue.shift();
        updateReviewButton();
        updateStats();
        state.isWaitingForNext = true;
    }
}
function updateReviewButton() { const wrongWordsCount = state.words.filter(w => w.incorrect > 0).length; el.reviewBtn.textContent = `错题回顾 (${wrongWordsCount})`; el.reviewBtn.disabled = wrongWordsCount === 0; }
function checkSpecialDaySetup() {
    if (state.specialDay === null) {
        setTimeout(() => setupProfile(), 100);
    }
}
// --- V45.99 全节日增强版逻辑 ---
function handleSeasonalAndHolidayChanges() {
    const now = new Date();
    const month = now.getMonth() + 1; // 1-12
    const day = now.getDate();
    // 格式化日期字符串，例如 "02-14"
    const todayStr = `${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
    
    // --- 1. 季节系统 ---
    let currentSeason;
    // 按北半球气象学划分
    if (month >= 3 && month <= 5) currentSeason = 'spring';
    else if (month >= 6 && month <= 8) currentSeason = 'summer';
    else if (month >= 9 && month <= 11) currentSeason = 'autumn';
    else currentSeason = 'winter';
    
    // 动态注入当季对话到闲聊池（去重）
    const seasonalPool = noah.dialogue.seasonal[currentSeason];
    noah.dialogue.idleChatter = [...new Set([...noah.dialogue.idleChatter, ...seasonalPool])];

    // --- 2. 每日一次的事件检查 ---
    // 如果今天已经触发过特殊事件，就跳过，防止刷新网页重复弹窗
    if (state.gameStats.lastSpecialEventDate === todayStr) return; 

    // --- 3. 节日事件库定义 ---
    let holidayEvent = null;
    let icon = ''; // 显示在天气栏的小图标

    // [1月1日] 元旦
    if (month === 1 && day === 1) {
        icon = '🎆';
        holidayEvent = {
            title: "新年：时间的锚点",
            text: "诺亚站在天文塔上，看着远处的烟火。\n\n“时间是个伪命题，人类为了标记衰老而发明的刻度。但如果这个刻度上标记着‘与你在一起’，那它就有了意义。\nHappy New Year。去年的诺亚属于你，今年的也是。”",
            log: "新年。我不信神，不许愿。但我希望关于她的变量永远为正。在这个喧嚣的世界里，她是我的常数。",
            effects: { mood: 20, affection: 15 }
        };
    }
    // [2月14日] 情人节
    else if (month === 2 && day === 14) {
        icon = '💘';
        holidayEvent = {
            title: "情人节的独占欲",
            text: "诺亚把你桌上堆积的、别人送的巧克力全都扫进了垃圾桶（甚至用了一个消失咒）。\n\n“Stupid holiday... 充满了商业陷阱。但你只能吃我给的糖。如果你敢接受别人的心意...我会生气的，很生气的那种。”\n（他递给你一盒明显是手工制作的、形状不太完美的巧克力）",
            log: "情人节。那些不知死活的家伙竟然敢给她送巧克力？我全处理了。她只能是我的。这盒巧克力我做了一晚上，希望她别嫌弃形状丑。",
            effects: { mood: -5, affection: 30, jealousy: 100 }
        };
    }
    // [3月14日] 白色情人节 (回礼)
    else if (month === 3 && day === 14) {
        icon = '🎁';
        holidayEvent = {
            title: "白色情人节：回响",
            text: "“根据那个东方的习俗，今天是回礼的日子。”\n诺亚有些别扭地转过头，耳根微红。\n“虽然这不符合逻辑，但我还是准备了。不是为了还你的人情，是为了...啧，拿着就是了。”",
            log: "白色情人节。找个理由送她礼物罢了。看到她笑，我觉得我那点可笑的自尊心也不算什么。",
            effects: { mood: 10, affection: 20 }
        };
    }
    // [4月1日] 愚人节
    else if (month === 4 && day === 1) {
        icon = '🃏';
        holidayEvent = {
            title: "愚人节的禁忌",
            text: "你试图骗诺亚说你要转学。他的脸色瞬间苍白，手中的羽毛笔被折断了。\n\n“...愚人节？这种玩笑下次别开了。这一点也不好笑。因为如果是真的，我会发疯的。”\n（他紧紧抱住你，力道大得让你有些痛）",
            log: "她开了个糟糕的玩笑。我的心脏差点停跳。在这个充满谎言的日子里，只有我对她的爱是绝对真理。",
            effects: { mood: -30, focus: -20, affection: 5 }
        };
    }
    // [9月1日] 开学日
    else if (month === 9 && day === 1) {
        icon = '🚂';
        holidayEvent = {
            title: "重返霍格沃茨",
            text: "霍格沃茨特快列车的汽笛声。\n“又是一年。不管分院帽把新生分到哪里，不管黑魔法防御术的老师换成谁，你只要记住一件事：\n在霍格沃茨，我是你唯一的依靠。”",
            log: "开学了。车厢里很吵。但我只想听她说话。新的学期，意味着我有更多的时间可以正大光明地和她待在图书馆。",
            effects: { focus: 20, mood: 10 }
        };
    }
    // [10月31日] 万圣节
    else if (month === 10 && day === 31) {
        icon = '🎃';
        holidayEvent = {
            title: "万圣节前夜",
            text: "礼堂里飘着南瓜的香气。诺亚把你护在身后，冷冷地看着飘过的血人巴罗。\n\n“不管是幽灵、巨怪还是那个没鼻子的家伙...只要有我在，什么都别想吓到你。今晚跟紧我，寸步不离。”",
            log: "万圣节。如果不去想那些乱七八糟的意外，这其实是个不错的节日。她被幽灵吓到的样子像只受惊的小鹿，让我很想...欺负她，又想保护她。",
            effects: { mood: 5, focus: 5 }
        };
    }
    // [11月第4个星期四] 感恩节 (简化为11月24日左右触发)
    else if (month === 11 && day === 24) {
        icon = '🦃';
        holidayEvent = {
            title: "感恩节",
            text: "“感恩？那是清教徒的习俗。”诺亚顿了顿，声音低了下来，“但我确实有一件事需要感谢命运...那就是把你这个麻烦精送到了我身边。”",
            log: "感恩节。如果要我列一张感谢清单，上面只会写一个名字：乐乐。",
            effects: { affection: 25 }
        };
    }
    // [12月24日/25日] 圣诞节
    else if (month === 12 && (day === 24 || day === 25)) {
        icon = '🎄';
        // 自动上架节日限定：热可可
        if (!shopItems.find(i => i.id === 'hot_cocoa')) {
            shopItems.push({ 
                id: 'hot_cocoa', 
                category: '美食佳酿', 
                name: '圣诞热可可', 
                desc: '圣诞限定。诺亚亲手熬的，暖暖的。', 
                price: 0, // 免费
                affection: 10, 
                reaction: 'Merry Christmas. 趁热喝。' 
            });
        }
        holidayEvent = {
            title: "圣诞快乐",
            text: "窗外大雪纷飞，壁炉里的火烧得很旺。\n诺亚把一条厚厚的围巾围在你脖子上，然后递给你一杯热可可。\n“Merry Christmas。在这个团聚的日子里，你身边是我。这符合逻辑，也符合我的私心。”",
            log: "圣诞节。霍格沃茨很冷，但和她在一起很暖。上帝把最好的礼物放在我身边了，我不需要别的。希望时间能停在这一刻。",
            effects: { mood: 30, affection: 30 }
        };
    }
    // [12月31日] 除夕
    else if (month === 12 && day === 31) {
        icon = '⏳';
        holidayEvent = {
            title: "岁末终章",
            text: "“这一年就要结束了。”诺亚看着沙漏，“如果你有什么遗憾，最好现在忘掉。因为明年，我会填满你所有的记忆，不留一丝空隙。”",
            log: "最后一天。回顾这一年，全是她的影子。这是我度过的最好的一年，因为有她。",
            effects: { mood: 10, affection: 10 }
        };
    }
    // [玩家设定的纪念日/生日]
    else if (state.specialDay && todayStr === state.specialDay) {
        icon = '🎂';
        holidayEvent = {
            title: `属于${state.profile.name}的日子`,
            text: `诺亚今天穿得格外正式，蓝色的领带打得一丝不苟，甚至喷了一点淡淡的古龙水。\n\n“这个日子对我来说，比魔法史上的任何大事件都重要。因为这天有关你。\n生日快乐/纪念日快乐，我的${state.profile.name}。你是我的唯一，我的奇迹。”`,
            log: "今天是特别的一天。我推掉了一切安排，甚至翘了魔药课，只为陪她。看着她惊喜的表情，我觉得一切都值得。我爱她，这不再是秘密，这是我的真理。",
            effects: { mood: 100, focus: 100, affection: 200 }
        };
    }

    // --- 4. 执行事件逻辑 ---
    if (icon) {
        // 在天气栏添加小图标
        if (!el.envStatus.querySelector('.holiday-icon')) { 
            const iconSpan = document.createElement('span'); 
            iconSpan.className = 'holiday-icon'; 
            iconSpan.textContent = icon; 
            el.envStatus.appendChild(iconSpan); 
        }
    }

    if (holidayEvent) {
        // 记录今天已触发，防止重复
        state.gameStats.lastSpecialEventDate = todayStr;
        
        // 写入日志
        logEvent('simple', { message: holidayEvent.log });
        
        // 应用数值影响
        if (holidayEvent.effects) {
            changeNoahState(holidayEvent.effects, false);
        }
        
        // 延迟弹窗，确保页面加载完毕
        setTimeout(() => {
            showEvent(holidayEvent.title, holidayEvent.text, true);
        }, 1200);
    }
}
function checkWeeklySummary() {
    const now = new Date();
    const lastReset = new Date(state.weeklyStats.lastReset);
    const dayOfWeek = now.getDay();
    if (dayOfWeek === 1 && (now - lastReset > 6 * DAY)) {
        const { correct, incorrect, gifts } = state.weeklyStats;
        let summary = `关于上周，${state.profile.name}，我做了一个小小的总结。`;
        const total = correct + incorrect;
        if (total > 20) {
            const accuracy = correct / total;
            if (accuracy > 0.9) summary += ` 你的学习效率非常高，正确率令人满意，几乎没有给我挑错的机会。`;
            else if (accuracy > 0.7) summary += ` 你的表现还算稳定，但有几个单词你似乎总在同一个地方犯错，需要多加注意。`;
            else summary += ` 你的错误有点多，我希望这不是因为你的心思飞到了别的地方。`;
        } else { summary += ` 我们似乎没怎么学习，希望你不是在偷懒。`; }
        if (gifts.length > 0) summary += ` 另外，谢谢你上周的礼物。`;
        logEvent('simple', {message: summary});
        showEvent("诺亚的每周总结", summary);
        state.weeklyStats = { correct: 0, incorrect: 0, gifts: [], events: [], lastReset: now.getTime() };
        saveState();
    }
}

// --- START GAME ---
// --- 词书切换系统 V45.2 ---

function openBookSelector() {
    el.modalTitle.textContent = "知识的宝库";
    
    let content = `<p id="shop-intro" style="color: #F2B3C4;">“想挑战更难的？还是想巩固基础？无论选择哪本，我都陪你。”</p>`;
    content += `<div class="book-grid">`;
    
    Object.keys(bookLibrary).forEach(key => {
        const book = bookLibrary[key];
        const isActive = (state.currentBook === key);
        // 计算该书的进度（这里简单模拟，实际上需要更复杂的存档结构支持多书进度，为简便起见，切换书会重置当前单词池，但保留全局属性）
        const wordCount = book.data.length;
        
        content += `
            <div class="book-card ${isActive ? 'active' : ''}" onclick="selectBook('${key}')">
                <div class="book-title">${book.name}</div>
                <div class="book-desc">${book.desc}</div>
                <div class="book-stats">词汇量: ${wordCount} | ${isActive ? '正在学习' : '点击切换'}</div>
            </div>
        `;
    });
    
    content += `</div>`;
    
    el.modalBody.innerHTML = content;
    el.modalChoices.innerHTML = '';
    
    // 添加一个关闭按钮
    const closeBtn = document.createElement('button');
    closeBtn.className = 'choice-btn';
    closeBtn.innerText = '返回';
    closeBtn.onclick = () => el.modal.style.display = 'none';
    el.modalChoices.appendChild(closeBtn);

    el.modalCloseBtn.style.display = 'none'; // 隐藏默认关闭，使用自定义的
    el.modal.style.display = 'flex';
}

function selectBook(bookKey) {
    if (state.currentBook === bookKey) {
        showDialogue(null, "你已经在这本书里了，笨蛋。专心点。");
        return;
    }

    if(confirm("切换词书将重置当前的【单词学习队列】（但会保留你的好感度、金币和物品）。\n\n确定要开始新的挑战吗？")) {
        // 1. 更新状态
        state.currentBook = bookKey;
        const newWords = bookLibrary[bookKey].data;
        
        // 2. 重置单词数据结构 (保留原逻辑)
        state.words = newWords.map((w, i) => ({ 
            id: i, 
            word: w.word, 
            phonetic: w.phonetic, 
            meaning: w.meaning, 
            etymology: w.etymology, 
            hint: w.hint || `专注于这个词的核心含义：'${w.meaning.split(' ')[1] || w.meaning}'。`, 
            noahWhisper: w.noahWhisper, 
            dueDate: 0, 
            interval: 0, 
            easeFactor: 2.5, 
            isNew: true, 
            incorrect: 0 
        }));
        
        // 3. 重置当前学习状态
        state.currentWord = null;
        state.isWaiting = false;
        state.reviewMode = false;
        
        // 4. 更新UI统计
        el.totalCount.textContent = state.words.length;
        el.masteredCount.textContent = 0;
        
        // 5. 诺亚的反应 (修改后的版本)
        let reaction = "";
        if (bookKey === 'cet6') {
            reaction = "六级？哼，终于有点挑战性了。我会盯着你的，别想偷懒。";
            changeNoahState({focus: 5, mood: 2});
        } else if (bookKey === 'tem4') {
            reaction = "专四？语言学的魅力在于精准。让我看看你能把这些词掌握到什么程度。";
            changeNoahState({focus: 10, mood: 5});
        } else {
            reaction = "回到四级？打好基础也是一种智慧。我们从头开始。";
        }

        
        logEvent('simple', {message: `切换了学习计划：${bookLibrary[bookKey].name}。诺亚似乎对新的开始很感兴趣。`});
        showEvent("契约更新", `你已切换至《${bookLibrary[bookKey].name}》。\n\n${reaction}`);
        
        el.modal.style.display = 'none';
        saveState();
        nextWord(); // 立即开始新词
    }
}
// --- 存档导出与导入功能 ---

function exportSaveData() {
    // 1. 获取当前的存档数据
    const saveData = localStorage.getItem(SAVE_KEY);
    if (!saveData) {
        alert("还没有存档数据可以导出！请先开始游戏。");
        return;
    }

    // 2. 创建一个文件名，带上当前时间，防止搞混
    const date = new Date();
    const timeStr = `${date.getFullYear()}${(date.getMonth()+1).toString().padStart(2,'0')}${date.getDate()}`;
    const fileName = `诺亚备考契约_存档_${state.profile.name || '未命名'}_${timeStr}.json`;

    // 3. 创建一个虚拟的下载链接并点击它
    const blob = new Blob([saveData], { type: "application/json" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = fileName;
    document.body.appendChild(a);
    a.click();
    
    // 4. 清理
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    
    // 5. 诺亚的反馈
    if (typeof showDialogue === 'function') {
        showDialogue(null, "记忆提取完毕。请妥善保管这份契约，别把它弄丢了。");
    }
}

function triggerImport() {
    // 触发那个隐藏的文件输入框
    document.getElementById('import-file-input').click();
}

function handleFileImport(event) {
    const file = event.target.files[0];
    if (!file) return;

    if (!confirm("警告：导入存档将覆盖当前的进度！\n建议先导出备份当前存档。\n\n确定要覆盖吗？")) {
        event.target.value = ''; // 清空选择
        return;
    }

    const reader = new FileReader();
    reader.onload = function(e) {
        try {
            const jsonStr = e.target.result;
            // 简单的检查，看看是不是合法的JSON
            const data = JSON.parse(jsonStr);
            
            // 检查是不是这个游戏的存档 (检查有没有 profile 字段)
            if (data && data.profile) {
                localStorage.setItem(SAVE_KEY, jsonStr);
                alert("存档导入成功！页面即将刷新...");
                location.reload(); // 刷新页面以加载新存档
            } else {
                alert("存档格式错误：这似乎不是诺亚的记忆文件。");
            }
        } catch (error) {
            console.error(error);
            alert("读取失败：文件可能已损坏。");
        }
    };
    reader.readAsText(file);
}

init();
</script>
</body>
</html>
